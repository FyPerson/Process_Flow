# 线索管理流程说明

## 📋 流程概述

这是一个简洁的线索管理流程，展示了从市场活动到线索登记的完整过程。

## 🔄 流程节点

### 1. 开始（终止节点）

- **类型**：椭圆形
- **颜色**：绿色渐变
- **说明**：流程起点

### 2. 市场活动/渠道触点（处理节点）

- **类型**：圆角矩形
- **颜色**：蓝色渐变
- **功能**：通过市场活动或渠道触点获取潜在客户信息
- **数据库表**：
  - `marketing_activity` - 市场活动表
  - `channel_touchpoint` - 渠道触点表

### 3. 线索收集（处理节点）

- **类型**：圆角矩形
- **颜色**：蓝色渐变
- **功能**：收集和整理潜在客户的基本信息
- **数据库表**：
  - `lead_collection` - 线索收集表
  - `lead_source` - 线索来源表

### 4. 线索登记（处理节点）

- **类型**：圆角矩形
- **颜色**：蓝色渐变
- **功能**：正式登记线索信息，录入系统进行后续跟进
- **数据库表**：
  - `lead_register` - 线索登记表
  - `lead_detail` - 线索详情表
  - `lead_assignment` - 线索分配表

## 📊 流程结构

```
        开始
         ↓
  市场活动/渠道触点
         ↓
      线索收集
         ↓
      线索登记
```

## 🎨 视觉特点

### 节点样式

- **开始节点**：绿色椭圆，表示流程起点
- **处理节点**：蓝色圆角矩形，带阴影和悬停效果
- **连接线**：灰色粗线（3px），带箭头

### 交互效果

- **节点悬停**：上移 4px，缩放 1.02 倍
- **节点点击**：显示详情面板，查看数据库表信息
- **可展开标识**：带 📋 图标的节点可点击查看详情

## 🚀 使用方法

### 访问页面

1. 启动项目：`双击 启动.bat` 或 `npm run dev`
2. 打开浏览器访问：`http://localhost:5173`
3. 点击顶部导航栏的 **"流程可视化"** 按钮

### 操作说明

- **查看详情**：点击带 📋 图标的节点
- **自动布局**：点击左上角"📐 自动布局"按钮
- **缩放视图**：使用鼠标滚轮
- **移动画布**：按住鼠标左键拖动
- **适配视图**：点击右侧控制面板的适配按钮

## 📁 数据文件

### 位置

`public/data/simple-flow.json`

### 结构示例

```json
{
  "id": "simple-flow-001",
  "name": "线索管理流程",
  "nodes": [
    {
      "id": "node_start",
      "name": "开始",
      "type": "terminator",
      "position": { "x": 400, "y": 50 }
    },
    {
      "id": "node_market",
      "name": "市场活动/渠道触点",
      "type": "process",
      "position": { "x": 350, "y": 180 },
      "expandable": true,
      "detailConfig": {
        "description": "...",
        "databaseTables": [...]
      }
    }
  ],
  "connectors": [
    {
      "id": "conn_001",
      "sourceID": "node_start",
      "targetID": "node_market",
      "sourceHandle": "bottom",
      "targetHandle": "top"
    }
  ]
}
```

## 🎯 业务价值

### 1. 线索来源追踪

- 记录每个线索的来源渠道
- 评估不同市场活动的效果
- 优化营销资源分配

### 2. 线索质量管理

- 统一的线索收集标准
- 完整的客户信息记录
- 便于后续跟进和转化

### 3. 数据驱动决策

- 分析线索转化率
- 识别高价值客户特征
- 改进市场策略

## 🔧 自定义修改

### 添加新节点

编辑 `public/data/simple-flow.json`：

```json
{
  "id": "node_new",
  "name": "新节点",
  "type": "process",
  "position": { "x": 350, "y": 600 },
  "expandable": true,
  "detailConfig": {
    "description": "节点描述",
    "databaseTables": [
      {
        "tableName": "table_name",
        "description": "表描述",
        "keyFields": ["field1", "field2"]
      }
    ]
  }
}
```

### 修改连接关系

在 `connectors` 数组中添加：

```json
{
  "id": "conn_new",
  "sourceID": "node_register",
  "targetID": "node_new",
  "sourceHandle": "bottom",
  "targetHandle": "top"
}
```

### 调整节点位置

修改 `position` 字段的 `x` 和 `y` 值即可。

## 📝 技术栈

- **React 19** - UI 框架
- **React Flow 12** - 流程图库
- **TypeScript** - 类型安全
- **Vite** - 构建工具

## 💡 最佳实践

1. **节点间距**：保持 140-160px 的垂直间距
2. **水平对齐**：所有节点的 x 坐标保持一致（350-400）
3. **可展开节点**：重要的业务节点设置 `expandable: true`
4. **详细配置**：为可展开节点添加完整的 `detailConfig`
5. **数据库表**：记录所有相关的数据库表和关键字段

---

**更新时间**：2025-11-28  
**版本**：v1.0  
**流程类型**：线性流程
