[
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\App.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\ContractTightThumbnail\\index.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\CustomNode\\index.tsx",
    "messages": [
      {
        "ruleId": null,
        "message": "Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').",
        "line": 94,
        "column": 5,
        "severity": 1,
        "nodeType": null,
        "fix": {
          "range": [
            2997,
            3052
          ],
          "text": " "
        }
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'e' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 115,
        "column": 36,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 115,
        "endColumn": 37
      },
      {
        "ruleId": null,
        "message": "Unused eslint-disable directive (no problems were reported from 'react-hooks/exhaustive-deps').",
        "line": 130,
        "column": 7,
        "severity": 1,
        "nodeType": null,
        "fix": {
          "range": [
            4060,
            4115
          ],
          "text": " "
        }
      },
      {
        "ruleId": "react-hooks/exhaustive-deps",
        "severity": 1,
        "message": "The ref value 'edgeUpdateFrameRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'edgeUpdateFrameRef.current' to a variable inside the effect, and use that variable in the cleanup function.",
        "line": 132,
        "column": 49,
        "nodeType": "Identifier",
        "endLine": 132,
        "endColumn": 56
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 4,
    "fixableErrorCount": 0,
    "fixableWarningCount": 2,
    "source": "import { memo, useState, useCallback, useRef, useEffect, CSSProperties } from 'react';\r\nimport {\r\n  Handle,\r\n  Position,\r\n  NodeProps,\r\n  useReactFlow,\r\n  NodeResizer,\r\n  useUpdateNodeInternals,\r\n} from '@xyflow/react';\r\nimport { FlowNodeData } from '../../types/flow';\r\nimport './styles.css';\r\n\r\ninterface CustomNodeProps extends NodeProps {\r\n  style?: CSSProperties;\r\n}\r\n\r\nexport const CustomNode = memo(({ id, data, selected, style }: CustomNodeProps) => {\r\n  const nodeData = data as unknown as FlowNodeData;\r\n  const { setNodes, getNode } = useReactFlow();\r\n  const updateNodeInternals = useUpdateNodeInternals();\r\n\r\n  // ç¼–è¾‘çŠ¶æ€\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editValue, setEditValue] = useState(nodeData.name);\r\n  const [originalValue, setOriginalValue] = useState(nodeData.name); // ä¿å­˜ç¼–è¾‘å‰çš„åŸå§‹å€¼\r\n\r\n  const inputRef = useRef<HTMLTextAreaElement>(null);\r\n  // ç”¨äºèŠ‚æµè¿æ¥çº¿æ›´æ–°çš„ ref (è™½ç„¶ç›®å‰æœªåœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨ï¼Œä½†ä¿ç•™å…¶å£°æ˜ä»¥é˜²æœªæ¥æ‰©å±•)\r\n  const edgeUpdateFrameRef = useRef<number | null>(null);\r\n\r\n  // ä»èŠ‚ç‚¹å¯¹è±¡ä¸­è·å–å®Œæ•´çš„ styleï¼ˆåŒ…æ‹¬ä» React Flow ä¼ é€’çš„å’ŒèŠ‚ç‚¹æœ¬èº«çš„ï¼‰\r\n  const nodeStyle = style || getNode(id)?.style;\r\n\r\n  // è·å–èƒŒæ™¯è‰²ï¼š\r\n  // å¯¹äºåˆ¤æ–­èŠ‚ç‚¹å’Œæ•°æ®èŠ‚ç‚¹ï¼Œä» data.backgroundColor è¯»å–ï¼ˆä¸ä¿å­˜åœ¨ style ä¸­ï¼Œé¿å…åº”ç”¨åˆ°å¤–å±‚å®¹å™¨ï¼‰\r\n  // å¯¹äºå…¶ä»–èŠ‚ç‚¹ï¼Œä» style ä¸­è¯»å–\r\n  let backgroundColor: string | null = null;\r\n  if (nodeData.type === 'decision' || nodeData.type === 'data') {\r\n    backgroundColor = nodeData.backgroundColor || null;\r\n  } else {\r\n    backgroundColor =\r\n      nodeStyle?.backgroundColor ||\r\n      (typeof nodeStyle?.background === 'string' &&\r\n        !nodeStyle.background.includes('gradient') &&\r\n        !nodeStyle.background.includes('url')\r\n        ? nodeStyle.background\r\n        : null);\r\n  }\r\n\r\n  // è·å–å­—å·ï¼šä» style ä¸­è¯»å– fontSize\r\n  const fontSize = nodeStyle?.fontSize\r\n    ? typeof nodeStyle.fontSize === 'number'\r\n      ? `${nodeStyle.fontSize}px`\r\n      : nodeStyle.fontSize\r\n    : undefined;\r\n\r\n  // è·å–å­—ä½“é¢œè‰²ï¼šä» style ä¸­è¯»å– color\r\n  const fontColor = nodeStyle?.color as string | undefined;\r\n\r\n  // è·å–å­—ä½“æ—ï¼šä» style ä¸­è¯»å– fontFamily\r\n  const fontFamily = nodeStyle?.fontFamily as string | undefined;\r\n\r\n  // è·å–å­—ä½“ç²—ç»†ï¼šä» style ä¸­è¯»å– fontWeight\r\n  // ç¡®ä¿è¿”å›æ•°å­—ç±»å‹ï¼Œå¦‚æœä¸æ˜¯ 300ã€400ã€600ï¼Œåˆ™æ˜ å°„åˆ°æœ€æ¥è¿‘çš„å€¼\r\n  const rawFontWeight = nodeStyle?.fontWeight\r\n    ? typeof nodeStyle.fontWeight === 'number'\r\n      ? nodeStyle.fontWeight\r\n      : typeof nodeStyle.fontWeight === 'string'\r\n        ? nodeStyle.fontWeight === 'normal'\r\n          ? 400\r\n          : nodeStyle.fontWeight === 'bold'\r\n            ? 600\r\n            : parseInt(nodeStyle.fontWeight)\r\n        : undefined\r\n    : undefined;\r\n  // æ˜ å°„åˆ°å…è®¸çš„å€¼ï¼š300ã€400ã€600\r\n  const fontWeight =\r\n    rawFontWeight !== undefined\r\n      ? rawFontWeight <= 350\r\n        ? 300\r\n        : rawFontWeight <= 500\r\n          ? 400\r\n          : 600\r\n      : undefined;\r\n\r\n  // å¦‚æœè®¾ç½®äº†èƒŒæ™¯è‰²ï¼Œéœ€è¦ç¡®ä¿å®ƒèƒ½å¤Ÿè¦†ç›–CSSçš„é»˜è®¤èƒŒæ™¯\r\n  // é€šè¿‡åœ¨å†…å±‚å®¹å™¨ä¸Šåº”ç”¨æ ·å¼æ¥å®ç°\r\n\r\n  // æ¯æ¬¡ data å˜åŒ–æ—¶åŒæ­¥ editValue å’Œ originalValue\r\n  // æ¯æ¬¡ data å˜åŒ–æ—¶åŒæ­¥ editValue å’Œ originalValue\r\n  useEffect(() => {\r\n    // åªæœ‰å½“å€¼çœŸæ­£å˜åŒ–æ—¶æ‰æ›´æ–°ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“\r\n    // ä½¿ç”¨ requestAnimationFrame é¿å…åŒæ­¥ setState å¯¼è‡´çš„è­¦å‘Š\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    const timer = requestAnimationFrame(() => {\r\n      setEditValue((prev) => {\r\n        if (prev !== nodeData.name) return nodeData.name;\r\n        return prev;\r\n      });\r\n      setOriginalValue((prev) => {\r\n        if (prev !== nodeData.name) return nodeData.name;\r\n        return prev;\r\n      });\r\n    });\r\n    return () => cancelAnimationFrame(timer);\r\n  }, [nodeData.name]);\r\n\r\n  // è‡ªåŠ¨èšç„¦å’Œè°ƒæ•´é«˜åº¦\r\n  useEffect(() => {\r\n    if (isEditing && inputRef.current) {\r\n      // ... (existing code, no change needed here usually)\r\n      const textarea = inputRef.current;\r\n      textarea.focus();\r\n      // ...\r\n      const handleNativeKeyDown = (e: KeyboardEvent) => {\r\n        // ...\r\n      };\r\n\r\n      textarea.addEventListener('keydown', handleNativeKeyDown, true);\r\n\r\n      return () => {\r\n        textarea.removeEventListener('keydown', handleNativeKeyDown, true);\r\n      };\r\n    }\r\n  }, [isEditing, originalValue, nodeData.name, id, setNodes]);\r\n\r\n  // æ¸…ç†åŠ¨ç”»å¸§\r\n  useEffect(() => {\r\n    return () => {\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      if (edgeUpdateFrameRef.current !== null) {\r\n        cancelAnimationFrame(edgeUpdateFrameRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const getNodeClassName = () => {\r\n    const baseClass = 'custom-flow-node';\r\n    const typeClass = `node-${nodeData.type}`;\r\n    const expandableClass = nodeData.expandable ? 'expandable' : '';\r\n    const selectedClass = selected ? 'selected' : '';\r\n    // å¦‚æœè®¾ç½®äº†è‡ªå®šä¹‰èƒŒæ™¯è‰²ï¼Œæ·»åŠ ä¸€ä¸ªç±»åä»¥è¦†ç›–é»˜è®¤èƒŒæ™¯\r\n    const customBgClass = backgroundColor ? 'has-custom-bg' : '';\r\n    // å¦‚æœæœ‰ç¼©ç•¥å›¾ï¼Œæ·»åŠ ä¸€ä¸ªç±»å\r\n    const hasScreenshotsClass = hasScreenshots ? 'has-screenshots' : '';\r\n\r\n    // ç»ˆæ­¢èŠ‚ç‚¹æ ¹æ®åç§°æˆ– subType åˆ¤æ–­æ˜¯å¼€å§‹è¿˜æ˜¯ç»“æŸ\r\n    let subTypeClass = '';\r\n    if (nodeData.type === 'terminator') {\r\n      if (nodeData.subType === 'start') {\r\n        subTypeClass = 'start';\r\n      } else if (nodeData.subType === 'end') {\r\n        subTypeClass = 'end';\r\n      } else if (nodeData.name === 'å¼€å§‹' || nodeData.name.toLowerCase().includes('start')) {\r\n        subTypeClass = 'start';\r\n      } else {\r\n        subTypeClass = 'end';\r\n      }\r\n    }\r\n\r\n    return `${baseClass} ${typeClass} ${subTypeClass} ${expandableClass} ${selectedClass} ${customBgClass} ${hasScreenshotsClass}`.trim();\r\n  };\r\n\r\n  const mergedStyle = {\r\n    ...nodeStyle,\r\n    ...(backgroundColor ? { backgroundColor } : {}),\r\n  };\r\n\r\n  // Handle æ ·å¼ä¼˜åŒ–ï¼šç™½è‰²å¡«å……ï¼Œæ·±è‰²è¾¹æ¡†ï¼Œç¨å¾®å¤§ä¸€ç‚¹\r\n  // source handle çš„ z-index æ›´é«˜ï¼Œç¡®ä¿åœ¨æ‹–æ‹½æ—¶ä¼˜å…ˆè¢«è¯†åˆ«\r\n  const sourceHandleStyle = {\r\n    width: 10,\r\n    height: 10,\r\n    background: '#fff',\r\n    border: '2px solid #64748b',\r\n    zIndex: 11, // source handle çš„ z-index æ›´é«˜\r\n  };\r\n\r\n  const targetHandleStyle = {\r\n    width: 10,\r\n    height: 10,\r\n    background: '#fff',\r\n    border: '2px solid #64748b',\r\n    zIndex: 10, // target handle çš„ z-index ç¨ä½\r\n  };\r\n\r\n  // åŒå‡»å¼€å§‹ç¼–è¾‘\r\n  const handleDoubleClick = (e: React.MouseEvent) => {\r\n    e.stopPropagation(); // é˜²æ­¢è§¦å‘ç”»å¸ƒçš„åŒå‡»äº‹ä»¶\r\n    setOriginalValue(nodeData.name); // ä¿å­˜ç¼–è¾‘å‰çš„åŸå§‹å€¼\r\n    setEditValue(nodeData.name); // é‡ç½®ç¼–è¾‘å€¼ä¸ºå½“å‰å€¼\r\n    setIsEditing(true);\r\n  };\r\n\r\n  // æäº¤ç¼–è¾‘\r\n  const handleSubmit = useCallback(() => {\r\n    setIsEditing(false);\r\n    if (editValue.trim() !== nodeData.name) {\r\n      setNodes((nodes) =>\r\n        nodes.map((node) => {\r\n          if (node.id === id) {\r\n            return {\r\n              ...node,\r\n              data: { ...node.data, name: editValue },\r\n            };\r\n          }\r\n          return node;\r\n        }),\r\n      );\r\n    }\r\n  }, [id, editValue, nodeData.name, setNodes]);\r\n\r\n  // å¤„ç†æ–‡æœ¬å˜åŒ–æ—¶è‡ªåŠ¨è°ƒæ•´é«˜åº¦\r\n  const handleTextareaChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setEditValue(e.target.value);\r\n    // è‡ªåŠ¨è°ƒæ•´ textarea é«˜åº¦ä»¥é€‚åº”å†…å®¹\r\n    const textarea = e.target;\r\n    textarea.style.height = 'auto';\r\n    textarea.style.height = `${Math.min(textarea.scrollHeight, 200)}px`;\r\n  }, []);\r\n\r\n  // é”®ç›˜äº‹ä»¶å¤„ç†å·²ç»ç§»åˆ°åŸç”Ÿäº‹ä»¶ç›‘å¬å™¨ä¸­ï¼Œè¿™é‡Œä¸éœ€è¦äº†\r\n\r\n  // æ£€æŸ¥æ˜¯å¦æœ‰ç¼©ç•¥å›¾\r\n  const hasScreenshots =\r\n    nodeData.detailConfig?.screenshots && nodeData.detailConfig.screenshots.length > 0;\r\n\r\n  // æ¸²æŸ“å†…å®¹åŒºåŸŸï¼ˆæ–‡æœ¬æˆ–è¾“å…¥æ¡†ï¼‰\r\n  const renderContent = () => (\r\n    <div className=\"node-content\" onDoubleClick={handleDoubleClick}>\r\n      {/* ç¼©ç•¥å›¾æ ‡è¯†å›¾æ ‡ */}\r\n      {hasScreenshots && (\r\n        <span className=\"node-screenshot-icon\" title=\"è¯¥èŠ‚ç‚¹åŒ…å«ç¼©ç•¥å›¾\">\r\n          ğŸ–¼ï¸\r\n        </span>\r\n      )}\r\n      {/* ä»…åœ¨é€‰ä¸­æ—¶æ˜¾ç¤ºè°ƒæ•´å¤§å°æ§åˆ¶å™¨ */}\r\n      <NodeResizer\r\n        color=\"#3b82f6\"\r\n        isVisible={selected}\r\n        minWidth={100}\r\n        minHeight={40}\r\n        // å¢å¤§æ§åˆ¶æ‰‹æŸ„å¤§å°ï¼Œä½¿å…¶æ›´å®¹æ˜“ç‚¹å‡»\r\n        handleStyle={{ width: 12, height: 12, borderRadius: '50%', border: '1px solid #fff' }}\r\n        lineStyle={{ borderWidth: 1, borderStyle: 'dashed' }}\r\n        onResize={(_, params) => {\r\n          const { width, height } = params;\r\n          // 1. æ›´æ–°èŠ‚ç‚¹æ ·å¼\r\n          setNodes((nodes) =>\r\n            nodes.map((node) => {\r\n              if (node.id === id) {\r\n                return {\r\n                  ...node,\r\n                  style: {\r\n                    ...node.style,\r\n                    width,\r\n                    height,\r\n                  },\r\n                };\r\n              }\r\n              return node;\r\n            }),\r\n          );\r\n\r\n          // 2. å…³é”®ï¼šé€šçŸ¥ React Flow æ›´æ–°èŠ‚ç‚¹å†…éƒ¨çŠ¶æ€ï¼ˆåŒ…æ‹¬ Handle ä½ç½®ï¼‰ï¼Œä»è€Œæ›´æ–°è¿çº¿\r\n          updateNodeInternals(id);\r\n        }}\r\n        onResizeEnd={(_, params) => {\r\n          const { width, height } = params;\r\n          // ç¡®ä¿æœ€ç»ˆçŠ¶æ€è¢«ä¿å­˜\r\n          setNodes((nodes) =>\r\n            nodes.map((node) => {\r\n              if (node.id === id) {\r\n                return {\r\n                  ...node,\r\n                  style: {\r\n                    ...node.style,\r\n                    width,\r\n                    height,\r\n                  },\r\n                };\r\n              }\r\n              return node;\r\n            }),\r\n          );\r\n          // å†æ¬¡æ›´æ–°ä»¥ç¡®ä¿æœ€ç»ˆä½ç½®æ­£ç¡®\r\n          updateNodeInternals(id);\r\n        }}\r\n      />\r\n      {nodeData.type === 'decision' ? (\r\n        <div className=\"diamond-shape\">\r\n          {/* SVG è±å½¢èƒŒæ™¯ */}\r\n          <svg\r\n            style={{\r\n              position: 'absolute',\r\n              top: 0,\r\n              left: 0,\r\n              width: '100%',\r\n              height: '100%',\r\n              zIndex: 0,\r\n              overflow: 'hidden',\r\n              filter:\r\n                'drop-shadow(0 4px 6px -1px rgba(0, 0, 0, 0.1)) drop-shadow(0 2px 4px -1px rgba(0, 0, 0, 0.06))',\r\n            }}\r\n            viewBox=\"0 0 100 100\"\r\n            preserveAspectRatio=\"none\"\r\n          >\r\n            <defs>\r\n              <linearGradient id={`decisionGradient-${id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                <stop offset=\"0%\" stopColor=\"#FFFFFF\" />\r\n                <stop offset=\"100%\" stopColor=\"#FFFFFF\" />\r\n              </linearGradient>\r\n            </defs>\r\n            <polygon\r\n              points=\"50,0 100,50 50,100 0,50\"\r\n              fill={backgroundColor || `url(#decisionGradient-${id})`}\r\n              stroke={(nodeStyle?.borderColor as string) || '#cbd5e1'}\r\n              strokeWidth={nodeStyle?.borderWidth ? `${nodeStyle.borderWidth}px` : '1px'}\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n          </svg>\r\n          {isEditing ? (\r\n            <textarea\r\n              ref={inputRef}\r\n              className=\"node-label-input nodrag\"\r\n              style={{\r\n                ...(fontSize ? { fontSize } : {}),\r\n                ...(fontColor ? { color: fontColor } : {}),\r\n                ...(fontFamily ? { fontFamily } : {}),\r\n                ...(fontWeight\r\n                  ? { fontWeight: fontWeight as React.CSSProperties['fontWeight'] }\r\n                  : {}),\r\n              }}\r\n              value={editValue}\r\n              onChange={handleTextareaChange}\r\n              onBlur={handleSubmit}\r\n              onClick={(e) => e.stopPropagation()}\r\n              rows={1}\r\n            />\r\n          ) : (\r\n            <span\r\n              className={`node-label ${hasScreenshots ? 'has-screenshots-label' : ''}`}\r\n              style={{\r\n                ...(fontSize ? { fontSize } : {}),\r\n                ...(fontColor ? { color: fontColor } : {}),\r\n                ...(fontFamily ? { fontFamily } : {}),\r\n                ...(fontWeight\r\n                  ? { fontWeight: fontWeight as React.CSSProperties['fontWeight'] }\r\n                  : {}),\r\n              }}\r\n            >\r\n              {nodeData.name}\r\n            </span>\r\n          )}\r\n        </div>\r\n      ) : nodeData.type === 'data' ? (\r\n        <div className=\"data-shape\">\r\n          {/* æ•°æ®èŠ‚ç‚¹ï¼šå¸¦ä¸¤æ¡å‚ç›´åˆ†å‰²çº¿çš„çŸ©å½¢ */}\r\n          <svg\r\n            style={{\r\n              position: 'absolute',\r\n              top: 0,\r\n              left: 0,\r\n              width: '100%',\r\n              height: '100%',\r\n              zIndex: 0,\r\n              overflow: 'hidden',\r\n              filter:\r\n                'drop-shadow(0 4px 6px -1px rgba(0, 0, 0, 0.1)) drop-shadow(0 2px 4px -1px rgba(0, 0, 0, 0.06))',\r\n            }}\r\n            viewBox=\"0 0 100 100\"\r\n            preserveAspectRatio=\"none\"\r\n          >\r\n            <defs>\r\n              {/* æ•°æ®èŠ‚ç‚¹æ¸å˜èƒŒæ™¯ï¼Œä¸æµç¨‹èŠ‚ç‚¹é£æ ¼ä¸€è‡´ */}\r\n              <linearGradient id={`dataGradient-${id}`} x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n                <stop offset=\"0%\" stopColor=\"#ffffff\" />\r\n                <stop offset=\"100%\" stopColor=\"#ffffff\" />\r\n              </linearGradient>\r\n            </defs>\r\n            {/* å¤–æ¡†çŸ©å½¢ - ä½¿ç”¨åœ†è§’ï¼Œä¸æµç¨‹èŠ‚ç‚¹ä¸€è‡´ï¼Œå®Œå…¨å¡«å…… viewBox */}\r\n            <rect\r\n              x=\"0\"\r\n              y=\"0\"\r\n              width=\"100\"\r\n              height=\"100\"\r\n              rx=\"8\"\r\n              ry=\"8\"\r\n              fill={backgroundColor || `url(#dataGradient-${id})`}\r\n              stroke={(nodeStyle?.borderColor as string) || '#cbd5e1'}\r\n              strokeWidth={nodeStyle?.borderWidth ? `${nodeStyle.borderWidth}px` : '1px'}\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            />\r\n            {/* å·¦ä¾§å‚ç›´åˆ†å‰²çº¿ - ä½¿ç”¨æµ…ç°è‰²ï¼Œä¸è¾¹æ¡†é¢œè‰²ä¸€è‡´ */}\r\n            <line\r\n              x1=\"15\"\r\n              y1=\"0\"\r\n              x2=\"15\"\r\n              y2=\"100\"\r\n              stroke=\"#cbd5e1\"\r\n              strokeWidth=\"1\"\r\n              strokeLinecap=\"round\"\r\n            />\r\n            {/* å³ä¾§å‚ç›´åˆ†å‰²çº¿ - ä½¿ç”¨æµ…ç°è‰²ï¼Œä¸è¾¹æ¡†é¢œè‰²ä¸€è‡´ */}\r\n            <line\r\n              x1=\"85\"\r\n              y1=\"0\"\r\n              x2=\"85\"\r\n              y2=\"100\"\r\n              stroke=\"#cbd5e1\"\r\n              strokeWidth=\"1\"\r\n              strokeLinecap=\"round\"\r\n            />\r\n          </svg>\r\n          {isEditing ? (\r\n            <textarea\r\n              ref={inputRef}\r\n              className=\"node-label-input nodrag\"\r\n              style={{\r\n                ...(fontSize ? { fontSize } : {}),\r\n                ...(fontColor ? { color: fontColor } : {}),\r\n                ...(fontFamily ? { fontFamily } : {}),\r\n                ...(fontWeight\r\n                  ? { fontWeight: fontWeight as React.CSSProperties['fontWeight'] }\r\n                  : {}),\r\n              }}\r\n              value={editValue}\r\n              onChange={handleTextareaChange}\r\n              onBlur={handleSubmit}\r\n              onClick={(e) => e.stopPropagation()}\r\n              rows={1}\r\n            />\r\n          ) : (\r\n            <span\r\n              className={`node-label ${hasScreenshots ? 'has-screenshots-label' : ''}`}\r\n              style={{\r\n                ...(fontSize ? { fontSize } : {}),\r\n                ...(fontColor ? { color: fontColor } : {}),\r\n                ...(fontFamily ? { fontFamily } : {}),\r\n                ...(fontWeight\r\n                  ? { fontWeight: fontWeight as React.CSSProperties['fontWeight'] }\r\n                  : {}),\r\n              }}\r\n            >\r\n              {nodeData.name}\r\n            </span>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <>\r\n          {isEditing ? (\r\n            <textarea\r\n              ref={inputRef}\r\n              className=\"node-label-input nodrag\"\r\n              style={{\r\n                ...(fontSize ? { fontSize } : {}),\r\n                ...(fontColor ? { color: fontColor } : {}),\r\n                ...(fontFamily ? { fontFamily } : {}),\r\n                ...(fontWeight\r\n                  ? { fontWeight: fontWeight as React.CSSProperties['fontWeight'] }\r\n                  : {}),\r\n              }}\r\n              value={editValue}\r\n              onChange={handleTextareaChange}\r\n              onBlur={handleSubmit}\r\n              onClick={(e) => e.stopPropagation()}\r\n              rows={1}\r\n            />\r\n          ) : (\r\n            <span\r\n              className={`node-label ${hasScreenshots ? 'has-screenshots-label' : ''}`}\r\n              style={{\r\n                ...(fontSize ? { fontSize } : {}),\r\n                ...(fontColor ? { color: fontColor } : {}),\r\n                ...(fontFamily ? { fontFamily } : {}),\r\n                ...(fontWeight\r\n                  ? { fontWeight: fontWeight as React.CSSProperties['fontWeight'] }\r\n                  : {}),\r\n              }}\r\n            >\r\n              {nodeData.name}\r\n            </span>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  // åˆ¤æ–­èŠ‚ç‚¹éœ€è¦ç‰¹æ®Šå¤„ç†\r\n  // åˆ¤æ–­èŠ‚ç‚¹çš„å¤–å±‚å®¹å™¨åº”è¯¥ä¿æŒé€æ˜ï¼Œåªæœ‰SVGçš„fillä¼šæ”¹å˜\r\n  if (nodeData.type === 'decision') {\r\n    // å¯¹äºåˆ¤æ–­èŠ‚ç‚¹ï¼Œä¸åº”ç”¨èƒŒæ™¯è‰²åˆ°å®¹å™¨ï¼Œåªåº”ç”¨åˆ°SVG\r\n    const decisionStyle = nodeStyle ? { ...nodeStyle } : {};\r\n    // ç§»é™¤èƒŒæ™¯è‰²ç›¸å…³å±æ€§ï¼Œä¿æŒå®¹å™¨é€æ˜\r\n    delete decisionStyle.background;\r\n    delete decisionStyle.backgroundColor;\r\n    // è¾¹æ¡†é¢œè‰²å’Œç²—ç»†ä¼šåº”ç”¨åˆ°SVGçš„strokeä¸Šï¼Œä¸éœ€è¦åœ¨å®¹å™¨ä¸Šåº”ç”¨\r\n\r\n    return (\r\n      <div className={getNodeClassName()} style={decisionStyle}>\r\n        {/* Top - å®šä½åˆ°é¡¶éƒ¨é¡¶ç‚¹ */}\r\n        {/* source handle åœ¨å‰ï¼Œç¡®ä¿åœ¨æ‹–æ‹½æ—¶ä¼˜å…ˆè¢«è¯†åˆ« */}\r\n        <Handle id=\"top-source\" type=\"source\" position={Position.Top} style={sourceHandleStyle} />\r\n        <Handle id=\"top-target\" type=\"target\" position={Position.Top} style={targetHandleStyle} />\r\n        {/* Right - å®šä½åˆ°å³ä¾§é¡¶ç‚¹ */}\r\n        <Handle id=\"right\" type=\"source\" position={Position.Right} style={sourceHandleStyle} />\r\n        <Handle\r\n          id=\"right-target\"\r\n          type=\"target\"\r\n          position={Position.Right}\r\n          style={targetHandleStyle}\r\n        />\r\n        {/* Bottom - å®šä½åˆ°åº•éƒ¨é¡¶ç‚¹ */}\r\n        <Handle id=\"bottom\" type=\"source\" position={Position.Bottom} style={sourceHandleStyle} />\r\n        <Handle\r\n          id=\"bottom-target\"\r\n          type=\"target\"\r\n          position={Position.Bottom}\r\n          style={targetHandleStyle}\r\n        />\r\n        {/* Left - å®šä½åˆ°å·¦ä¾§é¡¶ç‚¹ */}\r\n        <Handle id=\"left\" type=\"source\" position={Position.Left} style={sourceHandleStyle} />\r\n        <Handle id=\"left-target\" type=\"target\" position={Position.Left} style={targetHandleStyle} />\r\n\r\n        {renderContent()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // æ•°æ®èŠ‚ç‚¹éœ€è¦ç‰¹æ®Šå¤„ç†\r\n  // æ•°æ®èŠ‚ç‚¹çš„å¤–å±‚å®¹å™¨åº”è¯¥ä¿æŒé€æ˜ï¼Œåªæœ‰SVGçš„fillå’Œçº¿æ¡ä¼šæ˜¾ç¤º\r\n  if (nodeData.type === 'data') {\r\n    // å¯¹äºæ•°æ®èŠ‚ç‚¹ï¼Œä¸åº”ç”¨èƒŒæ™¯è‰²åˆ°å®¹å™¨ï¼Œåªåº”ç”¨åˆ°SVG\r\n    const dataStyle = nodeStyle ? { ...nodeStyle } : {};\r\n    // ç§»é™¤èƒŒæ™¯è‰²ç›¸å…³å±æ€§ï¼Œä¿æŒå®¹å™¨é€æ˜\r\n    delete dataStyle.background;\r\n    delete dataStyle.backgroundColor;\r\n    // è¾¹æ¡†é¢œè‰²å’Œç²—ç»†ä¼šåº”ç”¨åˆ°SVGçš„strokeä¸Šï¼Œä¸éœ€è¦åœ¨å®¹å™¨ä¸Šåº”ç”¨\r\n\r\n    return (\r\n      <div className={getNodeClassName()} style={dataStyle}>\r\n        {/* Top */}\r\n        <Handle id=\"top-source\" type=\"source\" position={Position.Top} style={sourceHandleStyle} />\r\n        <Handle id=\"top-target\" type=\"target\" position={Position.Top} style={targetHandleStyle} />\r\n        {/* Left */}\r\n        <Handle id=\"left\" type=\"source\" position={Position.Left} style={sourceHandleStyle} />\r\n        <Handle id=\"left-target\" type=\"target\" position={Position.Left} style={targetHandleStyle} />\r\n        {/* Right */}\r\n        <Handle id=\"right\" type=\"source\" position={Position.Right} style={sourceHandleStyle} />\r\n        <Handle\r\n          id=\"right-target\"\r\n          type=\"target\"\r\n          position={Position.Right}\r\n          style={targetHandleStyle}\r\n        />\r\n\r\n        {renderContent()}\r\n\r\n        {/* Bottom */}\r\n        <Handle id=\"bottom\" type=\"source\" position={Position.Bottom} style={sourceHandleStyle} />\r\n        <Handle\r\n          id=\"bottom-target\"\r\n          type=\"target\"\r\n          position={Position.Bottom}\r\n          style={targetHandleStyle}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // å¤„ç†èŠ‚ç‚¹å’Œç»ˆæ­¢èŠ‚ç‚¹\r\n  return (\r\n    <div className={getNodeClassName()} style={mergedStyle}>\r\n      {/* Top */}\r\n      {/* source handle åœ¨å‰ï¼Œç¡®ä¿åœ¨æ‹–æ‹½æ—¶ä¼˜å…ˆè¢«è¯†åˆ« */}\r\n      <Handle id=\"top-source\" type=\"source\" position={Position.Top} style={sourceHandleStyle} />\r\n      <Handle id=\"top-target\" type=\"target\" position={Position.Top} style={targetHandleStyle} />\r\n      {/* Left */}\r\n      <Handle id=\"left\" type=\"source\" position={Position.Left} style={sourceHandleStyle} />\r\n      <Handle id=\"left-target\" type=\"target\" position={Position.Left} style={targetHandleStyle} />\r\n      {/* Right */}\r\n      <Handle id=\"right\" type=\"source\" position={Position.Right} style={sourceHandleStyle} />\r\n      <Handle id=\"right-target\" type=\"target\" position={Position.Right} style={targetHandleStyle} />\r\n\r\n      {renderContent()}\r\n\r\n      {/* Bottom */}\r\n      <Handle id=\"bottom\" type=\"source\" position={Position.Bottom} style={sourceHandleStyle} />\r\n      <Handle\r\n        id=\"bottom-target\"\r\n        type=\"target\"\r\n        position={Position.Bottom}\r\n        style={targetHandleStyle}\r\n      />\r\n    </div>\r\n  );\r\n});\r\n\r\nCustomNode.displayName = 'CustomNode';\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\DraggableEdge\\index.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'isDragging' is assigned a value but never used.",
        "line": 268,
        "column": 10,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 268,
        "endColumn": 20
      }
    ],
    "suppressedMessages": [
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\DraggableEdge\\index.tsx:42:5\n  40 |   useEffect(() => {\n  41 |     // eslint-disable-next-line react-hooks/set-state-in-effect\n> 42 |     setIsSelected(fullEdge?.selected || false);\n     |     ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |   }, [fullEdge?.selected]);\n  44 |\n  45 |   // ...",
        "line": 42,
        "column": 5,
        "nodeType": null,
        "endLine": 42,
        "endColumn": 18,
        "suppressions": [
          {
            "kind": "directive",
            "justification": ""
          }
        ]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useCallback, useRef, useState, useMemo, useEffect } from 'react';\r\nimport {\r\n  BaseEdge,\r\n  EdgeLabelRenderer,\r\n  EdgeProps,\r\n  getSmoothStepPath,\r\n  getStraightPath,\r\n  useReactFlow,\r\n  Position,\r\n} from '@xyflow/react';\r\nimport './styles.css';\r\n\r\n// è¿™ä¸ªç»„ä»¶å°†æ›¿ä»£é»˜è®¤çš„ Edge\r\nexport default function DraggableEdge({\r\n  id,\r\n  sourceX,\r\n  sourceY,\r\n  targetX,\r\n  targetY,\r\n  sourcePosition,\r\n  targetPosition,\r\n  style = {},\r\n  markerEnd,\r\n  markerStart, // æ¥æ”¶ markerStart\r\n  data,\r\n  label,\r\n  labelStyle,\r\n  labelBgStyle,\r\n}: EdgeProps) {\r\n  const { setEdges, getZoom, getEdge } = useReactFlow();\r\n  const [isHovered, setIsHovered] = useState(false);\r\n  const [isSelected, setIsSelected] = useState(false);\r\n\r\n  // ä» React Flow è·å–å®Œæ•´çš„ edge å¯¹è±¡ï¼Œç¡®ä¿è·å–åˆ° labelStyle å’Œ labelBgStyle\r\n  // React Flow å¯èƒ½ä¸ä¼šè‡ªåŠ¨å°† labelStyle å’Œ labelBgStyle ä½œä¸º props ä¼ é€’\r\n  // æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è·å–æœ€æ–°çš„ edge å¯¹è±¡\r\n  const fullEdge = getEdge(id);\r\n\r\n  // æ£€æŸ¥å½“å‰ edge æ˜¯å¦è¢«é€‰ä¸­ - ä½¿ç”¨ fullEdge çš„ selected å±æ€§\r\n  useEffect(() => {\r\n    // eslint-disable-next-line react-hooks/set-state-in-effect\r\n    setIsSelected(fullEdge?.selected || false);\r\n  }, [fullEdge?.selected]);\r\n\r\n  // ...\r\n\r\n\r\n\r\n  // ä» data ä¸­è¯»å–åç§»é‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™é»˜è®¤ä¸º 0\r\n  const offset = (data?.offset as number) || 0;\r\n\r\n\r\n  // è®¡ç®—ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å®é™…è·ç¦»\r\n  const dx = Math.abs(targetX - sourceX);\r\n  const dy = Math.abs(targetY - sourceY);\r\n  const distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n  // æ ¹æ®è·ç¦»åŠ¨æ€è®¡ç®—è·¯å¾„ï¼Œé¿å…èŠ‚ç‚¹è·ç¦»è¿‡è¿‘æ—¶è·¯å¾„é‡å \r\n  // è·¯å¾„æ­£å¸¸ä» source åˆ° targetï¼ŒmarkerEnd ä¼šåœ¨è·¯å¾„ç»ˆç‚¹ï¼ˆtarget ä½ç½®ï¼‰ï¼ŒmarkerStart ä¼šåœ¨è·¯å¾„èµ·ç‚¹ï¼ˆsource ä½ç½®ï¼‰\r\n  const { edgePath, labelX, labelY } = useMemo(() => {\r\n    // å¦‚æœè·ç¦»éå¸¸è¿‘ï¼ˆå°äº 30pxï¼‰ï¼Œä½¿ç”¨ç›´çº¿è·¯å¾„\r\n    if (distance < 30) {\r\n      const [path, labelX, labelY] = getStraightPath({\r\n        sourceX: sourceX,\r\n        sourceY: sourceY,\r\n        targetX: targetX,\r\n        targetY: targetY,\r\n      });\r\n      return { edgePath: path, labelX, labelY };\r\n    }\r\n\r\n    // æ ¹æ®è·ç¦»åŠ¨æ€è°ƒæ•´ offset\r\n    let dynamicOffset = 20 + offset;\r\n    if (distance < 50) {\r\n      // è·ç¦»è¾ƒè¿‘ï¼Œå‡å° offsetï¼Œé¿å…è·¯å¾„é‡å \r\n      dynamicOffset = Math.max(5, Math.min(distance / 2.5, 20 + offset));\r\n    }\r\n\r\n    // ä½¿ç”¨å¹³æ»‘è·¯å¾„\r\n    const [path, labelX, labelY] = getSmoothStepPath({\r\n      sourceX: sourceX, // ä» source å¼€å§‹\r\n      sourceY: sourceY,\r\n      sourcePosition: sourcePosition,\r\n      targetX: targetX, // åˆ° target ç»“æŸ\r\n      targetY: targetY,\r\n      targetPosition: targetPosition,\r\n      borderRadius: 0,\r\n      offset: dynamicOffset,\r\n    });\r\n    return { edgePath: path, labelX, labelY };\r\n  }, [sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition, offset, distance]);\r\n\r\n  // ç›´æ¥ä» fullEdge è¯»å–æ ·å¼ï¼Œç¡®ä¿è·å–æœ€æ–°å€¼\r\n  // ä¼˜å…ˆä½¿ç”¨ propsï¼Œç„¶åä½¿ç”¨ edge å¯¹è±¡ä¸­çš„å€¼\r\n  const currentLabelStyle = labelStyle || fullEdge?.labelStyle;\r\n  const currentLabelBgStyle = labelBgStyle || fullEdge?.labelBgStyle;\r\n\r\n  // è®¡ç®—èƒŒæ™¯é€æ˜åº¦ï¼šä» labelBgStyle.fillOpacity è¯»å–\r\n  const bgOpacity =\r\n    typeof currentLabelBgStyle?.fillOpacity === 'number' ? currentLabelBgStyle.fillOpacity : 1; // é»˜è®¤å®Œå…¨ä¸é€æ˜\r\n\r\n  // å°†åå…­è¿›åˆ¶é¢œè‰²è½¬æ¢ä¸º rgba æ ¼å¼ï¼Œåº”ç”¨é€æ˜åº¦\r\n  const hexToRgba = (hex: string, opacity: number): string => {\r\n    // ç§»é™¤ # å·\r\n    const cleanHex = hex.replace('#', '');\r\n    // è§£æ RGB å€¼\r\n    const r = parseInt(cleanHex.substring(0, 2), 16);\r\n    const g = parseInt(cleanHex.substring(2, 4), 16);\r\n    const b = parseInt(cleanHex.substring(4, 6), 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${opacity})`;\r\n  };\r\n\r\n  // è·å–èƒŒæ™¯è‰²\r\n  const bgColor = (currentLabelBgStyle?.fill ||\r\n    currentLabelStyle?.background ||\r\n    '#E0E0E0') as string;\r\n  // å°†èƒŒæ™¯è‰²è½¬æ¢ä¸º rgba æ ¼å¼ï¼Œåº”ç”¨é€æ˜åº¦\r\n  const backgroundColorWithOpacity = bgColor.startsWith('#')\r\n    ? hexToRgba(bgColor, bgOpacity)\r\n    : bgColor; // å¦‚æœå·²ç»æ˜¯ rgba æ ¼å¼ï¼Œç›´æ¥ä½¿ç”¨\r\n\r\n  // è¯»å–èƒŒæ™¯å¤§å°\r\n  const bgWidth = currentLabelBgStyle?.width;\r\n  const bgHeight = currentLabelBgStyle?.height;\r\n  // è¯»å–æ˜¯å¦ä¸ºè‡ªåŠ¨æ¨¡å¼ï¼ˆå¦‚æœæ ‡è®°å­˜åœ¨ä¸”ä¸º trueï¼Œåˆ™ä¸ºè‡ªåŠ¨æ¨¡å¼ï¼‰\r\n  const widthAuto = currentLabelBgStyle?.widthAuto === true;\r\n  const heightAuto = currentLabelBgStyle?.heightAuto === true;\r\n\r\n  // è§£æ padding å€¼ï¼Œè®¡ç®—å¯ç”¨ç©ºé—´\r\n  const parsePadding = (\r\n    paddingStr: string,\r\n  ): { top: number; right: number; bottom: number; left: number } => {\r\n    // é»˜è®¤ padding: '6px 12px' (ä¸Šä¸‹ 6px, å·¦å³ 12px)\r\n    const parts = paddingStr.trim().split(/\\s+/);\r\n    if (parts.length === 2) {\r\n      // '6px 12px' -> ä¸Šä¸‹ 6px, å·¦å³ 12px\r\n      const vertical = parseFloat(parts[0]) || 6;\r\n      const horizontal = parseFloat(parts[1]) || 12;\r\n      return { top: vertical, right: horizontal, bottom: vertical, left: horizontal };\r\n    } else if (parts.length === 4) {\r\n      // '6px 12px 6px 12px' -> ä¸Š å³ ä¸‹ å·¦\r\n      return {\r\n        top: parseFloat(parts[0]) || 6,\r\n        right: parseFloat(parts[1]) || 12,\r\n        bottom: parseFloat(parts[2]) || 6,\r\n        left: parseFloat(parts[3]) || 12,\r\n      };\r\n    }\r\n    // é»˜è®¤å€¼\r\n    return { top: 6, right: 12, bottom: 6, left: 12 };\r\n  };\r\n\r\n  const paddingStr = (currentLabelStyle?.padding || '6px 12px') as string;\r\n  const padding = parsePadding(paddingStr);\r\n\r\n  // è·å–åŸå§‹å­—ä½“å¤§å°\r\n  const originalFontSize =\r\n    typeof currentLabelStyle?.fontSize === 'number'\r\n      ? currentLabelStyle.fontSize\r\n      : typeof currentLabelStyle?.fontSize === 'string'\r\n        ? parseFloat(currentLabelStyle.fontSize) || 9\r\n        : 9;\r\n\r\n  // è®¡ç®—åŠ¨æ€å­—ä½“å¤§å°ï¼ˆåªæœ‰å½“ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®èƒŒæ™¯å¤§å°æ—¶æ‰çº¦æŸå­—ä½“å¤§å°ï¼‰\r\n  // å¦‚æœæ˜¯ auto æ¨¡å¼ï¼ŒèƒŒæ™¯ä¼šè‡ªåŠ¨é€‚åº”å­—ä½“å¤§å°ï¼Œä¸éœ€è¦çº¦æŸå­—ä½“\r\n  let calculatedFontSize = originalFontSize;\r\n  const MIN_FONT_SIZE = 6; // æœ€å°å­—ä½“å¤§å°\r\n\r\n  // åªæœ‰å½“å®½åº¦æˆ–é«˜åº¦æ˜¯æ‰‹åŠ¨è®¾ç½®çš„ï¼ˆé auto æ¨¡å¼ï¼‰æ—¶ï¼Œæ‰è¿›è¡Œå­—ä½“å¤§å°çº¦æŸ\r\n  const hasManualWidth = bgWidth !== undefined && !widthAuto;\r\n  const hasManualHeight = bgHeight !== undefined && !heightAuto;\r\n\r\n  if (hasManualWidth || hasManualHeight) {\r\n    // è®¡ç®—å¯ç”¨ç©ºé—´ï¼ˆåªå¯¹æ‰‹åŠ¨è®¾ç½®çš„ç»´åº¦è¿›è¡Œçº¦æŸï¼‰\r\n    const availableWidth = hasManualWidth\r\n      ? (typeof bgWidth === 'number' ? bgWidth : parseFloat(String(bgWidth))) -\r\n      padding.left -\r\n      padding.right\r\n      : Infinity;\r\n    const availableHeight = hasManualHeight\r\n      ? (typeof bgHeight === 'number' ? bgHeight : parseFloat(String(bgHeight))) -\r\n      padding.top -\r\n      padding.bottom\r\n      : Infinity;\r\n\r\n    // æ ¹æ®æ–‡å­—é•¿åº¦ä¼°ç®—æ‰€éœ€å®½åº¦ï¼ˆä¸­æ–‡å­—ç¬¦çº¦ç­‰äºå­—ä½“å¤§å°çš„ 1.2 å€ï¼Œè‹±æ–‡å­—ç¬¦çº¦ç­‰äºå­—ä½“å¤§å°çš„ 0.6 å€ï¼‰\r\n    const labelText = typeof label === 'string' ? label : '';\r\n    const chineseCharCount = (labelText.match(/[\\u4e00-\\u9fa5]/g) || []).length;\r\n    const englishCharCount = labelText.length - chineseCharCount;\r\n\r\n    // ä¼°ç®—æ¯ä¸ªå­—ç¬¦çš„å¹³å‡å®½åº¦ï¼ˆåŸºäºåŸå§‹å­—ä½“å¤§å°ï¼‰\r\n    const avgCharWidthRatio =\r\n      chineseCharCount > 0\r\n        ? (chineseCharCount * 1.2 + englishCharCount * 0.6) / labelText.length\r\n        : 0.6;\r\n\r\n    // æ ¹æ®å®½åº¦è®¡ç®—å­—ä½“å¤§å°ï¼ˆåªå¯¹æ‰‹åŠ¨è®¾ç½®å®½åº¦æ—¶è®¡ç®—ï¼‰\r\n    let fontSizeByWidth = originalFontSize;\r\n    if (hasManualWidth && availableWidth !== Infinity && labelText.length > 0) {\r\n      fontSizeByWidth = availableWidth / (labelText.length * avgCharWidthRatio);\r\n    }\r\n\r\n    // æ ¹æ®é«˜åº¦è®¡ç®—å­—ä½“å¤§å°ï¼ˆåªå¯¹æ‰‹åŠ¨è®¾ç½®é«˜åº¦æ—¶è®¡ç®—ï¼‰\r\n    let fontSizeByHeight = originalFontSize;\r\n    if (hasManualHeight && availableHeight !== Infinity) {\r\n      fontSizeByHeight = availableHeight / 1.2;\r\n    }\r\n\r\n    // å–ä¸¤è€…ä¸­çš„è¾ƒå°å€¼ï¼Œç¡®ä¿æ–‡å­—èƒ½å®Œå…¨æ˜¾ç¤º\r\n    calculatedFontSize = Math.min(fontSizeByWidth, fontSizeByHeight, originalFontSize);\r\n\r\n    // ç¡®ä¿ä¸å°äºæœ€å°å­—ä½“å¤§å°\r\n    calculatedFontSize = Math.max(calculatedFontSize, MIN_FONT_SIZE);\r\n  }\r\n\r\n  // è®¡ç®—æœ€ç»ˆçš„æ ‡ç­¾æ ·å¼\r\n  const labelStyles: React.CSSProperties = {\r\n    color: (currentLabelStyle?.fill || currentLabelStyle?.color || '#000000') as string,\r\n    fontSize: `${calculatedFontSize}px`,\r\n    fontWeight: (() => {\r\n      // è¯»å–å­—ä½“ç²—ç»†ï¼Œå¦‚æœä¸æ˜¯ 300ã€400ã€600ï¼Œåˆ™æ˜ å°„åˆ°æœ€æ¥è¿‘çš„å€¼\r\n      const rawFontWeight =\r\n        typeof currentLabelStyle?.fontWeight === 'number'\r\n          ? currentLabelStyle.fontWeight\r\n          : typeof currentLabelStyle?.fontWeight === 'string'\r\n            ? parseInt(currentLabelStyle.fontWeight) || 300\r\n            : 300;\r\n      // æ˜ å°„åˆ°å…è®¸çš„å€¼ï¼š300ã€400ã€600\r\n      return rawFontWeight <= 350 ? 300 : rawFontWeight <= 500 ? 400 : 600;\r\n    })(),\r\n    fontFamily: (currentLabelStyle?.fontFamily || 'å¾®è½¯é›…é»‘') as string,\r\n    backgroundColor: backgroundColorWithOpacity, // åº”ç”¨é€æ˜åº¦çš„èƒŒæ™¯è‰²\r\n    padding: paddingStr,\r\n    borderRadius:\r\n      typeof currentLabelStyle?.borderRadius === 'number'\r\n        ? `${currentLabelStyle.borderRadius}px`\r\n        : typeof currentLabelStyle?.borderRadius === 'string'\r\n          ? currentLabelStyle.borderRadius.includes('px')\r\n            ? currentLabelStyle.borderRadius\r\n            : `${currentLabelStyle.borderRadius}px`\r\n          : '6px',\r\n    // ç¡®ä¿æ–‡å­—ä¸è¶…å‡ºèƒŒæ™¯\r\n    overflow: 'hidden',\r\n    textOverflow: 'ellipsis',\r\n    whiteSpace: 'nowrap',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  };\r\n\r\n  // å¦‚æœè®¾ç½®äº†èƒŒæ™¯å¤§å°ï¼Œåº”ç”¨åˆ°æ ·å¼\r\n  // ä½¿ç”¨ width å’Œ height è€Œä¸æ˜¯ minWidth/minHeightï¼Œç¡®ä¿è®¾ç½®çš„å€¼èƒ½å¤Ÿç”Ÿæ•ˆ\r\n  if (bgWidth !== undefined) {\r\n    labelStyles.width = typeof bgWidth === 'number' ? `${bgWidth}px` : bgWidth;\r\n    // åŒæ—¶è®¾ç½® box-sizing ä¸º border-boxï¼Œç¡®ä¿ width åŒ…å« padding\r\n    labelStyles.boxSizing = 'border-box';\r\n  }\r\n  if (bgHeight !== undefined) {\r\n    labelStyles.height = typeof bgHeight === 'number' ? `${bgHeight}px` : bgHeight;\r\n    // åŒæ—¶è®¾ç½® box-sizing ä¸º border-boxï¼Œç¡®ä¿ height åŒ…å« padding\r\n    labelStyles.boxSizing = 'border-box';\r\n  }\r\n\r\n  // åˆ¤æ–­è¿çº¿çš„ä¸»è¦æ–¹å‘\r\n  const isHorizontalFlow = sourcePosition === Position.Left || sourcePosition === Position.Right;\r\n\r\n  // æ‹–æ‹½é€»è¾‘ - ä½¿ç”¨ useState æ¥è¿½è¸ªæ‹–æ‹½çŠ¶æ€ä»¥ä¾¿åœ¨æ¸²æŸ“ä¸­ä½¿ç”¨\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const draggingRef = useRef(false);\r\n  const lastPosRef = useRef(0);\r\n\r\n  const onMouseDown = useCallback(\r\n    (evt: React.MouseEvent) => {\r\n      // é˜»æ­¢å†’æ³¡ï¼Œé˜²æ­¢ç”»å¸ƒæ‹–æ‹½\r\n      evt.stopPropagation();\r\n      // é˜»æ­¢é»˜è®¤è¡Œä¸º\r\n      evt.preventDefault();\r\n\r\n      // 1. æ‰‹åŠ¨é€‰ä¸­å½“å‰è¿çº¿ï¼ˆå®ç°ç‚¹å‡»å³é€‰ä¸­ï¼‰\r\n      setEdges((edges) =>\r\n        edges.map((e) => ({\r\n          ...e,\r\n          selected: e.id === id,\r\n        })),\r\n      );\r\n\r\n      // 2. ç«‹å³å¼€å§‹æ‹–æ‹½\r\n      draggingRef.current = true;\r\n      setIsDragging(true); // è§¦å‘é‡æ¸²æŸ“ä»¥æ›´æ–°æ ·å¼\r\n      // è®°å½•åˆå§‹é¼ æ ‡ä½ç½®\r\n      lastPosRef.current = isHorizontalFlow ? evt.clientX : evt.clientY;\r\n\r\n      // æ·»åŠ æ‹–æ‹½ä¸­çš„è§†è§‰åé¦ˆ\r\n      const handleElement = evt.currentTarget as HTMLElement;\r\n      const originalTransform = handleElement.style.transform;\r\n\r\n      const onMouseMove = (moveEvt: MouseEvent) => {\r\n        if (!draggingRef.current) return;\r\n\r\n        const currentPos = isHorizontalFlow ? moveEvt.clientX : moveEvt.clientY;\r\n        const zoom = getZoom();\r\n        // è®¡ç®—ç§»åŠ¨è·ç¦»ï¼Œé™¤ä»¥ç¼©æ”¾æ¯”ä¾‹ä»¥ä¿æŒä¸€è‡´\r\n        const diff = (currentPos - lastPosRef.current) / zoom;\r\n\r\n        lastPosRef.current = currentPos;\r\n\r\n        // ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–æ€§èƒ½ï¼Œä½¿æ‹–æ‹½æ›´æµç•…\r\n        requestAnimationFrame(() => {\r\n          setEdges((edges) =>\r\n            edges.map((e) => {\r\n              if (e.id === id) {\r\n                const currentOffset = (e.data?.offset as number) || 0;\r\n                return {\r\n                  ...e,\r\n                  data: { ...e.data, offset: currentOffset + diff },\r\n                };\r\n              }\r\n              return e;\r\n            }),\r\n          );\r\n        });\r\n      };\r\n\r\n      const onMouseUp = () => {\r\n        draggingRef.current = false;\r\n        setIsDragging(false);\r\n        // æ¢å¤æ‹–æ‹½æ‰‹æŸ„çš„æ ·å¼\r\n        if (handleElement) {\r\n          handleElement.style.transform = originalTransform;\r\n        }\r\n        document.removeEventListener('mousemove', onMouseMove);\r\n        document.removeEventListener('mouseup', onMouseUp);\r\n      };\r\n\r\n      document.addEventListener('mousemove', onMouseMove);\r\n      document.addEventListener('mouseup', onMouseUp);\r\n    },\r\n    [id, setEdges, getZoom, isHorizontalFlow],\r\n  );\r\n\r\n  // åˆ¤æ–­ç®­å¤´æ–¹å‘ï¼Œç”¨äºåè½¬åŠ¨ç”»\r\n  const hasOnlyStartMarker = markerStart && !markerEnd;\r\n\r\n  // æ‚¬åœæˆ–é€‰ä¸­æ—¶åŠ ç²—çº¿æ¡å¹¶æ”¹å˜é¢œè‰²\r\n  // å¦‚æœæœªå®ç°ï¼Œä½¿ç”¨è™šçº¿æ ·å¼\r\n  const edgeStyle = {\r\n    ...style,\r\n    ...(hasOnlyStartMarker ? { animationDirection: 'reverse' as const } : {}),\r\n    strokeWidth: isSelected\r\n      ? ((style.strokeWidth as number) || 1) * 2\r\n      : isHovered\r\n        ? ((style.strokeWidth as number) || 1) * 1.5\r\n        : style.strokeWidth || 1,\r\n    stroke: isSelected ? '#3b82f6' : isHovered ? '#60a5fa' : style.stroke || '#64748b',\r\n    strokeDasharray: style.strokeDasharray,\r\n    transition: 'stroke 0.2s, stroke-width 0.2s',\r\n  };\r\n\r\n  return (\r\n    <g\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      onMouseDown={onMouseDown}\r\n      className={hasOnlyStartMarker ? 'edge-reverse-animation' : ''}\r\n    >\r\n      {/* å®é™…æ˜¾ç¤ºçš„è¿çº¿ï¼Œä¼ å…¥ markerStart å’Œ markerEnd */}\r\n      <BaseEdge path={edgePath} markerEnd={markerEnd} markerStart={markerStart} style={edgeStyle} />\r\n\r\n      <EdgeLabelRenderer>\r\n        {/* è¿çº¿æ–‡å­— (å¦‚æœå­˜åœ¨) - æ”¾åœ¨æ‹–æ‹½æ‰‹æŸ„å‰é¢ï¼Œç¡®ä¿æ–‡å­—åœ¨ä¸Šå±‚ */}\r\n        {label && (\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,\r\n              ...labelStyles,\r\n              pointerEvents: 'all',\r\n              zIndex: 20, // ç¡®ä¿æ ‡ç­¾åœ¨æ‹–æ‹½æ‰‹æŸ„ä¹‹ä¸Š\r\n            }}\r\n            className=\"nodrag nopan edge-label\"\r\n          >\r\n            {label}\r\n          </div>\r\n        )}\r\n      </EdgeLabelRenderer>\r\n    </g>\r\n  );\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\ErrorBoundary.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\FloatingEdge\\index.tsx",
    "messages": [],
    "suppressedMessages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 30,
        "column": 28,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 30,
        "endColumn": 31,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                714,
                717
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                714,
                717
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ],
        "suppressions": [
          {
            "kind": "directive",
            "justification": ""
          }
        ]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\FlowCanvas\\AlignmentToolbar.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\FlowCanvas\\OffscreenIndicators.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\FlowCanvas\\index.tsx",
    "messages": [],
    "suppressedMessages": [
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\FlowCanvas\\index.tsx:194:7\n  192 |     ) {\n  193 |       // eslint-disable-next-line react-hooks/set-state-in-effect\n> 194 |       setSelectedElement(newSelectedElement);\n      |       ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  195 |     }\n  196 |   }, [nodes, edges, selectedElement]);\n  197 |",
        "line": 194,
        "column": 7,
        "nodeType": null,
        "endLine": 194,
        "endColumn": 25,
        "suppressions": [
          {
            "kind": "directive",
            "justification": ""
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 448,
        "column": 48,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 448,
        "endColumn": 51,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                14779,
                14782
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                14779,
                14782
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ],
        "suppressions": [
          {
            "kind": "directive",
            "justification": ""
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 473,
        "column": 27,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 473,
        "endColumn": 30,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                15628,
                15631
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                15628,
                15631
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ],
        "suppressions": [
          {
            "kind": "directive",
            "justification": ""
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 477,
        "column": 27,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 477,
        "endColumn": 30,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                15824,
                15827
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                15824,
                15827
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ],
        "suppressions": [
          {
            "kind": "directive",
            "justification": ""
          }
        ]
      }
    ],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\GroupNode\\index.tsx",
    "messages": [
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\GroupNode\\index.tsx:15:5\n  13 |   // åŒæ­¥å¤–éƒ¨æ•°æ®å˜åŒ–\n  14 |   useEffect(() => {\n> 15 |     setEditValue(groupData.label || 'æ–°åˆ†ç»„');\n     |     ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  16 |   }, [groupData.label]);\n  17 |\n  18 |   // åŒå‡»è¿›å…¥ç¼–è¾‘æ¨¡å¼",
        "line": 15,
        "column": 5,
        "nodeType": null,
        "endLine": 15,
        "endColumn": 17
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { memo, useState, useCallback, useEffect, useRef } from 'react';\r\nimport { NodeProps, NodeResizer } from '@xyflow/react';\r\nimport { GroupNodeData } from '../../types/flow';\r\nimport './styles.css';\r\n\r\nexport const GroupNode = memo(({ id, data, selected }: NodeProps) => {\r\n  const groupData = data as unknown as GroupNodeData;\r\n  const color = groupData.color || '#3b82f6';\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editValue, setEditValue] = useState(groupData.label || 'æ–°åˆ†ç»„');\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // åŒæ­¥å¤–éƒ¨æ•°æ®å˜åŒ–\r\n  useEffect(() => {\r\n    setEditValue(groupData.label || 'æ–°åˆ†ç»„');\r\n  }, [groupData.label]);\r\n\r\n  // åŒå‡»è¿›å…¥ç¼–è¾‘æ¨¡å¼\r\n  const handleDoubleClick = useCallback((e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setIsEditing(true);\r\n  }, []);\r\n\r\n  // ç¼–è¾‘æ¨¡å¼æ—¶è‡ªåŠ¨èšç„¦\r\n  useEffect(() => {\r\n    if (isEditing && inputRef.current) {\r\n      inputRef.current.focus();\r\n      inputRef.current.select();\r\n    }\r\n  }, [isEditing]);\r\n\r\n  // æäº¤ç¼–è¾‘\r\n  const handleSubmit = useCallback(() => {\r\n    setIsEditing(false);\r\n    if (editValue.trim() && editValue !== groupData.label) {\r\n      // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶æ›´æ–°\r\n      const event = new CustomEvent('groupLabelChange', {\r\n        detail: { id, label: editValue.trim() }\r\n      });\r\n      window.dispatchEvent(event);\r\n    }\r\n  }, [id, editValue, groupData.label]);\r\n\r\n  // é”®ç›˜äº‹ä»¶å¤„ç†\r\n  const handleKeyDown = useCallback((e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      handleSubmit();\r\n    } else if (e.key === 'Escape') {\r\n      setIsEditing(false);\r\n      setEditValue(groupData.label || 'æ–°åˆ†ç»„');\r\n    }\r\n  }, [handleSubmit, groupData.label]);\r\n\r\n  return (\r\n    <>\r\n      {/* å¯è°ƒæ•´å¤§å° */}\r\n      <NodeResizer\r\n        minWidth={200}\r\n        minHeight={150}\r\n        isVisible={selected}\r\n        lineStyle={{\r\n          borderColor: color,\r\n          borderWidth: 2,\r\n        }}\r\n        handleStyle={{\r\n          backgroundColor: color,\r\n          width: 10,\r\n          height: 10,\r\n          borderRadius: 2,\r\n        }}\r\n      />\r\n\r\n      {/* åˆ†ç»„å®¹å™¨ */}\r\n      <div\r\n        className={`group-node ${selected ? 'selected' : ''}`}\r\n        style={{\r\n          '--group-color': color,\r\n          '--group-bg-color': `${color}15`,\r\n        } as React.CSSProperties}\r\n      >\r\n        {/* æ ‡é¢˜æ  */}\r\n        <div\r\n          className=\"group-header\"\r\n          style={{ backgroundColor: color }}\r\n          onDoubleClick={handleDoubleClick}\r\n        >\r\n          {isEditing ? (\r\n            <input\r\n              ref={inputRef}\r\n              type=\"text\"\r\n              className=\"group-label-input\"\r\n              value={editValue}\r\n              onChange={(e) => setEditValue(e.target.value)}\r\n              onBlur={handleSubmit}\r\n              onKeyDown={handleKeyDown}\r\n              onClick={(e) => e.stopPropagation()}\r\n            />\r\n          ) : (\r\n            <span className=\"group-label\">{groupData.label || 'æ–°åˆ†ç»„'}</span>\r\n          )}\r\n        </div>\r\n\r\n        {/* å†…å®¹åŒºåŸŸï¼ˆå­èŠ‚ç‚¹ä¼šæ¸²æŸ“åœ¨è¿™é‡Œï¼‰ */}\r\n        <div className=\"group-content\" />\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n\r\nGroupNode.displayName = 'GroupNode';\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\ModuleNode\\index.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\Navigation\\index.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\DatabaseTableEditor.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\EdgePropertiesPanel.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\EdgeStyleEditor.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'editingInputRef' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 105,
        "column": 3,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 105,
        "endColumn": 18
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { memo } from 'react';\r\nimport { HexColorInput } from './HexColorInput';\r\n\r\ninterface EdgeStyleEditorProps {\r\n  // Basic properties\r\n  edgeLabel: string;\r\n  edgeColor: string;\r\n  edgeWidth: number;\r\n  edgeArrowType: 'forward' | 'reverse' | 'both' | 'none';\r\n\r\n  onLabelChange: (label: string) => void;\r\n  onCommitLabelChange: () => void; // for onBlur\r\n  onColorChange: (color: string) => void;\r\n  onCommitColorChange: () => void; // for onBlur\r\n  onWidthChange: (width: number) => void;\r\n  onCommitWidthChange: () => void; // for onBlur\r\n  onArrowTypeChange: (type: 'forward' | 'reverse' | 'both' | 'none') => void;\r\n\r\n\r\n  // Label Style Properties\r\n  edgeLabelFontSize: number;\r\n  edgeLabelFontSizeStr: string;\r\n  edgeLabelFontFamily: string;\r\n  edgeLabelFontWeight: number;\r\n  edgeLabelColor: string;\r\n  edgeLabelBgColor: string;\r\n  edgeLabelOpacity: number;\r\n  edgeLabelOpacityStr: string;\r\n\r\n  edgeLabelBgWidth: 'auto' | number;\r\n  edgeLabelBgHeight: 'auto' | number;\r\n  edgeLabelBgWidthStr: string;\r\n  edgeLabelBgHeightStr: string;\r\n\r\n  // Label Style Handlers\r\n  onLabelFontSizeChange: (str: string) => void;\r\n  onCommitLabelFontSizeChange: (str: string) => void;\r\n\r\n  onLabelFontFamilyChange: (family: string) => void;\r\n  onLabelFontWeightChange: (weight: number) => void;\r\n\r\n  onLabelColorChange: (color: string) => void; // usually immediate\r\n  onLabelBgColorChange: (color: string) => void; // usually immediate\r\n\r\n  onLabelOpacityChange: (value: number, str: string) => void; // immediate update to state\r\n  onCommitLabelOpacityChange: () => void;\r\n\r\n  onLabelBgWidthChange: (str: string) => void;\r\n  onCommitLabelBgWidth: (str: string) => void;\r\n\r\n  onLabelBgHeightChange: (str: string) => void;\r\n  onCommitLabelBgHeight: (str: string) => void;\r\n\r\n  onResetBgWidth: () => void;\r\n  onResetBgHeight: () => void;\r\n\r\n  // Refs for focus management\r\n  editingInputRef: React.MutableRefObject<HTMLElement | null>;\r\n  onInputFocus: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n  onInputBlur: (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\r\n  handleKeyDown: (e: React.KeyboardEvent) => void;\r\n}\r\n\r\nexport const EdgeStyleEditor = memo(function EdgeStyleEditor({\r\n  edgeLabel,\r\n  edgeColor,\r\n  edgeWidth,\r\n  edgeArrowType,\r\n  onLabelChange,\r\n  onCommitLabelChange,\r\n  onColorChange,\r\n  onCommitColorChange,\r\n  onWidthChange,\r\n  onCommitWidthChange,\r\n  onArrowTypeChange,\r\n\r\n  edgeLabelFontSize,\r\n  edgeLabelFontSizeStr,\r\n  edgeLabelFontFamily,\r\n  edgeLabelFontWeight,\r\n  edgeLabelColor,\r\n  edgeLabelBgColor,\r\n  edgeLabelOpacity,\r\n  edgeLabelOpacityStr,\r\n  edgeLabelBgWidth,\r\n  edgeLabelBgHeight,\r\n  edgeLabelBgWidthStr,\r\n  edgeLabelBgHeightStr,\r\n\r\n  onLabelFontSizeChange,\r\n  onCommitLabelFontSizeChange,\r\n  onLabelFontFamilyChange,\r\n  onLabelFontWeightChange,\r\n  onLabelColorChange,\r\n  onLabelBgColorChange,\r\n  onLabelOpacityChange,\r\n  onCommitLabelOpacityChange,\r\n  onLabelBgWidthChange,\r\n  onCommitLabelBgWidth,\r\n  onLabelBgHeightChange,\r\n  onCommitLabelBgHeight,\r\n  onResetBgWidth,\r\n  onResetBgHeight,\r\n\r\n  editingInputRef,\r\n  onInputFocus,\r\n  onInputBlur,\r\n  handleKeyDown\r\n}: EdgeStyleEditorProps) {\r\n  return (\r\n    <div className=\"detail-panel-content\">\r\n      <div className=\"info-section\">\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">è¿çº¿æ ‡ç­¾ (Label)</span>\r\n          <input\r\n            type=\"text\"\r\n            className=\"info-input\"\r\n            value={edgeLabel}\r\n            onChange={(e) => onLabelChange(e.target.value)}\r\n            onBlur={onCommitLabelChange}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"ä¾‹å¦‚ï¼šæ˜¯/å¦/æäº¤\"\r\n          />\r\n        </div>\r\n\r\n        {/* ç®­å¤´æ–¹å‘é€‰æ‹© */}\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">ç®­å¤´æ–¹å‘</span>\r\n          <div className=\"arrow-type-selector\">\r\n            <button\r\n              className={`arrow-btn ${edgeArrowType === 'forward' ? 'active' : ''}`}\r\n              onClick={() => onArrowTypeChange('forward')}\r\n              title=\"æ­£å‘ç®­å¤´\"\r\n            >\r\n              â†’\r\n            </button>\r\n            <button\r\n              className={`arrow-btn ${edgeArrowType === 'reverse' ? 'active' : ''}`}\r\n              onClick={() => onArrowTypeChange('reverse')}\r\n              title=\"åå‘ç®­å¤´\"\r\n            >\r\n              â†\r\n            </button>\r\n            <button\r\n              className={`arrow-btn ${edgeArrowType === 'both' ? 'active' : ''}`}\r\n              onClick={() => onArrowTypeChange('both')}\r\n              title=\"åŒå‘ç®­å¤´\"\r\n            >\r\n              â†”\r\n            </button>\r\n            <button\r\n              className={`arrow-btn ${edgeArrowType === 'none' ? 'active' : ''}`}\r\n              onClick={() => onArrowTypeChange('none')}\r\n              title=\"æ— ç®­å¤´\"\r\n            >\r\n              â€”\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">çº¿æ¡é¢œè‰²</span>\r\n          <HexColorInput\r\n            value={edgeColor}\r\n            onChange={(color) => { onColorChange(color); onCommitColorChange(); }}\r\n            fontSize=\"13px\"\r\n          />\r\n        </div>\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">çº¿æ¡ç²—ç»† (px)</span>\r\n          <input\r\n            type=\"number\"\r\n            className=\"info-input\"\r\n            value={edgeWidth}\r\n            onChange={(e) => onWidthChange(Number(e.target.value))}\r\n            onBlur={onCommitWidthChange}\r\n            onKeyDown={handleKeyDown}\r\n            min={1}\r\n            max={10}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* æ ‡ç­¾æ ·å¼è®¾ç½® */}\r\n      <div className=\"info-section\">\r\n        <div className=\"info-section-title\">æ ‡ç­¾æ ·å¼</div>\r\n\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">æ–‡å­—å¤§å° (px)</span>\r\n          <input\r\n            type=\"number\"\r\n            className=\"info-input\"\r\n            value={edgeLabelFontSizeStr}\r\n            onChange={(e) => onLabelFontSizeChange(e.target.value)}\r\n            onFocus={(e) => {\r\n              onInputFocus(e);\r\n              onLabelFontSizeChange(String(edgeLabelFontSize));\r\n            }}\r\n            onBlur={(e) => {\r\n              onInputBlur(e);\r\n              onCommitLabelFontSizeChange(e.target.value);\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            min={6}\r\n            max={72}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">å­—ä½“</span>\r\n          <select\r\n            className=\"info-input\"\r\n            value={edgeLabelFontFamily}\r\n            onChange={(e) => onLabelFontFamilyChange(e.target.value)}\r\n          >\r\n            <option value=\"å¾®è½¯é›…é»‘\">å¾®è½¯é›…é»‘</option>\r\n            <option value=\"Arial\">Arial</option>\r\n            <option value=\"Helvetica\">Helvetica</option>\r\n            <option value=\"Times New Roman\">Times New Roman</option>\r\n            <option value=\"Courier New\">Courier New</option>\r\n            <option value=\"Verdana\">Verdana</option>\r\n            <option value=\"Georgia\">Georgia</option>\r\n            <option value=\"Palatino\">Palatino</option>\r\n            <option value=\"Garamond\">Garamond</option>\r\n            <option value=\"Bookman\">Bookman</option>\r\n            <option value=\"Comic Sans MS\">Comic Sans MS</option>\r\n            <option value=\"Trebuchet MS\">Trebuchet MS</option>\r\n            <option value=\"Arial Black\">Arial Black</option>\r\n            <option value=\"Impact\">Impact</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">å­—ä½“ç²—ç»†</span>\r\n          <select\r\n            className=\"info-input\"\r\n            value={edgeLabelFontWeight}\r\n            onChange={(e) => onLabelFontWeightChange(Number(e.target.value))}\r\n          >\r\n            <option value=\"300\">ç»†ä½“ (300)</option>\r\n            <option value=\"400\">æ­£å¸¸ (400)</option>\r\n            <option value=\"600\">åŠç²— (600)</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">æ–‡å­—é¢œè‰²</span>\r\n          <HexColorInput\r\n            value={edgeLabelColor}\r\n            onChange={onLabelColorChange}\r\n            fontSize=\"13px\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">èƒŒæ™¯è‰²</span>\r\n          <HexColorInput\r\n            value={edgeLabelBgColor}\r\n            onChange={onLabelBgColorChange}\r\n            fontSize=\"13px\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"info-item\">\r\n          <span className=\"info-label\">é€æ˜åº¦</span>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max=\"100\"\r\n              value={edgeLabelOpacity}\r\n              onChange={(e) => {\r\n                const val = Number(e.target.value);\r\n                onLabelOpacityChange(val, String(val));\r\n                onCommitLabelOpacityChange();\r\n              }}\r\n              style={{ flex: 1 }}\r\n            />\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              max=\"100\"\r\n              value={edgeLabelOpacityStr}\r\n              onChange={(e) => {\r\n                // Update string immediately\r\n                onLabelOpacityChange(Number(e.target.value), e.target.value);\r\n              }}\r\n              onFocus={(e) => {\r\n                onInputFocus(e);\r\n                onLabelOpacityChange(edgeLabelOpacity, String(edgeLabelOpacity));\r\n              }}\r\n              onBlur={(e) => {\r\n                onInputBlur(e);\r\n                // Commit logic should be handled by parent based on string or value\r\n                onCommitLabelOpacityChange();\r\n              }}\r\n              onKeyDown={handleKeyDown}\r\n              style={{\r\n                width: '60px',\r\n                padding: '4px 8px',\r\n                border: '1px solid #cbd5e1',\r\n                borderRadius: '4px',\r\n                textAlign: 'center',\r\n              }}\r\n            />\r\n            <span style={{ color: '#64748b', fontSize: '12px' }}>%</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"info-item\">\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'space-between',\r\n              width: '100%',\r\n            }}\r\n          >\r\n            <span className=\"info-label\">èƒŒæ™¯å®½åº¦</span>\r\n            {edgeLabelBgWidth !== 'auto' && (\r\n              <button\r\n                onClick={onResetBgWidth}\r\n                style={{\r\n                  fontSize: '11px',\r\n                  padding: '2px 8px',\r\n                  background: '#f0f0f0',\r\n                  border: '1px solid #d9d9d9',\r\n                  borderRadius: '3px',\r\n                  cursor: 'pointer',\r\n                  color: '#666',\r\n                }}\r\n              >\r\n                é‡ç½®\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\r\n            <div style={{ position: 'relative', flex: 1 }}>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                value={edgeLabelBgWidthStr}\r\n                onChange={(e) => onLabelBgWidthChange(e.target.value)}\r\n                onFocus={onInputFocus}\r\n                onBlur={(e) => {\r\n                  onInputBlur(e);\r\n                  onCommitLabelBgWidth(e.target.value);\r\n                }}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '4px 8px',\r\n                  paddingRight: edgeLabelBgWidth === 'auto' ? '50px' : '8px',\r\n                  border: '1px solid #cbd5e1',\r\n                  borderRadius: '4px',\r\n                  color: edgeLabelBgWidth === 'auto' ? '#999' : '#333',\r\n                }}\r\n              />\r\n              {edgeLabelBgWidth === 'auto' && (\r\n                <span\r\n                  style={{\r\n                    position: 'absolute',\r\n                    right: '8px',\r\n                    top: '50%',\r\n                    transform: 'translateY(-50%)',\r\n                    fontSize: '11px',\r\n                    color: '#1890ff',\r\n                    pointerEvents: 'none',\r\n                  }}\r\n                >\r\n                  è‡ªåŠ¨\r\n                </span>\r\n              )}\r\n            </div>\r\n            <span style={{ color: '#64748b', fontSize: '12px' }}>px</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"info-item\">\r\n          <div\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'space-between',\r\n              marginBottom: '4px',\r\n              width: '100%',\r\n            }}\r\n          >\r\n            <span className=\"info-label\">èƒŒæ™¯é«˜åº¦</span>\r\n            {edgeLabelBgHeight !== 'auto' && (\r\n              <button\r\n                onClick={onResetBgHeight}\r\n                style={{\r\n                  fontSize: '11px',\r\n                  padding: '2px 8px',\r\n                  background: '#f0f0f0',\r\n                  border: '1px solid #d9d9d9',\r\n                  borderRadius: '3px',\r\n                  cursor: 'pointer',\r\n                  color: '#666',\r\n                }}\r\n              >\r\n                é‡ç½®\r\n              </button>\r\n            )}\r\n          </div>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', flex: 1 }}>\r\n            <div style={{ position: 'relative', flex: 1 }}>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                value={edgeLabelBgHeightStr}\r\n                onChange={(e) => onLabelBgHeightChange(e.target.value)}\r\n                onFocus={onInputFocus}\r\n                onBlur={(e) => {\r\n                  onInputBlur(e);\r\n                  onCommitLabelBgHeight(e.target.value);\r\n                }}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '4px 8px',\r\n                  paddingRight: edgeLabelBgHeight === 'auto' ? '50px' : '8px',\r\n                  border: '1px solid #cbd5e1',\r\n                  borderRadius: '4px',\r\n                  color: edgeLabelBgHeight === 'auto' ? '#999' : '#333',\r\n                }}\r\n              />\r\n              {edgeLabelBgHeight === 'auto' && (\r\n                <span\r\n                  style={{\r\n                    position: 'absolute',\r\n                    right: '8px',\r\n                    top: '50%',\r\n                    transform: 'translateY(-50%)',\r\n                    fontSize: '11px',\r\n                    color: '#1890ff',\r\n                    pointerEvents: 'none',\r\n                  }}\r\n                >\r\n                  è‡ªåŠ¨\r\n                </span>\r\n              )}\r\n            </div>\r\n            <span style={{ color: '#64748b', fontSize: '12px' }}>px</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\GroupPropertiesPanel.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'groupNode' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 34,
        "column": 5,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 34,
        "endColumn": 14
      },
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\GroupPropertiesPanel.tsx:45:9\n  43 |     // åŒæ­¥å¤–éƒ¨æ•°æ®\n  44 |     useEffect(() => {\n> 45 |         setGroupLabel(groupData.label || 'æ–°åˆ†ç»„');\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  46 |         setGroupColor(groupData.color || '#3b82f6');\n  47 |     }, [groupData]);\n  48 |",
        "line": 45,
        "column": 9,
        "nodeType": null,
        "endLine": 45,
        "endColumn": 22
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { memo, useState, useEffect, useCallback } from 'react';\r\nimport { Node } from '@xyflow/react';\r\nimport { FlowNodeData, GroupNodeData } from '../../types/flow';\r\nimport { BufferedInput } from '../common/BufferedInput';\r\n\r\n// é¢„è®¾é¢œè‰²é€‰é¡¹\r\nconst COLOR_PRESETS = [\r\n    { label: 'è“è‰²', value: '#3b82f6' },\r\n    { label: 'ç»¿è‰²', value: '#22c55e' },\r\n    { label: 'ç´«è‰²', value: '#8b5cf6' },\r\n    { label: 'æ©™è‰²', value: '#f97316' },\r\n    { label: 'çº¢è‰²', value: '#ef4444' },\r\n    { label: 'é’è‰²', value: '#06b6d4' },\r\n    { label: 'ç²‰è‰²', value: '#ec4899' },\r\n    { label: 'ç°è‰²', value: '#6b7280' },\r\n];\r\n\r\nexport interface GroupUpdateParams {\r\n    label?: string;\r\n    color?: string;\r\n}\r\n\r\ninterface GroupPropertiesPanelProps {\r\n    groupData: GroupNodeData;\r\n    groupNode: Node<FlowNodeData>;\r\n    childNodes: Node<FlowNodeData>[];\r\n    onGroupChange: (id: string, updates: GroupUpdateParams) => void;\r\n    onUngroup: (groupId: string) => void;\r\n    onRemoveFromGroup: (nodeId: string) => void;\r\n}\r\n\r\nexport const GroupPropertiesPanel = memo(function GroupPropertiesPanel({\r\n    groupData,\r\n    groupNode,\r\n    childNodes,\r\n    onGroupChange,\r\n    onUngroup,\r\n    onRemoveFromGroup,\r\n}: GroupPropertiesPanelProps) {\r\n    const [groupLabel, setGroupLabel] = useState(groupData.label || 'æ–°åˆ†ç»„');\r\n    const [groupColor, setGroupColor] = useState(groupData.color || '#3b82f6');\r\n\r\n    // åŒæ­¥å¤–éƒ¨æ•°æ®\r\n    useEffect(() => {\r\n        setGroupLabel(groupData.label || 'æ–°åˆ†ç»„');\r\n        setGroupColor(groupData.color || '#3b82f6');\r\n    }, [groupData]);\r\n\r\n    const handleLabelCommit = useCallback((value: string) => {\r\n        setGroupLabel(value);\r\n        onGroupChange(groupData.id, { label: value });\r\n    }, [groupData.id, onGroupChange]);\r\n\r\n    const handleColorChange = useCallback((color: string) => {\r\n        setGroupColor(color);\r\n        onGroupChange(groupData.id, { color });\r\n    }, [groupData.id, onGroupChange]);\r\n\r\n    const handleUngroup = useCallback(() => {\r\n        if (window.confirm('ç¡®å®šè¦è§£æ•£æ­¤åˆ†ç»„å—ï¼Ÿå­èŠ‚ç‚¹å°†å˜ä¸ºç‹¬ç«‹èŠ‚ç‚¹ã€‚')) {\r\n            onUngroup(groupData.id);\r\n        }\r\n    }, [groupData.id, onUngroup]);\r\n\r\n    const handleRemoveNode = useCallback((nodeId: string, nodeName: string) => {\r\n        if (window.confirm(`ç¡®å®šè¦å°†\"${nodeName}\"ä»åˆ†ç»„ä¸­ç§»é™¤å—ï¼Ÿ`)) {\r\n            onRemoveFromGroup(nodeId);\r\n        }\r\n    }, [onRemoveFromGroup]);\r\n\r\n    return (\r\n        <>\r\n            {/* åŸºæœ¬ä¿¡æ¯ */}\r\n            <div className=\"info-section\">\r\n                <div className=\"info-item\">\r\n                    <span className=\"info-label\">åˆ†ç»„åç§°</span>\r\n                    <BufferedInput\r\n                        type=\"text\"\r\n                        className=\"info-input\"\r\n                        value={groupLabel}\r\n                        onCommit={handleLabelCommit}\r\n                        placeholder=\"åˆ†ç»„åç§°\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* ä¸»é¢˜é¢œè‰² */}\r\n            <div className=\"section\">\r\n                <div className=\"section-title\">ä¸»é¢˜é¢œè‰²</div>\r\n                <div className=\"color-presets\" style={{\r\n                    display: 'grid',\r\n                    gridTemplateColumns: 'repeat(4, 1fr)',\r\n                    gap: '8px',\r\n                    marginBottom: '12px'\r\n                }}>\r\n                    {COLOR_PRESETS.map((preset) => (\r\n                        <button\r\n                            key={preset.value}\r\n                            className=\"color-preset-btn\"\r\n                            style={{\r\n                                width: '100%',\r\n                                height: '32px',\r\n                                backgroundColor: preset.value,\r\n                                border: groupColor === preset.value ? '3px solid #1e293b' : '2px solid transparent',\r\n                                borderRadius: '6px',\r\n                                cursor: 'pointer',\r\n                                transition: 'all 0.2s',\r\n                            }}\r\n                            title={preset.label}\r\n                            onClick={() => handleColorChange(preset.value)}\r\n                        />\r\n                    ))}\r\n                </div>\r\n                <div className=\"info-item\" style={{ marginTop: '8px' }}>\r\n                    <span className=\"info-label\">è‡ªå®šä¹‰é¢œè‰²</span>\r\n                    <input\r\n                        type=\"color\"\r\n                        value={groupColor}\r\n                        onChange={(e) => handleColorChange(e.target.value)}\r\n                        style={{\r\n                            width: '100%',\r\n                            height: '32px',\r\n                            padding: '2px',\r\n                            border: '1px solid #e2e8f0',\r\n                            borderRadius: '6px',\r\n                            cursor: 'pointer',\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* åˆ†ç»„ä¿¡æ¯ */}\r\n            <div className=\"section\">\r\n                <div className=\"section-title\">åˆ†ç»„ä¿¡æ¯</div>\r\n                <div className=\"info-item\">\r\n                    <span className=\"info-label\">åŒ…å«èŠ‚ç‚¹æ•°</span>\r\n                    <span className=\"info-value\" style={{\r\n                        padding: '8px 12px',\r\n                        background: '#f1f5f9',\r\n                        borderRadius: '6px',\r\n                        fontSize: '14px',\r\n                        color: '#1e293b',\r\n                        fontWeight: 500,\r\n                    }}>\r\n                        {childNodes.length} ä¸ªèŠ‚ç‚¹\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* å­èŠ‚ç‚¹åˆ—è¡¨ */}\r\n            {childNodes.length > 0 && (\r\n                <div className=\"section\">\r\n                    <div className=\"section-title\">å­èŠ‚ç‚¹åˆ—è¡¨</div>\r\n                    <div className=\"child-nodes-list\" style={{\r\n                        maxHeight: '200px',\r\n                        overflowY: 'auto',\r\n                        border: '1px solid #e2e8f0',\r\n                        borderRadius: '8px',\r\n                    }}>\r\n                        {childNodes.map((node, index) => (\r\n                            <div\r\n                                key={node.id}\r\n                                className=\"child-node-item\"\r\n                                style={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    justifyContent: 'space-between',\r\n                                    padding: '10px 12px',\r\n                                    borderBottom: index < childNodes.length - 1 ? '1px solid #e2e8f0' : 'none',\r\n                                    fontSize: '13px',\r\n                                }}\r\n                            >\r\n                                <span style={{\r\n                                    flex: 1,\r\n                                    overflow: 'hidden',\r\n                                    textOverflow: 'ellipsis',\r\n                                    whiteSpace: 'nowrap',\r\n                                }}>\r\n                                    {node.data.name || 'æœªå‘½åèŠ‚ç‚¹'}\r\n                                </span>\r\n                                <button\r\n                                    onClick={() => handleRemoveNode(node.id, node.data.name || 'æœªå‘½åèŠ‚ç‚¹')}\r\n                                    style={{\r\n                                        marginLeft: '8px',\r\n                                        padding: '4px 8px',\r\n                                        fontSize: '12px',\r\n                                        color: '#64748b',\r\n                                        background: '#f1f5f9',\r\n                                        border: 'none',\r\n                                        borderRadius: '4px',\r\n                                        cursor: 'pointer',\r\n                                    }}\r\n                                    title=\"ä»åˆ†ç»„ä¸­ç§»é™¤\"\r\n                                >\r\n                                    ç§»é™¤\r\n                                </button>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* æ“ä½œæŒ‰é’® */}\r\n            <div className=\"section\">\r\n                <button\r\n                    onClick={handleUngroup}\r\n                    style={{\r\n                        width: '100%',\r\n                        padding: '12px',\r\n                        fontSize: '14px',\r\n                        fontWeight: 500,\r\n                        color: '#dc2626',\r\n                        background: '#fef2f2',\r\n                        border: '1px solid #fecaca',\r\n                        borderRadius: '8px',\r\n                        cursor: 'pointer',\r\n                        transition: 'all 0.2s',\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                        e.currentTarget.style.background = '#fee2e2';\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                        e.currentTarget.style.background = '#fef2f2';\r\n                    }}\r\n                >\r\n                    è§£æ•£åˆ†ç»„\r\n                </button>\r\n            </div>\r\n        </>\r\n    );\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\HexColorInput.tsx",
    "messages": [
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\HexColorInput.tsx:27:9\n  25 |     // å½“å¤–éƒ¨ value æ”¹å˜æ—¶åŒæ­¥\n  26 |     useEffect(() => {\n> 27 |         setInputValue(getColorValue(value));\n     |         ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  28 |     }, [value]);\n  29 |\n  30 |     // éªŒè¯å¹¶æ ¼å¼åŒ–é¢œè‰²å€¼",
        "line": 27,
        "column": 9,
        "nodeType": null,
        "endLine": 27,
        "endColumn": 22
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { memo, useState, useEffect, useCallback } from 'react';\r\n\r\ninterface HexColorInputProps {\r\n    value: string;\r\n    onChange: (color: string) => void;\r\n    fontSize?: string;\r\n}\r\n\r\n/**\r\n * åå…­è¿›åˆ¶é¢œè‰²è¾“å…¥ç»„ä»¶\r\n * - æ˜¾ç¤ºé”å®šçš„ # å‰ç¼€\r\n * - ç”¨æˆ·åªéœ€è¾“å…¥ 6 ä½åå…­è¿›åˆ¶é¢œè‰²å€¼\r\n * - æ”¯æŒé¢œè‰²é€‰æ‹©å™¨å’Œæ‰‹åŠ¨è¾“å…¥\r\n */\r\nexport const HexColorInput = memo(function HexColorInput({\r\n    value,\r\n    onChange,\r\n    fontSize = '13px',\r\n}: HexColorInputProps) {\r\n    // ç§»é™¤ # å·ï¼Œåªä¿ç•™é¢œè‰²å€¼éƒ¨åˆ†\r\n    const getColorValue = (color: string) => color.replace('#', '').toUpperCase();\r\n\r\n    const [inputValue, setInputValue] = useState(() => getColorValue(value));\r\n\r\n    // å½“å¤–éƒ¨ value æ”¹å˜æ—¶åŒæ­¥\r\n    useEffect(() => {\r\n        setInputValue(getColorValue(value));\r\n    }, [value]);\r\n\r\n    // éªŒè¯å¹¶æ ¼å¼åŒ–é¢œè‰²å€¼\r\n    const normalizeHexColor = useCallback((hex: string): string => {\r\n        // ç§»é™¤æ‰€æœ‰éåå…­è¿›åˆ¶å­—ç¬¦\r\n        const cleaned = hex.replace(/[^0-9A-Fa-f]/g, '').toUpperCase();\r\n\r\n        // é™åˆ¶æœ€å¤š 6 ä¸ªå­—ç¬¦\r\n        const truncated = cleaned.slice(0, 6);\r\n\r\n        return truncated;\r\n    }, []);\r\n\r\n    // å¤„ç†è¾“å…¥å˜åŒ–\r\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const newValue = normalizeHexColor(e.target.value);\r\n        setInputValue(newValue);\r\n\r\n        // åªæœ‰å½“è¾“å…¥å®Œæ•´çš„ 6 ä½é¢œè‰²å€¼æ—¶æ‰è§¦å‘ onChange\r\n        if (newValue.length === 6) {\r\n            onChange(`#${newValue}`);\r\n        }\r\n    };\r\n\r\n    // å¤„ç†å¤±ç„¦ - è¡¥å…¨é¢œè‰²å€¼\r\n    const handleBlur = () => {\r\n        let finalValue = inputValue;\r\n\r\n        // å¦‚æœé•¿åº¦ä¸è¶³ 6 ä½ï¼Œç”¨ 0 è¡¥å…¨\r\n        if (finalValue.length < 6) {\r\n            finalValue = finalValue.padEnd(6, '0');\r\n            setInputValue(finalValue);\r\n            onChange(`#${finalValue}`);\r\n        }\r\n    };\r\n\r\n    // å¤„ç†é¢œè‰²é€‰æ‹©å™¨å˜åŒ–\r\n    const handleColorPickerChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        const newColor = e.target.value;\r\n        onChange(newColor);\r\n    };\r\n\r\n    return (\r\n        <div className=\"color-picker-container\">\r\n            <input\r\n                type=\"color\"\r\n                value={value}\r\n                onChange={handleColorPickerChange}\r\n            />\r\n            <div\r\n                style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    backgroundColor: '#ffffff',\r\n                    border: '1px solid #e2e8f0',\r\n                    borderRadius: '4px',\r\n                    overflow: 'hidden',\r\n                    flex: 1,\r\n                }}\r\n            >\r\n                {/* é”å®šçš„ # å‰ç¼€ */}\r\n                <span\r\n                    style={{\r\n                        fontSize,\r\n                        color: '#64748b',\r\n                        fontFamily: 'monospace',\r\n                        fontWeight: 600,\r\n                        userSelect: 'none',\r\n                        backgroundColor: '#f1f5f9',\r\n                        padding: '4px 6px',\r\n                        borderRight: '1px solid #e2e8f0',\r\n                    }}\r\n                >\r\n                    #\r\n                </span>\r\n                {/* é¢œè‰²å€¼è¾“å…¥æ¡† */}\r\n                <input\r\n                    type=\"text\"\r\n                    value={inputValue}\r\n                    onChange={handleInputChange}\r\n                    onBlur={handleBlur}\r\n                    maxLength={6}\r\n                    style={{\r\n                        fontSize,\r\n                        color: '#1e293b',\r\n                        fontFamily: 'monospace',\r\n                        fontWeight: 500,\r\n                        border: 'none',\r\n                        background: 'transparent',\r\n                        outline: 'none',\r\n                        width: '55px',\r\n                        padding: '4px 6px',\r\n                        textTransform: 'uppercase',\r\n                        letterSpacing: '0.5px',\r\n                    }}\r\n                    placeholder=\"FFFFFF\"\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nexport default HexColorInput;\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\NodePropertiesPanel.tsx",
    "messages": [
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\NodePropertiesPanel.tsx:64:9\n  62 |         const node = selectedElement.node;\n  63 |\n> 64 |         setNodeName(data.name || (typeof data.label === 'string' ? data.label : '') || '');\n     |         ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  65 |         setNodeDescription((typeof data.description === 'string' ? data.description : '') || '');\n  66 |         setRelatedNodeIds(data.relatedNodeIds || []);\n  67 |",
        "line": 64,
        "column": 9,
        "nodeType": null,
        "endLine": 64,
        "endColumn": 20
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 160,
        "column": 22,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 160,
        "endColumn": 25,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                7238,
                7241
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                7238,
                7241
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { memo, useState, useEffect, useRef, useCallback } from 'react';\r\nimport { Node } from '@xyflow/react';\r\nimport { FlowNodeData, Screenshot, DatabaseTable, NodeUpdateParams, NodeUpdateFields } from '../../types/flow';\r\nimport { NodeStyleEditor } from './NodeStyleEditor';\r\nimport { ScreenshotManager } from './ScreenshotManager';\r\nimport { DatabaseTableEditor } from './DatabaseTableEditor';\r\nimport { normalizeColor } from '../../utils/colorUtils';\r\nimport { getIframeUrl } from '../../config/iframeMapping';\r\nimport { SelectedElement } from './index';\r\nimport { BufferedInput } from '../common/BufferedInput';\r\nimport { NodeSelector } from './NodeSelector';\r\n\r\ninterface NodePropertiesPanelProps {\r\n    selectedElement: SelectedElement;\r\n    onNodeChange: (id: string, updates: NodeUpdateParams) => void;\r\n    onViewScreenshot: (s: Screenshot) => void;\r\n    onOpenPageSelector: () => void;\r\n    screenshots: Screenshot[];\r\n    setScreenshots: (s: Screenshot[]) => void;\r\n    allNodes?: Node<FlowNodeData>[];\r\n}\r\n\r\nexport const NodePropertiesPanel = memo(function NodePropertiesPanel({\r\n    selectedElement,\r\n    onNodeChange,\r\n    onViewScreenshot,\r\n    onOpenPageSelector,\r\n    screenshots,\r\n    setScreenshots,\r\n    allNodes = []\r\n}: NodePropertiesPanelProps) {\r\n    // State Management\r\n    const [nodeName, setNodeName] = useState('');\r\n    const [nodeDescription, setNodeDescription] = useState('');\r\n    const [relatedNodeIds, setRelatedNodeIds] = useState<string[]>([]);\r\n    const [nodeWidth, setNodeWidth] = useState<number | undefined>(undefined);\r\n    const [nodeHeight, setNodeHeight] = useState<number | undefined>(undefined);\r\n    const [nodeWidthStr, setNodeWidthStr] = useState('');\r\n    const [nodeHeightStr, setNodeHeightStr] = useState('');\r\n\r\n    // Node Style\r\n    const [nodeFontSize, setNodeFontSize] = useState(14);\r\n    const [nodeFontSizeStr, setNodeFontSizeStr] = useState('14');\r\n    const [nodeFontColor, setNodeFontColor] = useState('#000000');\r\n    const [nodeFontFamily, setNodeFontFamily] = useState('å¾®è½¯é›…é»‘');\r\n    const [nodeFontWeight, setNodeFontWeight] = useState(400);\r\n    const [nodeBackgroundColor, setNodeBackgroundColor] = useState('#ffffff');\r\n    const [nodeBorderColor, setNodeBorderColor] = useState('#cbd5e1');\r\n    const [nodeBorderWidth, setNodeBorderWidth] = useState(1);\r\n\r\n    // Extras\r\n    const [databaseTables, setDatabaseTables] = useState<DatabaseTable[]>([]);\r\n\r\n    // Refs\r\n    const editingInputRef = useRef<HTMLElement | null>(null);\r\n\r\n    // Synchronization\r\n    useEffect(() => {\r\n        if (selectedElement.type !== 'node') return;\r\n\r\n        const data = selectedElement.data;\r\n        const node = selectedElement.node;\r\n\r\n        setNodeName(data.name || (typeof data.label === 'string' ? data.label : '') || '');\r\n        setNodeDescription((typeof data.description === 'string' ? data.description : '') || '');\r\n        setRelatedNodeIds(data.relatedNodeIds || []);\r\n\r\n        // Screenshots are managed by parent to handle page selector callback\r\n        // But tables are local here\r\n        const dbTables = data.detailConfig?.databaseTables ||\r\n            (Array.isArray(data.databaseTables) ? data.databaseTables as DatabaseTable[] : []);\r\n        setDatabaseTables(dbTables);\r\n\r\n        if (node) {\r\n            setNodeWidth(node.style?.width as number | undefined);\r\n            setNodeHeight(node.style?.height as number | undefined);\r\n            setNodeWidthStr(node.style?.width ? String(node.style.width) : '');\r\n            setNodeHeightStr(node.style?.height ? String(node.style.height) : '');\r\n\r\n            setNodeFontSize(Number(node.style?.fontSize) || 14);\r\n            setNodeFontSizeStr(String(Number(node.style?.fontSize) || 14));\r\n\r\n            setNodeFontColor(normalizeColor(typeof node.style?.color === 'string' ? node.style.color : '') || '#000000');\r\n            setNodeFontFamily((typeof node.style?.fontFamily === 'string' ? node.style.fontFamily : '') || 'å¾®è½¯é›…é»‘');\r\n            setNodeFontWeight(Number(node.style?.fontWeight) || 400);\r\n\r\n            // Sync background color\r\n            // Check data.backgroundColor first for decision/data nodes\r\n            if ((data.type === 'decision' || data.type === 'data') && data.backgroundColor) {\r\n                setNodeBackgroundColor(data.backgroundColor);\r\n            } else {\r\n                setNodeBackgroundColor(normalizeColor(typeof node.style?.backgroundColor === 'string' ? node.style.backgroundColor : '') || '#ffffff');\r\n            }\r\n\r\n            setNodeBorderColor(normalizeColor(typeof node.style?.borderColor === 'string' ? node.style.borderColor : '') || '#cbd5e1');\r\n            setNodeBorderWidth(Number(node.style?.borderWidth) || 1);\r\n        }\r\n    }, [selectedElement]);\r\n\r\n    const commitNodeChanges = useCallback((\r\n        updatedFields: Partial<FlowNodeData> = {},\r\n        updatedStyle: React.CSSProperties = {}\r\n    ) => {\r\n        if (selectedElement.type !== 'node') return;\r\n\r\n        const newDataUpdates: Partial<FlowNodeData> & NodeUpdateFields = {};\r\n        // Cast unknown from index signature to expected types\r\n        const label = updatedFields.label as string | undefined;\r\n        const description = updatedFields.description as string | undefined;\r\n\r\n        if (label !== undefined) newDataUpdates.label = label;\r\n        if (description !== undefined) newDataUpdates.description = description;\r\n\r\n        if (updatedFields.screenshots) {\r\n            const screenshots = updatedFields.screenshots as Screenshot[];\r\n            newDataUpdates.screenshots = screenshots;\r\n            newDataUpdates.detailConfig = {\r\n                ...(selectedElement.data.detailConfig || {}),\r\n                screenshots: screenshots\r\n            };\r\n        }\r\n        if (updatedFields.databaseTables) {\r\n            const tables = updatedFields.databaseTables as DatabaseTable[];\r\n            newDataUpdates.databaseTables = tables;\r\n            newDataUpdates.detailConfig = {\r\n                ...(selectedElement.data.detailConfig || {}),\r\n                databaseTables: tables\r\n            };\r\n        }\r\n\r\n        const currentStyle = selectedElement.node?.style || {};\r\n        const newStyle = {\r\n            ...currentStyle,\r\n            ...updatedStyle\r\n        };\r\n\r\n        Object.keys(newStyle).forEach(key => {\r\n            const styleKey = key as keyof React.CSSProperties;\r\n            if (newStyle[styleKey] === undefined) {\r\n                delete newStyle[styleKey];\r\n            }\r\n        });\r\n\r\n        onNodeChange(selectedElement.data.id, {\r\n            data: newDataUpdates,\r\n            style: newStyle\r\n        });\r\n    }, [selectedElement, onNodeChange]);\r\n\r\n\r\n    const handleAddRelatedNode = (targetId: string) => {\r\n        if (!relatedNodeIds.includes(targetId)) {\r\n            const newIds = [...relatedNodeIds, targetId];\r\n            setRelatedNodeIds(newIds);\r\n            // Manually commit update since it's not in the main commitNodeChanges flow for simplicty, or extend commitNodeChanges\r\n            onNodeChange(selectedElement.data.id, {\r\n                data: {\r\n                    relatedNodeIds: newIds,\r\n                    [targetId]: true // trigger check if needed\r\n                } as any // dirty cast to bypass Partial<FlowNodeData> strict check for now or update commitNodeChanges\r\n            });\r\n            // Better to use commitNodeChanges logic properly\r\n            onNodeChange(selectedElement.data.id, {\r\n                data: {\r\n                    relatedNodeIds: newIds\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    const handleRemoveRelatedNode = (targetId: string) => {\r\n        const newIds = relatedNodeIds.filter(id => id !== targetId);\r\n        setRelatedNodeIds(newIds);\r\n        onNodeChange(selectedElement.data.id, {\r\n            data: {\r\n                relatedNodeIds: newIds\r\n            }\r\n        });\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault();\r\n            (e.currentTarget as HTMLElement).blur();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"info-section\">\r\n                <div className=\"info-item\">\r\n                    <span className=\"info-label\">åç§°</span>\r\n                    <BufferedInput\r\n                        type=\"text\"\r\n                        className=\"info-input\"\r\n                        value={nodeName}\r\n                        onCommit={(value) => {\r\n                            setNodeName(value);\r\n                            commitNodeChanges({ label: value });\r\n                        }}\r\n                        placeholder=\"èŠ‚ç‚¹åç§°\"\r\n                    />\r\n                </div>\r\n                <div className=\"info-item\">\r\n                    <span className=\"info-label\">æè¿°</span>\r\n                    <textarea\r\n                        className=\"info-textarea\"\r\n                        value={nodeDescription}\r\n                        onChange={e => setNodeDescription(e.target.value)}\r\n                        onBlur={() => commitNodeChanges({ description: nodeDescription })}\r\n                        onKeyDown={(e) => {\r\n                            if (e.key === 'Enter' && !e.shiftKey) {\r\n                                e.preventDefault();\r\n                                e.currentTarget.blur();\r\n                            }\r\n                        }}\r\n                        placeholder=\"èŠ‚ç‚¹è¯¦ç»†æè¿°...\"\r\n                        rows={3}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"info-section\">\r\n                <div className=\"info-item\">\r\n                    <span className=\"info-label\">å…³è”èŠ‚ç‚¹</span>\r\n                    <div className=\"related-nodes-container\">\r\n                        {relatedNodeIds.length > 0 && (\r\n                            <div className=\"related-list\">\r\n                                {relatedNodeIds.map(id => {\r\n                                    const node = allNodes.find(n => n.id === id);\r\n                                    return (\r\n                                        <div key={id} className=\"related-tag\">\r\n                                            <span className=\"related-tag-text\" title={String(node?.data?.label || node?.data?.name || id)}>\r\n                                                {String(node?.data?.label || node?.data?.name || id)}\r\n                                            </span>\r\n                                            <span\r\n                                                className=\"related-tag-remove\"\r\n                                                onClick={() => handleRemoveRelatedNode(id)}\r\n                                                title=\"ç§»é™¤å…³è”\"\r\n                                            >Ã—</span>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                        <NodeSelector\r\n                            currentNodeId={selectedElement.data.id}\r\n                            allNodes={allNodes}\r\n                            onSelect={handleAddRelatedNode}\r\n                            excludeIds={relatedNodeIds}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <NodeStyleEditor\r\n                nodeType={selectedElement.data.type}\r\n                // Dims\r\n                width={nodeWidth}\r\n                height={nodeHeight}\r\n                widthStr={nodeWidthStr}\r\n                heightStr={nodeHeightStr}\r\n                onWidthChange={(v, s) => {\r\n                    setNodeWidth(v);\r\n                    setNodeWidthStr(s);\r\n                    if (v !== undefined) commitNodeChanges({}, { width: v });\r\n                }}\r\n                onHeightChange={(v, s) => {\r\n                    setNodeHeight(v);\r\n                    setNodeHeightStr(s);\r\n                    if (v !== undefined) commitNodeChanges({}, { height: v });\r\n                }}\r\n                onCommitDimension={() => commitNodeChanges()}\r\n                // Font\r\n                fontSize={nodeFontSize}\r\n                fontSizeStr={nodeFontSizeStr}\r\n                fontColor={nodeFontColor}\r\n                fontFamily={nodeFontFamily}\r\n                fontWeight={nodeFontWeight}\r\n                onFontSizeChange={(v, s) => {\r\n                    setNodeFontSize(v);\r\n                    setNodeFontSizeStr(s);\r\n                    if (v && !isNaN(v)) commitNodeChanges({}, { fontSize: v });\r\n                }}\r\n                onCommitFontSize={() => commitNodeChanges()}\r\n                onFontColorChange={(v) => { setNodeFontColor(v); commitNodeChanges({}, { color: v }); }}\r\n                onFontFamilyChange={(v) => { setNodeFontFamily(v); commitNodeChanges({}, { fontFamily: v }); }}\r\n                onFontWeightChange={(v) => { setNodeFontWeight(v); commitNodeChanges({}, { fontWeight: v }); }}\r\n                // Bg & Border\r\n                backgroundColor={nodeBackgroundColor}\r\n                borderColor={nodeBorderColor}\r\n                borderWidth={nodeBorderWidth}\r\n                onBackgroundColorChange={(v) => { setNodeBackgroundColor(v); commitNodeChanges({}, { backgroundColor: v }); }}\r\n                onBorderColorChange={(v) => { setNodeBorderColor(v); commitNodeChanges({}, { borderColor: v }); }}\r\n                onBorderWidthChange={(v) => { setNodeBorderWidth(v); commitNodeChanges({}, { borderWidth: v }); }}\r\n                // Refs\r\n                editingInputRef={editingInputRef}\r\n                onInputFocus={(e) => { editingInputRef.current = e.currentTarget; }}\r\n                onInputBlur={() => { editingInputRef.current = null; }}\r\n                handleKeyDown={handleKeyDown}\r\n            />\r\n\r\n            <ScreenshotManager\r\n                screenshots={screenshots}\r\n                onScreenshotsChange={(newScreenshots) => {\r\n                    setScreenshots(newScreenshots);\r\n                    commitNodeChanges({ screenshots: newScreenshots });\r\n                }}\r\n                onViewScreenshot={onViewScreenshot}\r\n                onOpenPageSelector={onOpenPageSelector}\r\n                getComponentUrl={getIframeUrl}\r\n            />\r\n\r\n            <DatabaseTableEditor\r\n                tables={databaseTables}\r\n                onTablesChange={(newTables) => {\r\n                    setDatabaseTables(newTables);\r\n                    commitNodeChanges({ databaseTables: newTables });\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\NodeSelector.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\NodeStyleEditor.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'nodeType' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 46,
        "column": 3,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 46,
        "endColumn": 11
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'nodeSubType' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 47,
        "column": 3,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 47,
        "endColumn": 14
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'editingInputRef' is defined but never used. Allowed unused args must match /^_/u.",
        "line": 75,
        "column": 3,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 75,
        "endColumn": 18
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { memo } from 'react';\r\nimport { HexColorInput } from './HexColorInput';\r\n\r\ninterface NodeStyleEditorProps {\r\n  // Node Identity\r\n  nodeType?: string;\r\n  nodeSubType?: string; // for terminator etc\r\n\r\n  // Dimensions\r\n  width: number | undefined;\r\n  height: number | undefined;\r\n  widthStr: string;\r\n  heightStr: string;\r\n  onWidthChange: (val: number | undefined, str: string) => void;\r\n  onHeightChange: (val: number | undefined, str: string) => void;\r\n  onCommitDimension: () => void; // onBlur\r\n\r\n  // Font\r\n  fontSize: number;\r\n  fontSizeStr: string;\r\n  fontColor: string;\r\n  fontFamily: string;\r\n  fontWeight: number;\r\n  onFontSizeChange: (val: number, str: string) => void;\r\n  onCommitFontSize: () => void;\r\n  onFontColorChange: (val: string) => void; // immediate\r\n  onFontFamilyChange: (val: string) => void;\r\n  onFontWeightChange: (val: number) => void;\r\n\r\n  // Background & Border\r\n  backgroundColor: string;\r\n  borderColor: string;\r\n  borderWidth: number;\r\n  onBackgroundColorChange: (val: string) => void;\r\n  onBorderColorChange: (val: string) => void;\r\n  onBorderWidthChange: (val: number) => void;\r\n\r\n  // Refs\r\n  editingInputRef: React.MutableRefObject<HTMLElement | null>;\r\n  onInputFocus: (e: React.FocusEvent<HTMLElement>) => void;\r\n  onInputBlur: (e: React.FocusEvent<HTMLElement>) => void;\r\n  handleKeyDown: (e: React.KeyboardEvent) => void;\r\n}\r\n\r\nexport const NodeStyleEditor = memo(function NodeStyleEditor({\r\n  nodeType,\r\n  nodeSubType,\r\n\r\n  width,\r\n  height,\r\n  widthStr,\r\n  heightStr,\r\n  onWidthChange,\r\n  onHeightChange,\r\n  onCommitDimension,\r\n\r\n  fontSize,\r\n  fontSizeStr,\r\n  fontColor,\r\n  fontFamily,\r\n  fontWeight,\r\n  onFontSizeChange,\r\n  onCommitFontSize,\r\n  onFontColorChange,\r\n  onFontFamilyChange,\r\n  onFontWeightChange,\r\n\r\n  backgroundColor,\r\n  borderColor,\r\n  borderWidth,\r\n  onBackgroundColorChange,\r\n  onBorderColorChange,\r\n  onBorderWidthChange,\r\n\r\n  editingInputRef,\r\n  onInputFocus,\r\n  onInputBlur,\r\n  handleKeyDown,\r\n}: NodeStyleEditorProps) {\r\n\r\n  // Helper to determine if we should show certain options based on node type\r\n  // For now, we show everything, but we can customize labels or defaults if needed.\r\n\r\n  return (\r\n    <div className=\"detail-section\">\r\n      <h3 className=\"panel-title\" style={{ marginTop: '0', marginBottom: '12px' }}>æ ·å¼è®¾ç½®</h3>\r\n\r\n      {/* Dimensions */}\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">å®½åº¦ (px)</span>\r\n        <div style={{ position: 'relative', flex: 1, width: '100%' }}>\r\n          <input\r\n            type=\"number\"\r\n            className=\"info-input\"\r\n            value={widthStr}\r\n            onChange={(e) => {\r\n              const str = e.target.value;\r\n              const num = str === '' ? undefined : Number(str);\r\n              onWidthChange(num, str);\r\n            }}\r\n            onFocus={onInputFocus}\r\n            onBlur={(e) => {\r\n              onInputBlur(e);\r\n              onCommitDimension();\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"è‡ªåŠ¨\"\r\n          />\r\n          {width === undefined && (\r\n            <span\r\n              style={{\r\n                position: 'absolute',\r\n                right: '40px',\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                fontSize: '11px',\r\n                color: '#94a3b8',\r\n                pointerEvents: 'none',\r\n              }}\r\n            >\r\n              è‡ªåŠ¨\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">é«˜åº¦ (px)</span>\r\n        <div style={{ position: 'relative', flex: 1, width: '100%' }}>\r\n          <input\r\n            type=\"number\"\r\n            className=\"info-input\"\r\n            value={heightStr}\r\n            onChange={(e) => {\r\n              const str = e.target.value;\r\n              const num = str === '' ? undefined : Number(str);\r\n              onHeightChange(num, str);\r\n            }}\r\n            onFocus={onInputFocus}\r\n            onBlur={(e) => {\r\n              onInputBlur(e);\r\n              onCommitDimension();\r\n            }}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"è‡ªåŠ¨\"\r\n          />\r\n          {height === undefined && (\r\n            <span\r\n              style={{\r\n                position: 'absolute',\r\n                right: '40px', // Adjusted for centered content\r\n                top: '50%',\r\n                transform: 'translateY(-50%)',\r\n                fontSize: '11px',\r\n                color: '#94a3b8',\r\n                pointerEvents: 'none',\r\n              }}\r\n            >\r\n              è‡ªåŠ¨\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Font Settings */}\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">å­—å· (px)</span>\r\n        <input\r\n          type=\"number\"\r\n          className=\"info-input\"\r\n          value={fontSizeStr}\r\n          onChange={(e) => {\r\n            const str = e.target.value;\r\n            const num = Number(str);\r\n            onFontSizeChange(isNaN(num) ? 14 : num, str);\r\n          }}\r\n          onFocus={(e) => {\r\n            onInputFocus(e);\r\n            onFontSizeChange(fontSize, String(fontSize)); // ensure sync\r\n          }}\r\n          onBlur={(e) => {\r\n            onInputBlur(e);\r\n            onCommitFontSize();\r\n          }}\r\n          onKeyDown={handleKeyDown}\r\n          placeholder=\"14\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">å­—ä½“é¢œè‰²</span>\r\n        <HexColorInput\r\n          value={fontColor}\r\n          onChange={onFontColorChange}\r\n          fontSize=\"13px\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">å­—ä½“</span>\r\n        <select\r\n          className=\"info-input\"\r\n          value={fontFamily}\r\n          onChange={(e) => onFontFamilyChange(e.target.value)}\r\n        >\r\n          <option value=\"å¾®è½¯é›…é»‘\">å¾®è½¯é›…é»‘</option>\r\n          <option value=\"SimSun\">å®‹ä½“</option>\r\n          <option value=\"SimHei\">é»‘ä½“</option>\r\n          <option value=\"Arial\">Arial</option>\r\n          <option value=\"Times New Roman\">Times New Roman</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">å­—é‡</span>\r\n        <select\r\n          className=\"info-input\"\r\n          value={fontWeight}\r\n          onChange={(e) => onFontWeightChange(Number(e.target.value))}\r\n        >\r\n          <option value={300}>ç»†ä½“ (300)</option>\r\n          <option value={400}>æ­£å¸¸ (400)</option>\r\n          <option value={600}>ç²—ä½“ (600)</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">èƒŒæ™¯é¢œè‰²</span>\r\n        <HexColorInput\r\n          value={backgroundColor}\r\n          onChange={onBackgroundColorChange}\r\n          fontSize=\"13px\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">è¾¹æ¡†é¢œè‰²</span>\r\n        <HexColorInput\r\n          value={borderColor}\r\n          onChange={onBorderColorChange}\r\n          fontSize=\"13px\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"info-item\">\r\n        <span className=\"info-label\">è¾¹æ¡†å®½ (px)</span>\r\n        <input\r\n          type=\"number\"\r\n          className=\"info-input\"\r\n          value={borderWidth}\r\n          onChange={(e) => onBorderWidthChange(Number(e.target.value))}\r\n          min={0}\r\n          max={10}\r\n        />\r\n      </div>\r\n    </div >\r\n  );\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\ScreenshotManager.tsx",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 53,
        "column": 82,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 53,
        "endColumn": 85,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                1519,
                1522
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                1519,
                1522
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { memo } from 'react';\r\n\r\nexport interface Screenshot {\r\n  id: string;\r\n  title?: string;\r\n  description?: string;\r\n  url: string;\r\n  pageName?: string;\r\n  isComponent?: boolean; // If true, renders as iframe/component preview\r\n  locked?: boolean; // If true, cannot be deleted/edited easily\r\n}\r\n\r\ninterface ScreenshotManagerProps {\r\n  screenshots: Screenshot[];\r\n  onScreenshotsChange: (screenshots: Screenshot[]) => void;\r\n  onViewScreenshot: (screenshot: Screenshot) => void;\r\n  onOpenPageSelector?: () => void;\r\n\r\n  // Mapping function for component URLs (externalized logic)\r\n  getComponentUrl?: (componentId: string) => string;\r\n}\r\n\r\nexport const ScreenshotManager = memo(function ScreenshotManager({\r\n  screenshots,\r\n  onScreenshotsChange,\r\n  onViewScreenshot,\r\n  onOpenPageSelector,\r\n  getComponentUrl,\r\n}: ScreenshotManagerProps) {\r\n\r\n  const handleAddScreenshot = () => {\r\n    const newScreenshot: Screenshot = {\r\n      id: `screenshot_${Date.now()}`,\r\n      title: '',\r\n      description: '',\r\n      url: '',\r\n      pageName: '',\r\n    };\r\n    onScreenshotsChange([...screenshots, newScreenshot]);\r\n  };\r\n\r\n  const handleRemoveScreenshot = (index: number) => {\r\n    if (screenshots[index].locked) {\r\n      alert('æ­¤æˆªå›¾å·²é”å®šï¼Œæ— æ³•åˆ é™¤');\r\n      return;\r\n    }\r\n    if (!window.confirm('ç¡®è®¤åˆ é™¤æ­¤æˆªå›¾å—ï¼Ÿ')) return;\r\n\r\n    const newScreenshots = screenshots.filter((_, i) => i !== index);\r\n    onScreenshotsChange(newScreenshots);\r\n  };\r\n\r\n  const handleUpdateScreenshot = (index: number, field: keyof Screenshot, value: any) => {\r\n    if (screenshots[index].locked && field !== 'locked') return; // Prevent editing if locked\r\n\r\n    const newScreenshots = [...screenshots];\r\n    newScreenshots[index] = { ...newScreenshots[index], [field]: value };\r\n    onScreenshotsChange(newScreenshots);\r\n  };\r\n\r\n  const toggleLock = (index: number, e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    const newLocked = !screenshots[index].locked;\r\n    handleUpdateScreenshot(index, 'locked', newLocked);\r\n  };\r\n\r\n  // Helper to resolve iframe source\r\n  const getPreviewSrc = (screenshot: Screenshot) => {\r\n    if (screenshot.url.startsWith('component:') && getComponentUrl) {\r\n      return getComponentUrl(screenshot.url);\r\n    }\r\n    return screenshot.url;\r\n  };\r\n\r\n  return (\r\n    <div className=\"section\">\r\n      <div className=\"section-title\" style={{ justifyContent: 'space-between' }}>\r\n        <span style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n          <span className=\"icon\">ğŸ“¸</span> å…³è”é¡µé¢æˆªå›¾\r\n        </span>\r\n        <div style={{ display: 'flex', gap: '8px' }}>\r\n          {onOpenPageSelector && (\r\n            <button\r\n              className=\"btn-add\"\r\n              onClick={onOpenPageSelector}\r\n              title=\"ä»ç³»ç»Ÿé¡µé¢åº“ä¸­é€‰æ‹©\"\r\n              style={{\r\n                background: '#e0e7ff',\r\n                color: '#4338ca',\r\n                border: '1px solid #c7d2fe'\r\n              }}\r\n            >\r\n              ğŸ“‘ é€‰æ‹©é¡µé¢\r\n            </button>\r\n          )}\r\n          <button className=\"btn-add\" onClick={handleAddScreenshot} title=\"æ‰‹åŠ¨æ·»åŠ æˆªå›¾URL\">\r\n            + æ·»åŠ æˆªå›¾\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {screenshots.length === 0 ? (\r\n        <div className=\"empty-hint\" style={{ padding: '24px' }}>\r\n          <div className=\"hint-text\">æš‚æ— å…³è”çš„é¡µé¢æˆªå›¾</div>\r\n        </div>\r\n      ) : (\r\n        <div className={`screenshots-grid ${screenshots.length === 1 ? 'single-item' : ''}`}>\r\n          {screenshots.map((screenshot, index) => {\r\n            const isLocked = screenshot.locked;\r\n            return (\r\n              <div\r\n                key={screenshot.id}\r\n                className={`screenshot-item ${isLocked ? 'locked' : ''}`}\r\n                //   title={screenshot.title || screenshot.description || 'ç‚¹å‡»æŸ¥çœ‹å¤§å›¾'}\r\n                onClick={(e) => {\r\n                  // Ignore clicks on inputs/buttons\r\n                  if ((e.target as HTMLElement).tagName.match(/INPUT|TEXTAREA|BUTTON/)) return;\r\n                  onViewScreenshot(screenshot);\r\n                }}\r\n                style={{\r\n                  cursor: 'pointer',\r\n                  border: isLocked ? '2px solid #cbd5e1' : '1px solid #e2e8f0',\r\n                  opacity: isLocked ? 0.9 : 1\r\n                }}\r\n              >\r\n                <div className=\"screenshot-actions\">\r\n                  {/* Lock Button */}\r\n                  <button\r\n                    onClick={(e) => toggleLock(index, e)}\r\n                    className=\"screenshot-action-btn\"\r\n                    title={isLocked ? \"è§£é”\" : \"é”å®š\"}\r\n                    style={{ color: isLocked ? '#d97706' : '#64748b', borderColor: isLocked ? '#fcd34d' : 'transparent', background: isLocked ? '#fffbeb' : 'rgba(255,255,255,0.9)' }}\r\n                  >\r\n                    {isLocked ? 'ğŸ”’' : 'ğŸ”“'}\r\n                  </button>\r\n\r\n                  {/* Delete Button */}\r\n                  {!isLocked && (\r\n                    <button\r\n                      className=\"screenshot-action-btn\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        handleRemoveScreenshot(index);\r\n                      }}\r\n                      title=\"åˆ é™¤æˆªå›¾\"\r\n                      style={{ color: '#ef4444' }}\r\n                    >\r\n                      Ã—\r\n                    </button>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Preview Area */}\r\n                <div className=\"screenshot-preview\" style={{ height: '120px', overflow: 'hidden', background: '#f8fafc', position: 'relative' }}>\r\n                  {screenshot.url ? (\r\n                    screenshot.url.startsWith('component:') || screenshot.isComponent ? (\r\n                      <div className=\"screenshot-thumbnail-page\" style={{ width: '100%', height: '100%' }}>\r\n                        <iframe\r\n                          src={getPreviewSrc(screenshot)}\r\n                          className=\"screenshot-thumbnail-iframe\"\r\n                          style={{\r\n                            width: '400%', height: '400%',\r\n                            transform: 'scale(0.25)', transformOrigin: '0 0',\r\n                            border: 'none', pointerEvents: 'none'\r\n                          }}\r\n                          title=\"Preview\"\r\n                          scrolling=\"no\"\r\n                        />\r\n                        {/* Overlay to catch clicks */}\r\n                        <div style={{ position: 'absolute', inset: 0, zIndex: 10 }}></div>\r\n                      </div>\r\n                    ) : (\r\n                      <img\r\n                        src={screenshot.url}\r\n                        alt={screenshot.title || 'æˆªå›¾'}\r\n                        style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n                        onError={(e) => {\r\n                          (e.target as HTMLImageElement).src =\r\n                            'data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"150\"><rect fill=\"%23f0f0f0\" width=\"200\" height=\"150\"/><text x=\"50%\" y=\"50%\" text-anchor=\"middle\" fill=\"%23999\">å›¾ç‰‡åŠ è½½å¤±è´¥</text></svg>';\r\n                        }}\r\n                      />\r\n                    )\r\n                  ) : (\r\n                    <div className=\"screenshot-placeholder\">\r\n                      <span style={{ fontSize: '24px' }}>ğŸ“·</span>\r\n                      <p>æš‚æ— å›¾ç‰‡</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Info Inputs */}\r\n                <div className=\"screenshot-info\" style={{ padding: '8px' }}>\r\n                  {screenshot.pageName && (\r\n                    <div className=\"screenshot-page-name\" style={{ fontSize: '12px', color: '#64748b', marginBottom: '4px' }}>\r\n                      ğŸ“„ {screenshot.pageName}\r\n                    </div>\r\n                  )}\r\n\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"screenshot-title\"\r\n                    value={screenshot.title || ''}\r\n                    onChange={(e) => handleUpdateScreenshot(index, 'title', e.target.value)}\r\n                    placeholder=\"æˆªå›¾æ ‡é¢˜\"\r\n                    disabled={isLocked}\r\n                    style={{ fontWeight: 600, width: '100%', marginBottom: '4px', border: 'none', background: 'transparent' }}\r\n                  />\r\n                  {!screenshot.url.startsWith('component:') && (\r\n                    <input\r\n                      type=\"text\"\r\n                      className=\"screenshot-url\"\r\n                      value={screenshot.url}\r\n                      onChange={(e) => handleUpdateScreenshot(index, 'url', e.target.value)}\r\n                      placeholder=\"å›¾ç‰‡URL\"\r\n                      disabled={isLocked}\r\n                      style={{ fontSize: '11px', color: '#94a3b8', width: '100%', marginBottom: '4px', border: 'none', background: 'transparent' }}\r\n                    />\r\n                  )}\r\n                  <textarea\r\n                    className=\"screenshot-description\"\r\n                    value={screenshot.description || ''}\r\n                    onChange={(e) => handleUpdateScreenshot(index, 'description', e.target.value)}\r\n                    placeholder=\"æ·»åŠ æè¿°...\"\r\n                    rows={2}\r\n                    disabled={isLocked}\r\n                    style={{ fontSize: '12px', width: '100%', resize: 'none', border: 'none', background: 'transparent', color: '#64748b' }}\r\n                  />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\index.tsx",
    "messages": [
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\NodeDetailPanel\\index.tsx:55:5\n  53 |     const screenshots = data.detailConfig?.screenshots ||\n  54 |       (Array.isArray(data.screenshots) ? data.screenshots as Screenshot[] : []);\n> 55 |     setScreenshots(screenshots);\n     |     ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  56 |   }, [selectedElement]);\n  57 |\n  58 |   // ---------------- UI Helpers ----------------",
        "line": 55,
        "column": 5,
        "nodeType": null,
        "endLine": 55,
        "endColumn": 19
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useState, useEffect, memo } from 'react';\r\nimport { Edge, Node } from '@xyflow/react';\r\nimport { FlowNodeData, Screenshot, NodeUpdateParams, EdgeUpdateParams, GroupNodeData } from '../../types/flow';\r\nimport { ScreenshotViewer } from '../ScreenshotViewer';\r\nimport { PageSelector, PageOption } from '../PageSelector';\r\nimport { NodePropertiesPanel } from './NodePropertiesPanel';\r\nimport { EdgePropertiesPanel } from './EdgePropertiesPanel';\r\nimport { GroupPropertiesPanel, GroupUpdateParams } from './GroupPropertiesPanel';\r\nimport './styles.css';\r\n\r\n// Define the wrapper type passed from FlowCanvas\r\nexport type SelectedElement =\r\n  | { type: 'node'; data: FlowNodeData; node?: Node<FlowNodeData> }\r\n  | { type: 'edge'; data: Edge };\r\n\r\ninterface NodeDetailPanelProps {\r\n  selectedElement: SelectedElement | null;\r\n  visible: boolean;\r\n  onClose: () => void;\r\n  onNodeChange: (id: string, updates: NodeUpdateParams) => void;\r\n  onEdgeChange: (id: string, updates: EdgeUpdateParams) => void;\r\n  // åˆ†ç»„ç›¸å…³\r\n  onGroupChange?: (id: string, updates: GroupUpdateParams) => void;\r\n  onUngroup?: (groupId: string) => void;\r\n  onRemoveFromGroup?: (nodeId: string) => void;\r\n  allNodes?: Node<FlowNodeData>[];\r\n}\r\n\r\nexport const NodeDetailPanel = memo(function NodeDetailPanel({\r\n  selectedElement,\r\n  visible,\r\n  onClose,\r\n  onNodeChange,\r\n  onEdgeChange,\r\n  onGroupChange,\r\n  onUngroup,\r\n  onRemoveFromGroup,\r\n  allNodes = [],\r\n}: NodeDetailPanelProps) {\r\n\r\n  // Node Extras to be lifted here because of PageSelector\r\n  const [screenshots, setScreenshots] = useState<Screenshot[]>([]);\r\n\r\n  // UI State\r\n  const [viewingScreenshot, setViewingScreenshot] = useState<Screenshot | null>(null);\r\n  const [showPageSelector, setShowPageSelector] = useState(false);\r\n\r\n  // Synchronization for screenshots which might be needed for PageSelector context\r\n  useEffect(() => {\r\n    if (!selectedElement || selectedElement.type !== 'node') return;\r\n\r\n    const data = selectedElement.data;\r\n    const screenshots = data.detailConfig?.screenshots ||\r\n      (Array.isArray(data.screenshots) ? data.screenshots as Screenshot[] : []);\r\n    setScreenshots(screenshots);\r\n  }, [selectedElement]);\r\n\r\n  // ---------------- UI Helpers ----------------\r\n  const handlePageSelected = (page: PageOption) => {\r\n    // Only valid if node selected\r\n    if (!selectedElement || selectedElement.type !== 'node') return;\r\n\r\n    const newScreenshot: Screenshot = {\r\n      id: `screenshot_${Date.now()}`,\r\n      title: page.title,\r\n      url: page.url,\r\n      pageName: page.title,\r\n      description: page.description,\r\n      isComponent: true,\r\n      locked: true,\r\n      componentType: 'page'\r\n    };\r\n\r\n    const newScreenshots = [...screenshots, newScreenshot];\r\n    setScreenshots(newScreenshots);\r\n    // Directly commit changes to node from here? \r\n    // We need to call onNodeChange.\r\n\r\n    // We can reuse the logic, but since we are refactoring, let's keep it simple.\r\n    // Ideally NodePropertiesPanel should handle this, BUT PageSelector is global-ish (modal-like).\r\n    // Let's pass the update down or handle it here. \r\n\r\n    // Construct updates manually:\r\n    const updates: NodeUpdateParams = {\r\n      data: {\r\n        screenshots: newScreenshots,\r\n        detailConfig: {\r\n          ...(selectedElement.data.detailConfig || {}),\r\n          screenshots: newScreenshots\r\n        }\r\n      }\r\n    };\r\n    onNodeChange(selectedElement.data.id, updates);\r\n\r\n    setShowPageSelector(false);\r\n  };\r\n\r\n  if (!selectedElement) {\r\n    if (viewingScreenshot) {\r\n      return (\r\n        <ScreenshotViewer\r\n          screenshot={viewingScreenshot}\r\n          visible={!!viewingScreenshot}\r\n          onClose={() => setViewingScreenshot(null)}\r\n        />\r\n      );\r\n    }\r\n    return null;\r\n  }\r\n\r\n  const isNode = selectedElement.type === 'node';\r\n  const isGroupNode = isNode && selectedElement.node?.type === 'group';\r\n\r\n  // è·å–åˆ†ç»„çš„å­èŠ‚ç‚¹\r\n  const childNodes = isGroupNode\r\n    ? allNodes.filter((n) => n.parentId === selectedElement.data.id)\r\n    : [];\r\n\r\n  // è·å–é¢æ¿æ ‡é¢˜\r\n  const getPanelTitle = () => {\r\n    if (isGroupNode) return 'åˆ†ç»„å±æ€§';\r\n    if (isNode) return 'èŠ‚ç‚¹å±æ€§';\r\n    return 'è¿çº¿å±æ€§';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ScreenshotViewer\r\n        screenshot={viewingScreenshot}\r\n        visible={!!viewingScreenshot}\r\n        onClose={() => setViewingScreenshot(null)}\r\n      />\r\n\r\n      {showPageSelector && (\r\n        <PageSelector\r\n          onSelect={handlePageSelected}\r\n          onClose={() => setShowPageSelector(false)}\r\n          visible={showPageSelector}\r\n        />\r\n      )}\r\n\r\n      <div className={`detail-panel ${visible ? 'visible' : ''}`}>\r\n        <div className=\"panel-header\">\r\n          <h3 className=\"panel-title\">{getPanelTitle()}</h3>\r\n          <button className=\"close-btn\" onClick={onClose}>Ã—</button>\r\n        </div>\r\n\r\n        <div className=\"panel-content\">\r\n          {/* Group Node Content */}\r\n          {isGroupNode && selectedElement.type === 'node' && selectedElement.node && onGroupChange && onUngroup && onRemoveFromGroup && (\r\n            <GroupPropertiesPanel\r\n              groupData={selectedElement.node.data as unknown as GroupNodeData}\r\n              groupNode={selectedElement.node}\r\n              childNodes={childNodes}\r\n              onGroupChange={onGroupChange}\r\n              onUngroup={onUngroup}\r\n              onRemoveFromGroup={onRemoveFromGroup}\r\n            />\r\n          )}\r\n\r\n          {/* Regular Node Content */}\r\n          {isNode && !isGroupNode && selectedElement.type === 'node' && (\r\n            <NodePropertiesPanel\r\n              selectedElement={selectedElement}\r\n              onNodeChange={onNodeChange}\r\n              onViewScreenshot={setViewingScreenshot}\r\n              onOpenPageSelector={() => setShowPageSelector(true)}\r\n              screenshots={screenshots}\r\n              setScreenshots={setScreenshots}\r\n              allNodes={allNodes}\r\n            />\r\n          )}\r\n\r\n          {/* Edge Content */}\r\n          {!isNode && selectedElement.type === 'edge' && (\r\n            <EdgePropertiesPanel\r\n              selectedElement={selectedElement}\r\n              onEdgeChange={onEdgeChange}\r\n            />\r\n          )}\r\n\r\n          {!isNode && selectedElement.type !== 'edge' && (\r\n            // Should not happen, but as legacy fallback\r\n            <div className=\"section\">\r\n              <div className=\"empty-hint\" style={{ padding: '24px' }}>\r\n                <div className=\"hint-text\">è¯·é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹æˆ–è¿çº¿</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {!isNode && selectedElement.type === 'edge' && (\r\n            // Additional hints for edges\r\n            <div className=\"section\">\r\n              <div className=\"empty-hint\" style={{ padding: '24px' }}>\r\n                <div className=\"hint-text\">æç¤ºï¼šæ‚¨å¯ä»¥æ‹–åŠ¨è¿çº¿ä¸Šçš„åœ†ç‚¹æ¥è°ƒæ•´è·¯å¾„ã€‚</div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\PageSelector\\index.tsx",
    "messages": [
      {
        "ruleId": "react-refresh/only-export-components",
        "severity": 1,
        "message": "Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.",
        "line": 15,
        "column": 14,
        "nodeType": "Identifier",
        "messageId": "namedExport",
        "endLine": 15,
        "endColumn": 40
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useRef, useEffect } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport './styles.css';\r\n\r\nexport interface PageOption {\r\n  id: string;\r\n  title: string;\r\n  componentType: 'page';\r\n  url: string;\r\n  description?: string;\r\n  thumbnail?: string;\r\n}\r\n\r\n// é¡µé¢ç»„ä»¶æ˜ å°„è¡¨\r\nexport const PAGE_OPTIONS: PageOption[] = [\r\n  {\r\n    id: 'TightProjectApplyPage',\r\n    title: 'ç´§å¯†å‹é¡¹ç›®ç”³è¯·',\r\n    componentType: 'page',\r\n    url: 'component:TightProjectApplyPage',\r\n    description: 'ç´§å¯†å‹é¡¹ç›®ç”³è¯·é¡µé¢ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯ã€ç»“ç®—ä¿¡æ¯ã€æ–½å·¥ç­ç»„ç­‰',\r\n  },\r\n  {\r\n    id: 'ContractTightPage',\r\n    title: 'ï¼ˆç´§å¯†å‹å•é¡¹ï¼‰æ”¶å…¥åˆåŒèµ·æ‹Ÿ',\r\n    componentType: 'page',\r\n    url: 'component:ContractTightPage',\r\n    description: 'ç´§å¯†å‹å•é¡¹æ”¶å…¥åˆåŒèµ·æ‹Ÿé¡µé¢ï¼ŒåŒ…å«åˆåŒä¿¡æ¯ã€å®¢æˆ·ä¿¡æ¯ã€åˆåŒå†…å®¹ã€äº¤ä»˜ä¿¡æ¯ç­‰',\r\n  },\r\n  {\r\n    id: 'ConstructionTeamAddPage',\r\n    title: 'æ–½å·¥ç­ç»„ç”³è¯·',\r\n    componentType: 'page',\r\n    url: 'component:ConstructionTeamAddPage',\r\n    description: 'æ–½å·¥ç­ç»„ç”³è¯·é¡µé¢ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯ã€äº¤ä»˜äººå‘˜ã€å¯ç”¨çŠ¶æ€ç­‰',\r\n  },\r\n  {\r\n    id: 'ForeignTaxReimbursementPage',\r\n    title: 'å¤–ç»è¯ç¨é‡‘æŠ¥é”€ç”³è¯·',\r\n    componentType: 'page',\r\n    url: 'component:ForeignTaxReimbursementPage',\r\n    description: 'å¤–ç»è¯ç¨é‡‘æŠ¥é”€ç”³è¯·é¡µé¢ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯ã€è´¦å·æ¸…å•ã€ç”³è¯·æ˜ç»†ç­‰',\r\n  },\r\n  {\r\n    id: 'TightHandoverListPage',\r\n    title: 'æ–°å¢ç´§å¯†å‹äº¤æ¥æ¸…å•',\r\n    componentType: 'page',\r\n    url: 'component:TightHandoverListPage',\r\n    description: 'æ–°å¢ç´§å¯†å‹äº¤æ¥æ¸…å•é¡µé¢ï¼ŒåŒ…å«é¡¹ç›®æ¦‚è§ˆã€è´¹ç”¨ç»“ç®—ã€ä¿é™©ç¼´çº³ã€ç­ç»„åˆåŒç­‰',\r\n  },\r\n  {\r\n    id: 'InvoiceApplyPage',\r\n    title: 'é¡¹ç›®å¼€ç¥¨ç”³è¯·',\r\n    componentType: 'page',\r\n    url: 'component:InvoiceApplyPage',\r\n    description: 'é¡¹ç›®å¼€ç¥¨ç”³è¯·é¡µé¢ï¼ŒåŒ…å«å‘ç¥¨ä¿¡æ¯ã€æ˜ç»†ä¿¡æ¯ç­‰',\r\n  },\r\n  {\r\n    id: 'SettlementApplyPage',\r\n    title: 'ç»“ç®—å•ç”³è¯·',\r\n    componentType: 'page',\r\n    url: 'component:SettlementApplyPage',\r\n    description: 'ç»“ç®—å•ç”³è¯·é¡µé¢ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯ã€ç»“ç®—ç­ç»„ä¿¡æ¯ã€æ”¶å…¥ä¿¡æ¯ã€è´¹ç”¨æ‰£é™¤ã€æ”¯ä»˜ä¿¡æ¯ç­‰',\r\n  },\r\n  {\r\n    id: 'PaymentOffsetSettlementPage',\r\n    title: 'å›æ¬¾å†²é”€ç»“ç®—å•ç”³è¯·',\r\n    componentType: 'page',\r\n    url: 'component:PaymentOffsetSettlementPage',\r\n    description:\r\n      'å›æ¬¾å†²é”€ç»“ç®—å•ç”³è¯·é¡µé¢ï¼ŒåŒ…å«åŸºæœ¬ä¿¡æ¯ã€ç»“ç®—ç­ç»„ä¿¡æ¯ã€æ”¶å…¥ä¿¡æ¯ã€è´¹ç”¨æ‰£é™¤ã€æ”¯ä»˜ä¿¡æ¯ç­‰',\r\n  },\r\n  {\r\n    id: 'ContractDraftPage',\r\n    title: 'æ”¶å…¥åˆåŒèµ·æ‹Ÿ',\r\n    componentType: 'page',\r\n    url: 'component:ContractDraftPage',\r\n    description: 'æ”¶å…¥åˆåŒèµ·æ‹Ÿé¡µé¢ï¼ŒåŒ…å«å®¢æˆ·ä¿¡æ¯ã€äº§å“ä¿¡æ¯ã€åˆåŒå†…å®¹ç­‰',\r\n  },\r\n];\r\n\r\ninterface PageSelectorProps {\r\n  visible: boolean;\r\n  onSelect: (page: PageOption) => void;\r\n  onClose: () => void;\r\n  triggerRef?: React.RefObject<HTMLElement>;\r\n}\r\n\r\nexport function PageSelector({ visible, onSelect, onClose }: Omit<PageSelectorProps, 'triggerRef'>) {\r\n  // Use generic ref for click outside\r\n  const popoverRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      // If clicking on overlay (outside the modal content)\r\n      if (popoverRef.current && !popoverRef.current.contains(event.target as Node)) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (visible) {\r\n      // Add small timeout to prevent immediate closing if the trigger click bubbles up\r\n      setTimeout(() => {\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n      }, 0);\r\n\r\n      return () => {\r\n        document.removeEventListener('mousedown', handleClickOutside);\r\n      };\r\n    }\r\n  }, [visible, onClose]);\r\n\r\n  if (!visible) return null;\r\n\r\n  const popoverContent = (\r\n    <>\r\n      <div className=\"page-selector-overlay\" />\r\n      <div\r\n        className=\"page-selector-popover\"\r\n        ref={popoverRef}\r\n      >\r\n        <div className=\"page-selector-header\" style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <span className=\"page-selector-title\">é€‰æ‹©å…³è”é¡µé¢</span>\r\n          <button\r\n            onClick={onClose}\r\n            style={{ border: 'none', background: 'transparent', cursor: 'pointer', fontSize: '18px', color: '#94a3b8', padding: '4px' }}\r\n          >\r\n            Ã—\r\n          </button>\r\n        </div>\r\n        <div className=\"page-selector-list\">\r\n          {PAGE_OPTIONS.map((page) => (\r\n            <div\r\n              key={page.id}\r\n              className=\"page-selector-item\"\r\n              onClick={() => {\r\n                onSelect(page);\r\n                onClose();\r\n              }}\r\n            >\r\n              <div className=\"page-selector-item-icon\">ğŸ“„</div>\r\n              <div className=\"page-selector-item-content\">\r\n                <div className=\"page-selector-item-title\">{page.title}</div>\r\n                {page.description && (\r\n                  <div className=\"page-selector-item-description\">{page.description}</div>\r\n                )}\r\n              </div>\r\n              <div className=\"page-selector-item-arrow\">â†’</div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n\r\n  return createPortal(popoverContent, document.body);\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\ScreenshotViewer\\index.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\common\\BufferedInput.tsx",
    "messages": [
      {
        "ruleId": "react-hooks/set-state-in-effect",
        "severity": 2,
        "message": "Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\components\\common\\BufferedInput.tsx:28:9\n  26 |         // However, if the user switches tables, we MUST update.\n  27 |         // Let's assume controlled component behavior: sync on prop change.\n> 28 |         setValue(initialValue);\n     |         ^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |         isDirty.current = false;\n  30 |     }, [initialValue]);\n  31 |",
        "line": 28,
        "column": 9,
        "nodeType": null,
        "endLine": 28,
        "endColumn": 17
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import React, { useState, useEffect, useRef } from 'react';\r\n\r\ninterface BufferedInputProps\r\n    extends Omit<React.InputHTMLAttributes<HTMLInputElement>, 'onChange'> {\r\n    value: string;\r\n    onCommit: (value: string) => void;\r\n    className?: string;\r\n    placeholder?: string;\r\n}\r\n\r\nexport const BufferedInput: React.FC<BufferedInputProps> = ({\r\n    value: initialValue,\r\n    onCommit,\r\n    className,\r\n    placeholder,\r\n    ...props\r\n}) => {\r\n    const [value, setValue] = useState(initialValue);\r\n    const [isComposing, setIsComposing] = useState(false);\r\n    const isDirty = useRef(false);\r\n\r\n    useEffect(() => {\r\n        // Only update local value from props if we are NOT currently editing (focused) ?\r\n        // Actually, usually we want to sync if external source changes.\r\n        // But for a buffered input, if the user is typing, we might not want to overwrite their work.\r\n        // However, if the user switches tables, we MUST update.\r\n        // Let's assume controlled component behavior: sync on prop change.\r\n        setValue(initialValue);\r\n        isDirty.current = false;\r\n    }, [initialValue]);\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        setValue(e.target.value);\r\n        isDirty.current = true;\r\n    };\r\n\r\n    const handleBlur = () => {\r\n        if (isDirty.current) {\r\n            onCommit(value);\r\n            isDirty.current = false;\r\n        }\r\n    };\r\n\r\n    const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (e.key === 'Enter' && !isComposing) {\r\n            // Prevent form submission if any\r\n            e.preventDefault();\r\n            e.currentTarget.blur(); // This will trigger handleBlur\r\n        }\r\n        if (props.onKeyDown) {\r\n            props.onKeyDown(e);\r\n        }\r\n    };\r\n\r\n    const handleCompositionStart = () => {\r\n        setIsComposing(true);\r\n    };\r\n\r\n    const handleCompositionEnd = () => {\r\n        setIsComposing(false);\r\n    };\r\n\r\n    return (\r\n        <input\r\n            {...props}\r\n            className={className}\r\n            value={value}\r\n            onChange={handleChange}\r\n            onBlur={handleBlur}\r\n            onKeyDown={handleKeyDown}\r\n            onCompositionStart={handleCompositionStart}\r\n            onCompositionEnd={handleCompositionEnd}\r\n            placeholder={placeholder}\r\n        />\r\n    );\r\n};\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\config\\iframeMapping.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\hooks\\useAutoSave.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'EdgeMarkerType' is defined but never used.",
        "line": 2,
        "column": 22,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 36
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 51,
        "column": 40,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 51,
        "endColumn": 43,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                1562,
                1565
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                1562,
                1565
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useRef, useCallback, useEffect } from 'react';\r\nimport { Node, Edge, EdgeMarkerType } from '@xyflow/react';\r\nimport { safeDeepCopy } from '../utils/deepCopy';\r\nimport { FlowNodeData, FlowDefinition, FlowConnector } from '../types/flow';\r\n\r\n\r\nconst autoSaveFilter = (key: string) => {\r\n  return !key.startsWith('__') && key !== 'measured' && key !== 'internals';\r\n};\r\n\r\n\r\nexport interface UseAutoSaveReturn {\r\n  triggerAutoSave: (newNodes?: Node<FlowNodeData>[], newEdges?: Edge[]) => void;\r\n  saveNow: () => void;\r\n  getFlowData: () => FlowDefinition;\r\n}\r\n\r\n/**\r\n * è‡ªå®šä¹‰ Hookï¼šç®¡ç†æµç¨‹å›¾æ•°æ®çš„è‡ªåŠ¨ä¿å­˜åˆ° LocalStorage\r\n *\r\n * @param nodes å½“å‰èŠ‚ç‚¹æ•°ç»„\r\n * @param edges å½“å‰è¾¹æ•°ç»„\r\n * @param isUndoRedoActive æ˜¯å¦æ­£åœ¨æ‰§è¡Œæ’¤é”€/é‡åšæ“ä½œ\r\n * @param storageKey LocalStorage å­˜å‚¨é”®å\r\n * @param debounceMs é˜²æŠ–å»¶è¿Ÿæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\r\n * @returns è‡ªåŠ¨ä¿å­˜ç®¡ç†æ¥å£\r\n */\r\nexport function useAutoSave(\r\n  nodes: Node<FlowNodeData>[],\r\n  edges: Edge[],\r\n  isUndoRedoActive: () => boolean,\r\n  storageKey: string = 'saved-flow-data',\r\n  debounceMs: number = 1000,\r\n): UseAutoSaveReturn {\r\n  const autoSaveTimerRef = useRef<NodeJS.Timeout | null>(null);\r\n  const nodesRef = useRef(nodes);\r\n  const edgesRef = useRef(edges);\r\n\r\n  // æ›´æ–° refs\r\n  useEffect(() => {\r\n    nodesRef.current = nodes;\r\n    edgesRef.current = edges;\r\n  }, [nodes, edges]);\r\n\r\n  // è½¬æ¢ä¸ºæµç¨‹æ•°æ®æ ¼å¼\r\n  const convertToFlowData = useCallback((currentNodes: Node<FlowNodeData>[], currentEdges: Edge[]) => {\r\n    // 1. è½¬æ¢èŠ‚ç‚¹\r\n    const exportNodes = currentNodes.map((node) => {\r\n      // åˆ†ç»„èŠ‚ç‚¹ç‰¹æ®Šå¤„ç†\r\n      if (node.type === 'group') {\r\n        const groupData = node.data as any;\r\n        return {\r\n          id: node.id,\r\n          name: groupData.label || 'åˆ†ç»„',\r\n          type: 'group' as const,\r\n          position: node.position,\r\n          size: {\r\n            width: typeof node.style?.width === 'number' ? node.style.width : 200,\r\n            height: typeof node.style?.height === 'number' ? node.style.height : 150,\r\n          },\r\n          style: safeDeepCopy(node.style, undefined, autoSaveFilter) as React.CSSProperties | undefined,\r\n          expandable: false,\r\n          // åˆ†ç»„èŠ‚ç‚¹ä¸“ç”¨å­—æ®µ\r\n          label: groupData.label,\r\n          color: groupData.color,\r\n        };\r\n      }\r\n\r\n      // æ™®é€šèŠ‚ç‚¹\r\n      return {\r\n        id: node.id,\r\n        name: node.data.name,\r\n        description: node.data.description,\r\n        type: node.data.type,\r\n        position: node.position,\r\n        size: {\r\n          width: typeof node.style?.width === 'number' ? node.style.width : (node.measured?.width || 150),\r\n          height: typeof node.style?.height === 'number' ? node.style.height : (node.measured?.height || 40),\r\n        },\r\n        style: safeDeepCopy(node.style, undefined, autoSaveFilter) as React.CSSProperties | undefined,\r\n        expandable: node.data.expandable,\r\n        detailConfig: safeDeepCopy(node.data.detailConfig, undefined, autoSaveFilter),\r\n        subType: node.data.subType,\r\n        backgroundColor: node.data.backgroundColor,\r\n        parentId: node.parentId, // ä¿å­˜çˆ¶èŠ‚ç‚¹ ID\r\n        relatedNodeIds: node.data.relatedNodeIds,\r\n      };\r\n    });\r\n\r\n    // 2. è½¬æ¢è¿çº¿\r\n    const exportEdges: FlowConnector[] = currentEdges.map((edge) => {\r\n      const edgeData = edge.data || {};\r\n      const exportEdge: FlowConnector = {\r\n        id: edge.id,\r\n        sourceID: edge.source,\r\n        targetID: edge.target,\r\n        sourceHandle: edge.sourceHandle || undefined,\r\n        targetHandle: edge.targetHandle || undefined,\r\n        label: typeof edge.label === 'string' ? edge.label : undefined,\r\n        style: {\r\n          stroke: typeof edge.style?.stroke === 'string' ? edge.style.stroke : undefined,\r\n          strokeWidth: typeof edge.style?.strokeWidth === 'number' ? edge.style.strokeWidth : undefined,\r\n          strokeDasharray: typeof edge.style?.strokeDasharray === 'string' ? edge.style.strokeDasharray : undefined,\r\n        },\r\n        labelStyle: safeDeepCopy(edge.labelStyle, undefined, autoSaveFilter) as React.CSSProperties | undefined,\r\n        labelBgStyle: safeDeepCopy(edge.labelBgStyle, undefined, autoSaveFilter) as React.CSSProperties | undefined,\r\n        data: safeDeepCopy(edge.data, undefined, autoSaveFilter) as Record<string, unknown> | undefined,\r\n      };\r\n\r\n      if (edgeData.notImplemented !== undefined) {\r\n        exportEdge.notImplemented = Boolean(edgeData.notImplemented);\r\n      }\r\n\r\n      if (edge.markerStart) {\r\n        if (typeof edge.markerStart === 'string') {\r\n          exportEdge.markerStart = edge.markerStart;\r\n        } else {\r\n          // Use type assertion to access specific properties of the marker object\r\n          const marker = edge.markerStart as { type: string; color?: string; width?: number; height?: number };\r\n          exportEdge.markerStart = {\r\n            type: marker.type,\r\n            color: marker.color,\r\n            width: marker.width,\r\n            height: marker.height\r\n          };\r\n        }\r\n      }\r\n\r\n      if (edge.markerEnd) {\r\n        if (typeof edge.markerEnd === 'string') {\r\n          exportEdge.markerEnd = edge.markerEnd;\r\n        } else {\r\n          // Use type assertion to access specific properties of the marker object\r\n          const marker = edge.markerEnd as { type: string; color?: string; width?: number; height?: number };\r\n          exportEdge.markerEnd = {\r\n            type: marker.type,\r\n            color: marker.color,\r\n            width: marker.width,\r\n            height: marker.height\r\n          };\r\n        }\r\n      }\r\n\r\n      return exportEdge;\r\n    });\r\n\r\n    return {\r\n      id: 'business-flow-v1',\r\n      name: 'ä¸šåŠ¡æµç¨‹å›¾',\r\n      description: 'è‡ªåŠ¨ä¿å­˜æ—¶é—´: ' + new Date().toLocaleString(),\r\n      nodes: exportNodes,\r\n      connectors: exportEdges,\r\n    };\r\n  }, []);\r\n\r\n  // è·å–å½“å‰æµç¨‹æ•°æ®ï¼ˆä¾›å¤–éƒ¨ä½¿ç”¨ï¼‰\r\n  const getFlowData = useCallback(() => {\r\n    return convertToFlowData(nodesRef.current, edgesRef.current);\r\n  }, [convertToFlowData]);\r\n\r\n  // ä¿å­˜åˆ° LocalStorage\r\n  const saveToStorage = useCallback(\r\n    (flowData: FlowDefinition) => {\r\n      try {\r\n        localStorage.setItem(storageKey, JSON.stringify(flowData));\r\n      } catch (e) {\r\n        console.error('è‡ªåŠ¨ä¿å­˜å¤±è´¥', e);\r\n      }\r\n    },\r\n    [storageKey],\r\n  );\r\n\r\n  // ç«‹å³ä¿å­˜\r\n  const saveNow = useCallback(() => {\r\n    if (isUndoRedoActive()) {\r\n      return;\r\n    }\r\n    const flowData = convertToFlowData(nodesRef.current, edgesRef.current);\r\n    saveToStorage(flowData);\r\n  }, [convertToFlowData, saveToStorage, isUndoRedoActive]);\r\n\r\n  // é˜²æŠ–è‡ªåŠ¨ä¿å­˜\r\n  const triggerAutoSave = useCallback((newNodes?: Node<FlowNodeData>[], newEdges?: Edge[]) => {\r\n    // å¦‚æœæ­£åœ¨æ‰§è¡Œæ’¤é”€/é‡åšï¼Œä¸è§¦å‘è‡ªåŠ¨ä¿å­˜\r\n    if (isUndoRedoActive()) {\r\n      return;\r\n    }\r\n\r\n    // å¦‚æœæä¾›äº†æœ€æ–°çš„æ•°æ®ï¼Œç«‹å³æ›´æ–° ref\r\n    if (newNodes) nodesRef.current = newNodes;\r\n    if (newEdges) edgesRef.current = newEdges;\r\n\r\n    // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨\r\n    if (autoSaveTimerRef.current) {\r\n      clearTimeout(autoSaveTimerRef.current);\r\n    }\r\n\r\n    // è®¾ç½®æ–°çš„å®šæ—¶å™¨\r\n    autoSaveTimerRef.current = setTimeout(() => {\r\n      // ä½¿ç”¨ ref è·å–æœ€æ–°çš„æ•°æ®\r\n      const flowData = convertToFlowData(nodesRef.current, edgesRef.current);\r\n      saveToStorage(flowData);\r\n      autoSaveTimerRef.current = null;\r\n    }, debounceMs);\r\n  }, [isUndoRedoActive, debounceMs, convertToFlowData, saveToStorage]);\r\n\r\n  // ä¿æŒæœ€æ–°çš„ saveNow å¼•ç”¨\r\n  const saveNowRef = useRef(saveNow);\r\n  useEffect(() => {\r\n    saveNowRef.current = saveNow;\r\n  }, [saveNow]);\r\n\r\n  // æ¸…ç†å®šæ—¶å™¨ï¼Œå¹¶åœ¨å¸è½½æ—¶æ£€æŸ¥æ˜¯å¦æœ‰å¾…ä¿å­˜çš„æ›´æ”¹\r\n  useEffect(() => {\r\n    return () => {\r\n      if (autoSaveTimerRef.current) {\r\n        clearTimeout(autoSaveTimerRef.current);\r\n        // å¦‚æœæœ‰æŒ‚èµ·çš„è‡ªåŠ¨ä¿å­˜ï¼Œç»„ä»¶å¸è½½æ—¶ç«‹å³ä¿å­˜\r\n        saveNowRef.current();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    triggerAutoSave,\r\n    saveNow,\r\n    getFlowData,\r\n  };\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\hooks\\useFlowClipboard.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\hooks\\useFlowHandlers.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\hooks\\useFlowHistory.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\hooks\\useFlowOperations.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 150,
        "column": 29,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 150,
        "endColumn": 32,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                5274,
                5277
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                5274,
                5277
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 195,
        "column": 79,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 195,
        "endColumn": 82,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                6836,
                6839
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                6836,
                6839
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 247,
        "column": 75,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 247,
        "endColumn": 78,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                9011,
                9014
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                9011,
                9014
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useCallback } from 'react';\r\nimport { Node, Edge, MarkerType, XYPosition, FitView, getNodesBounds } from '@xyflow/react';\r\nimport { FlowNodeData, FlowDefinition } from '../types/flow';\r\nimport { getLayoutedNodes } from '../utils/layout';\r\nimport {\r\n    saveVersion,\r\n    exportToFile,\r\n    importFromFile,\r\n    isFileSystemAccessSupported,\r\n    saveToLocalFolder,\r\n    getSavedDirectoryHandle,\r\n} from '../utils/flowVersionStorage';\r\n\r\ninterface UseFlowOperationsProps {\r\n    nodes: Node<FlowNodeData>[];\r\n    edges: Edge[];\r\n    setNodes: React.Dispatch<React.SetStateAction<Node<FlowNodeData>[]>>;\r\n    setEdges: React.Dispatch<React.SetStateAction<Edge[]>>;\r\n    screenToFlowPosition: (position: XYPosition) => XYPosition;\r\n    saveHistory: (nodes: Node<FlowNodeData>[], edges: Edge[]) => void;\r\n    triggerAutoSave: () => void;\r\n    getFlowData: () => FlowDefinition;\r\n    fitView: FitView<Node<FlowNodeData>>;\r\n}\r\n\r\nexport function useFlowOperations({\r\n    nodes,\r\n    edges,\r\n    setNodes,\r\n    setEdges,\r\n    screenToFlowPosition,\r\n    saveHistory,\r\n    triggerAutoSave,\r\n    getFlowData,\r\n    fitView,\r\n}: UseFlowOperationsProps) {\r\n\r\n    // æ·»åŠ èŠ‚ç‚¹\r\n    const onAddNode = useCallback(\r\n        (type: 'process' | 'decision' | 'terminator' | 'data') => {\r\n            const id = `new_node_${Date.now()}`;\r\n            const name =\r\n                type === 'process'\r\n                    ? 'æ–°æµç¨‹èŠ‚ç‚¹'\r\n                    : type === 'decision'\r\n                        ? 'æ–°åˆ¤æ–­èŠ‚ç‚¹'\r\n                        : type === 'data'\r\n                            ? 'æ–°æ•°æ®èŠ‚ç‚¹'\r\n                            : 'æ–°å¼€å§‹èŠ‚ç‚¹';\r\n\r\n            const defaultDetailConfig = {\r\n                description: 'è¯·ç‚¹å‡»æ­¤å¤„ç¼–è¾‘æè¿°...',\r\n                databaseTables: [],\r\n            };\r\n\r\n            const position = screenToFlowPosition({\r\n                x: window.innerWidth / 2 + Math.random() * 50,\r\n                y: window.innerHeight / 2 + Math.random() * 50,\r\n            });\r\n\r\n            const defaultSize = { width: 120, height: 60 };\r\n\r\n            const isTerminator = type === 'terminator';\r\n            const isProcess = type === 'process';\r\n            const isDecision = type === 'decision';\r\n            const defaultBorderColor = '#cbd5e1';\r\n            const defaultBackgroundColor = isTerminator\r\n                ? '#dcfce7'\r\n                : isProcess || isDecision\r\n                    ? '#FFFFFF'\r\n                    : undefined;\r\n\r\n            const newNode: Node<FlowNodeData> = {\r\n                id,\r\n                type: 'custom',\r\n                position,\r\n                style: {\r\n                    width: defaultSize.width,\r\n                    height: defaultSize.height,\r\n                    fontSize: 9,\r\n                    borderColor: defaultBorderColor,\r\n                    ...(defaultBackgroundColor\r\n                        ? { background: defaultBackgroundColor, backgroundColor: defaultBackgroundColor }\r\n                        : {}),\r\n                },\r\n                data: {\r\n                    id,\r\n                    name,\r\n                    type,\r\n                    expandable: true,\r\n                    detailConfig: defaultDetailConfig,\r\n                    ...(isDecision ? { backgroundColor: '#FFFFFF' } : {}),\r\n                    ...(isTerminator ? { subType: 'start' as const } : {}),\r\n                },\r\n            };\r\n\r\n            setNodes((nds) => {\r\n                const newNodes = nds.concat(newNode);\r\n                setTimeout(() => {\r\n                    saveHistory(newNodes, edges);\r\n                }, 0);\r\n                setTimeout(() => {\r\n                    triggerAutoSave();\r\n                }, 0);\r\n                return newNodes;\r\n            });\r\n        },\r\n        [setNodes, screenToFlowPosition, edges, saveHistory, triggerAutoSave],\r\n    );\r\n\r\n    // è‡ªåŠ¨å¸ƒå±€\r\n    const onLayout = useCallback(\r\n        async (direction: 'TB' | 'LR' = 'TB') => {\r\n            try {\r\n                const layoutedNodes = await getLayoutedNodes(nodes, edges, direction);\r\n                setNodes([...layoutedNodes]);\r\n\r\n                setTimeout(() => {\r\n                    fitView({ padding: 0.2, duration: 400 });\r\n                }, 100);\r\n            } catch (error) {\r\n                console.error('å¸ƒå±€å¤±è´¥:', error);\r\n            }\r\n        },\r\n        [nodes, edges, setNodes, fitView],\r\n    );\r\n\r\n    // ä¿å­˜åŠŸèƒ½\r\n    const onSave = useCallback(async () => {\r\n        const flowData = getFlowData();\r\n\r\n        if (isFileSystemAccessSupported()) {\r\n            try {\r\n                const existingHandle = getSavedDirectoryHandle();\r\n                const isFirstTime = !existingHandle;\r\n\r\n                const result = await saveToLocalFolder(flowData);\r\n                const saveTime = new Date(result.timestamp).toLocaleString();\r\n\r\n                alert(\r\n                    `ä¿å­˜æˆåŠŸï¼\\n\\n` +\r\n                    `å­˜å‚¨ä½ç½®ï¼š${result.folderName}/\\n` +\r\n                    `æ–‡ä»¶åï¼š${result.filename}\\n` +\r\n                    `ä¿å­˜æ—¶é—´ï¼š${saveTime}\\n` +\r\n                    `å½“å‰æ–‡ä»¶æ•°ï¼š${result.fileCount} ä¸ª\\n\\n` +\r\n                    (isFirstTime\r\n                        ? `æç¤ºï¼šåç»­ç‚¹å‡»ä¿å­˜å°†è‡ªåŠ¨ä¿å­˜åˆ°æ­¤æ–‡ä»¶å¤¹ã€‚\\nå¦‚éœ€æ›´æ¢æ–‡ä»¶å¤¹ï¼Œè¯·åˆ·æ–°é¡µé¢åé‡æ–°ä¿å­˜ã€‚`\r\n                        : `æ–‡ä»¶å·²ä¿å­˜åˆ°æœ¬åœ°ç£ç›˜ï¼Œå¯ç›´æ¥åœ¨æ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹ã€‚`),\r\n                );\r\n            } catch (error: any) {\r\n                if (error.message === 'æœªé€‰æ‹©ä¿å­˜ç›®å½•') {\r\n                    return;\r\n                }\r\n                console.error('ä¿å­˜å¤±è´¥:', error);\r\n                alert('ä¿å­˜å¤±è´¥ï¼š' + error.message);\r\n            }\r\n        } else {\r\n            try {\r\n                const result = await saveVersion(flowData);\r\n                const saveTime = new Date(result.timestamp).toLocaleString();\r\n                alert(\r\n                    `ä¿å­˜æˆåŠŸï¼\\n\\n` +\r\n                    `å­˜å‚¨ä½ç½®ï¼šæµè§ˆå™¨ IndexedDB\\n` +\r\n                    `æ•°æ®åº“åï¼šflow-versions-db\\n` +\r\n                    `ç‰ˆæœ¬åç§°ï¼š${result.name}\\n` +\r\n                    `ä¿å­˜æ—¶é—´ï¼š${saveTime}\\n` +\r\n                    `å½“å‰ç‰ˆæœ¬æ•°ï¼š${result.currentCount}/${result.maxVersions}\\n\\n` +\r\n                    `æ³¨æ„ï¼šæ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæœ¬åœ°æ–‡ä»¶å¤¹ä¿å­˜ï¼Œæ•°æ®å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­ã€‚\\n` +\r\n                    `æ¸…é™¤æµè§ˆå™¨ç«™ç‚¹æ•°æ®ä¼šå¯¼è‡´ç‰ˆæœ¬ä¸¢å¤±ã€‚\\n` +\r\n                    `å¦‚éœ€æ°¸ä¹…ä¿å­˜ï¼Œè¯·ä½¿ç”¨\"å¯¼å‡º\"åŠŸèƒ½ä¸‹è½½ JSON æ–‡ä»¶ã€‚`,\r\n                );\r\n            } catch (error) {\r\n                console.error('ä¿å­˜å¤±è´¥:', error);\r\n                alert('ä¿å­˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ã€‚');\r\n            }\r\n        }\r\n    }, [getFlowData]);\r\n\r\n    // å¯¼å‡ºåŠŸèƒ½\r\n    const onExport = useCallback(() => {\r\n        const flowData = getFlowData();\r\n        exportToFile(flowData);\r\n    }, [getFlowData]);\r\n\r\n    // å¯¼å…¥åŠŸèƒ½\r\n    const onImport = useCallback(async () => {\r\n        try {\r\n            const data = await importFromFile();\r\n\r\n            if (!data.nodes || !data.connectors) {\r\n                alert('æ— æ•ˆçš„æµç¨‹å›¾æ–‡ä»¶æ ¼å¼');\r\n                return;\r\n            }\r\n\r\n            const importedNodes: Node<FlowNodeData>[] = data.nodes.map((node: any) => {\r\n                // åˆ†ç»„èŠ‚ç‚¹ç‰¹æ®Šå¤„ç†\r\n                if (node.type === 'group') {\r\n                    return {\r\n                        id: node.id,\r\n                        type: 'group',\r\n                        position: node.position || { x: 0, y: 0 },\r\n                        style: node.style || {\r\n                            width: node.size?.width || 200,\r\n                            height: node.size?.height || 150,\r\n                        },\r\n                        data: {\r\n                            id: node.id,\r\n                            label: node.label || node.name,\r\n                            color: node.color || '#3b82f6',\r\n                            // FlowNodeData å¿…éœ€å­—æ®µ\r\n                            name: node.label || node.name || 'åˆ†ç»„',\r\n                            type: 'group' as const,\r\n                            expandable: false,\r\n                        },\r\n                        zIndex: -1,\r\n                    };\r\n                }\r\n\r\n                // æ™®é€šèŠ‚ç‚¹\r\n                return {\r\n                    id: node.id,\r\n                    type: 'custom',\r\n                    position: node.position || { x: 0, y: 0 },\r\n                    style: node.style,\r\n                    parentId: node.parentId,\r\n                    extent: node.parentId ? ('parent' as const) : undefined,\r\n                    data: {\r\n                        id: node.id,\r\n                        name: node.name,\r\n                        type: node.type,\r\n                        expandable: node.expandable,\r\n                        detailConfig: node.detailConfig,\r\n                        subType: node.subType,\r\n                        backgroundColor: node.backgroundColor,\r\n                        relatedNodeIds: node.relatedNodeIds,\r\n                    },\r\n                };\r\n            });\r\n\r\n            // ç¡®ä¿åˆ†ç»„èŠ‚ç‚¹åœ¨å‰é¢\r\n            importedNodes.sort((a, b) => {\r\n                if (a.type === 'group' && b.type !== 'group') return -1;\r\n                if (a.type !== 'group' && b.type === 'group') return 1;\r\n                return 0;\r\n            });\r\n\r\n            const importedEdges: Edge[] = data.connectors.map((connector: any) => ({\r\n                id: connector.id,\r\n                source: connector.sourceID,\r\n                target: connector.targetID,\r\n                sourceHandle: connector.sourceHandle,\r\n                targetHandle: connector.targetHandle,\r\n                type: 'draggable',\r\n                label: connector.label,\r\n                style: connector.style,\r\n                labelStyle: connector.labelStyle,\r\n                labelBgStyle: connector.labelBgStyle,\r\n                data: connector.data,\r\n                markerStart: connector.markerStart,\r\n                markerEnd: connector.markerEnd || {\r\n                    type: MarkerType.ArrowClosed,\r\n                    color: connector.style?.stroke || '#64748b',\r\n                    width: 16,\r\n                    height: 16,\r\n                },\r\n            }));\r\n\r\n            setNodes(importedNodes);\r\n            setEdges(importedEdges);\r\n            saveHistory(importedNodes, importedEdges);\r\n\r\n            alert('å¯¼å…¥æˆåŠŸï¼');\r\n        } catch (error) {\r\n            console.error('å¯¼å…¥å¤±è´¥:', error);\r\n            alert('å¯¼å…¥å¤±è´¥ï¼š' + (error as Error).message);\r\n        }\r\n    }, [setNodes, setEdges, saveHistory]);\r\n\r\n    // åˆ›å»ºåˆ†ç»„ï¼ˆå°†é€‰ä¸­èŠ‚ç‚¹æ‰“åŒ…æˆåˆ†ç»„ï¼‰\r\n    const onCreateGroup = useCallback(() => {\r\n        // è·å–é€‰ä¸­çš„æ™®é€šèŠ‚ç‚¹ï¼ˆæ’é™¤åˆ†ç»„èŠ‚ç‚¹ï¼‰\r\n        const selectedNodes = nodes.filter(\r\n            (n) => n.selected && n.type === 'custom'\r\n        );\r\n\r\n        if (selectedNodes.length < 1) {\r\n            alert('è¯·å…ˆé€‰æ‹©è‡³å°‘ 1 ä¸ªèŠ‚ç‚¹æ¥åˆ›å»ºåˆ†ç»„');\r\n            return;\r\n        }\r\n\r\n        // è®¡ç®—åŒ…å›´ç›’\r\n        const bounds = getNodesBounds(selectedNodes);\r\n        const padding = 40;\r\n        const headerHeight = 36;\r\n\r\n        // åˆ›å»ºåˆ†ç»„èŠ‚ç‚¹\r\n        const groupId = `group_${Date.now()}`;\r\n        const groupNode: Node<FlowNodeData> = {\r\n            id: groupId,\r\n            type: 'group',\r\n            position: {\r\n                x: bounds.x - padding,\r\n                y: bounds.y - padding - headerHeight,\r\n            },\r\n            style: {\r\n                width: bounds.width + padding * 2,\r\n                height: bounds.height + padding * 2 + headerHeight,\r\n            },\r\n            data: {\r\n                id: groupId,\r\n                label: 'æ–°åˆ†ç»„',\r\n                color: '#3b82f6',\r\n                // FlowNodeData å¿…éœ€å­—æ®µ\r\n                name: 'æ–°åˆ†ç»„',\r\n                type: 'group',\r\n                expandable: false,\r\n            },\r\n            zIndex: -1, // åˆ†ç»„åœ¨åº•å±‚\r\n        };\r\n\r\n        // æ›´æ–°å­èŠ‚ç‚¹çš„ parentId å’Œä½ç½®ï¼ˆç›¸å¯¹äºåˆ†ç»„ï¼‰\r\n        const updatedNodes = nodes.map((node) => {\r\n            if (selectedNodes.find((n) => n.id === node.id)) {\r\n                return {\r\n                    ...node,\r\n                    parentId: groupId,\r\n                    extent: 'parent' as const,\r\n                    position: {\r\n                        x: node.position.x - groupNode.position.x,\r\n                        y: node.position.y - groupNode.position.y,\r\n                    },\r\n                    selected: false,\r\n                };\r\n            }\r\n            return { ...node, selected: false };\r\n        });\r\n\r\n        // åˆ†ç»„èŠ‚ç‚¹æ”¾åœ¨æœ€å‰é¢ï¼ˆç¡®ä¿å…ˆæ¸²æŸ“ï¼‰\r\n        const newNodes = [groupNode as unknown as Node<FlowNodeData>, ...updatedNodes];\r\n\r\n        setNodes(newNodes);\r\n        saveHistory(newNodes, edges);\r\n        triggerAutoSave();\r\n    }, [nodes, edges, setNodes, saveHistory, triggerAutoSave]);\r\n\r\n    // è§£æ•£åˆ†ç»„\r\n    const onUngroup = useCallback(\r\n        (groupId: string) => {\r\n            const groupNode = nodes.find((n) => n.id === groupId);\r\n            if (!groupNode || groupNode.type !== 'group') return;\r\n\r\n            const updatedNodes = nodes\r\n                .filter((n) => n.id !== groupId) // ç§»é™¤åˆ†ç»„èŠ‚ç‚¹\r\n                .map((node) => {\r\n                    if (node.parentId === groupId) {\r\n                        // å­èŠ‚ç‚¹è½¬ä¸ºç»å¯¹ä½ç½®\r\n                        return {\r\n                            ...node,\r\n                            parentId: undefined,\r\n                            extent: undefined,\r\n                            position: {\r\n                                x: node.position.x + groupNode.position.x,\r\n                                y: node.position.y + groupNode.position.y,\r\n                            },\r\n                        };\r\n                    }\r\n                    return node;\r\n                });\r\n\r\n            setNodes(updatedNodes);\r\n            saveHistory(updatedNodes, edges);\r\n            triggerAutoSave();\r\n        },\r\n        [nodes, edges, setNodes, saveHistory, triggerAutoSave]\r\n    );\r\n\r\n    // æ·»åŠ èŠ‚ç‚¹åˆ°åˆ†ç»„\r\n    const onAddToGroup = useCallback(\r\n        (nodeIds: string[], groupId: string) => {\r\n            const groupNode = nodes.find((n) => n.id === groupId);\r\n            if (!groupNode) return;\r\n\r\n            const updatedNodes = nodes.map((node) => {\r\n                if (nodeIds.includes(node.id) && node.type === 'custom') {\r\n                    return {\r\n                        ...node,\r\n                        parentId: groupId,\r\n                        extent: 'parent' as const,\r\n                        position: {\r\n                            x: node.position.x - groupNode.position.x,\r\n                            y: node.position.y - groupNode.position.y,\r\n                        },\r\n                    };\r\n                }\r\n                return node;\r\n            });\r\n\r\n            setNodes(updatedNodes);\r\n            saveHistory(updatedNodes, edges);\r\n            triggerAutoSave();\r\n        },\r\n        [nodes, edges, setNodes, saveHistory, triggerAutoSave]\r\n    );\r\n\r\n    // ä»åˆ†ç»„ç§»é™¤èŠ‚ç‚¹\r\n    const onRemoveFromGroup = useCallback(\r\n        (nodeId: string) => {\r\n            const node = nodes.find((n) => n.id === nodeId);\r\n            if (!node?.parentId) return;\r\n\r\n            const groupNode = nodes.find((n) => n.id === node.parentId);\r\n            if (!groupNode) return;\r\n\r\n            const updatedNodes = nodes.map((n) => {\r\n                if (n.id === nodeId) {\r\n                    return {\r\n                        ...n,\r\n                        parentId: undefined,\r\n                        extent: undefined,\r\n                        position: {\r\n                            x: n.position.x + groupNode.position.x,\r\n                            y: n.position.y + groupNode.position.y,\r\n                        },\r\n                    };\r\n                }\r\n                return n;\r\n            });\r\n\r\n            setNodes(updatedNodes);\r\n            saveHistory(updatedNodes, edges);\r\n            triggerAutoSave();\r\n        },\r\n        [nodes, edges, setNodes, saveHistory, triggerAutoSave]\r\n    );\r\n\r\n    // æ›´æ–°åˆ†ç»„æ ‡ç­¾\r\n    const onUpdateGroupLabel = useCallback(\r\n        (groupId: string, label: string) => {\r\n            setNodes((nds) =>\r\n                nds.map((node) => {\r\n                    if (node.id === groupId && node.type === 'group') {\r\n                        return {\r\n                            ...node,\r\n                            data: {\r\n                                ...node.data,\r\n                                label,\r\n                            },\r\n                        };\r\n                    }\r\n                    return node;\r\n                })\r\n            );\r\n            triggerAutoSave();\r\n        },\r\n        [setNodes, triggerAutoSave]\r\n    );\r\n\r\n    return {\r\n        onAddNode,\r\n        onLayout,\r\n        onSave,\r\n        onExport,\r\n        onImport,\r\n        onCreateGroup,\r\n        onUngroup,\r\n        onAddToGroup,\r\n        onRemoveFromGroup,\r\n        onUpdateGroupLabel,\r\n    };\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\hooks\\useNodeAlignment.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'nodeMap' is assigned a value but never used.",
        "line": 28,
        "column": 23,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 28,
        "endColumn": 30
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useCallback } from 'react';\r\nimport { Node, Edge, useReactFlow } from '@xyflow/react';\r\nimport { FlowNodeData } from '../types/flow';\r\n\r\nexport interface UseNodeAlignmentProps {\r\n    setNodes: (\r\n        payload: Node<FlowNodeData>[] | ((nodes: Node<FlowNodeData>[]) => Node<FlowNodeData>[])\r\n    ) => void;\r\n    saveHistory: (nodes: Node<FlowNodeData>[], edges: Edge[]) => void;\r\n}\r\n\r\nexport function useNodeAlignment({ setNodes, saveHistory }: UseNodeAlignmentProps) {\r\n    const { getNodes, getEdges } = useReactFlow();\r\n\r\n    const alignNodes = useCallback(\r\n        (type: 'left' | 'center' | 'right' | 'top' | 'middle' | 'bottom' | 'distribute-h' | 'distribute-v') => {\r\n            const allNodes = getNodes() as Node<FlowNodeData>[];\r\n            const allEdges = getEdges();\r\n            const selectedNodes = allNodes.filter((n) => n.selected);\r\n\r\n            if (selectedNodes.length < 2) return;\r\n\r\n            // ä¿å­˜å†å²è®°å½•ï¼ˆåœ¨ä¿®æ”¹å‰ï¼‰\r\n            saveHistory(allNodes, allEdges);\r\n\r\n            setNodes((currentNodes) => {\r\n                // åˆ›å»ºèŠ‚ç‚¹æ˜ å°„ä»¥ä¾¿å¿«é€ŸæŸ¥æ‰¾\r\n                const nodeMap = new Map(currentNodes.map((n) => [n.id, n]));\r\n                const targets = currentNodes.filter((n) => n.selected);\r\n\r\n                if (targets.length < 2) return currentNodes;\r\n\r\n                let newNodes = [...currentNodes];\r\n                let hasChanges = false;\r\n\r\n                // è®¡ç®—è¾¹ç•Œ\r\n                let minX = Infinity;\r\n                let maxX = -Infinity;\r\n                let minY = Infinity;\r\n                let maxY = -Infinity;\r\n                let avgX = 0;\r\n                let avgY = 0;\r\n\r\n                targets.forEach((n) => {\r\n                    const w = n.measured?.width || n.width || 0;\r\n                    const h = n.measured?.height || n.height || 0;\r\n                    const x = n.position.x;\r\n                    const y = n.position.y;\r\n\r\n                    minX = Math.min(minX, x);\r\n                    maxX = Math.max(maxX, x + w);\r\n                    minY = Math.min(minY, y);\r\n                    maxY = Math.max(maxY, y + h);\r\n\r\n                    // Center points\r\n                    avgX += x + w / 2;\r\n                    avgY += y + h / 2;\r\n                });\r\n\r\n                avgX /= targets.length;\r\n                avgY /= targets.length;\r\n\r\n                // æ‰§è¡Œå¯¹é½\r\n                switch (type) {\r\n                    case 'left':\r\n                        newNodes = newNodes.map((n) => {\r\n                            if (n.selected) {\r\n                                if (n.position.x !== minX) {\r\n                                    hasChanges = true;\r\n                                    return { ...n, position: { ...n.position, x: minX } };\r\n                                }\r\n                            }\r\n                            return n;\r\n                        });\r\n                        break;\r\n                    case 'right':\r\n                        newNodes = newNodes.map((n) => {\r\n                            if (n.selected) {\r\n                                const w = n.measured?.width || n.width || 0;\r\n                                const newX = maxX - w;\r\n                                if (n.position.x !== newX) {\r\n                                    hasChanges = true;\r\n                                    return { ...n, position: { ...n.position, x: newX } };\r\n                                }\r\n                            }\r\n                            return n;\r\n                        });\r\n                        break;\r\n                    case 'center': // æ°´å¹³å±…ä¸­\r\n                        newNodes = newNodes.map((n) => {\r\n                            if (n.selected) {\r\n                                const w = n.measured?.width || n.width || 0;\r\n                                const newX = avgX - w / 2;\r\n                                if (n.position.x !== newX) {\r\n                                    hasChanges = true;\r\n                                    return { ...n, position: { ...n.position, x: newX } };\r\n                                }\r\n                            }\r\n                            return n;\r\n                        });\r\n                        break;\r\n\r\n                    case 'top':\r\n                        newNodes = newNodes.map((n) => {\r\n                            if (n.selected) {\r\n                                if (n.position.y !== minY) {\r\n                                    hasChanges = true;\r\n                                    return { ...n, position: { ...n.position, y: minY } };\r\n                                }\r\n                            }\r\n                            return n;\r\n                        });\r\n                        break;\r\n                    case 'bottom':\r\n                        newNodes = newNodes.map((n) => {\r\n                            if (n.selected) {\r\n                                const h = n.measured?.height || n.height || 0;\r\n                                const newY = maxY - h;\r\n                                if (n.position.y !== newY) {\r\n                                    hasChanges = true;\r\n                                    return { ...n, position: { ...n.position, y: newY } };\r\n                                }\r\n                            }\r\n                            return n;\r\n                        });\r\n                        break;\r\n                    case 'middle': // å‚ç›´å±…ä¸­\r\n                        newNodes = newNodes.map((n) => {\r\n                            if (n.selected) {\r\n                                const h = n.measured?.height || n.height || 0;\r\n                                const newY = avgY - h / 2;\r\n                                if (n.position.y !== newY) {\r\n                                    hasChanges = true;\r\n                                    return { ...n, position: { ...n.position, y: newY } };\r\n                                }\r\n                            }\r\n                            return n;\r\n                        });\r\n                        break;\r\n\r\n                    case 'distribute-h': // æ°´å¹³ç­‰é—´è·\r\n                        {\r\n                            // æŒ‰ x åæ ‡æ’åº\r\n                            const sorted = [...targets].sort((a, b) => a.position.x - b.position.x);\r\n                            if (sorted.length < 3) break; // è‡³å°‘3ä¸ªç‚¹æ‰æœ‰å¤šä½™ç©ºéš™\r\n\r\n                            const first = sorted[0];\r\n                            const last = sorted[sorted.length - 1];\r\n                            const totalDist = last.position.x - first.position.x;\r\n                            const interval = totalDist / (sorted.length - 1);\r\n\r\n                            const newPositions = new Map<string, number>();\r\n                            sorted.forEach((n, i) => {\r\n                                newPositions.set(n.id, first.position.x + interval * i);\r\n                            });\r\n\r\n                            newNodes = newNodes.map(n => {\r\n                                if (newPositions.has(n.id)) {\r\n                                    const newX = newPositions.get(n.id)!;\r\n                                    if (Math.abs(n.position.x - newX) > 0.1) {\r\n                                        hasChanges = true;\r\n                                        return { ...n, position: { ...n.position, x: newX } };\r\n                                    }\r\n                                }\r\n                                return n;\r\n                            });\r\n                        }\r\n                        break;\r\n\r\n                    case 'distribute-v': // å‚ç›´ç­‰é—´è·\r\n                        {\r\n                            // æŒ‰ y åæ ‡æ’åº\r\n                            const sorted = [...targets].sort((a, b) => a.position.y - b.position.y);\r\n                            if (sorted.length < 3) break;\r\n\r\n                            const first = sorted[0];\r\n                            const last = sorted[sorted.length - 1];\r\n                            const totalDist = last.position.y - first.position.y;\r\n                            const interval = totalDist / (sorted.length - 1);\r\n\r\n                            const newPositions = new Map<string, number>();\r\n                            sorted.forEach((n, i) => {\r\n                                newPositions.set(n.id, first.position.y + interval * i);\r\n                            });\r\n\r\n                            newNodes = newNodes.map(n => {\r\n                                if (newPositions.has(n.id)) {\r\n                                    const newY = newPositions.get(n.id)!;\r\n                                    if (Math.abs(n.position.y - newY) > 0.1) {\r\n                                        hasChanges = true;\r\n                                        return { ...n, position: { ...n.position, y: newY } };\r\n                                    }\r\n                                }\r\n                                return n;\r\n                            });\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                return hasChanges ? newNodes : currentNodes;\r\n            });\r\n        },\r\n        [getNodes, getEdges, setNodes, saveHistory]\r\n    );\r\n\r\n    return { alignNodes };\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\main.tsx",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\pages\\BusinessFlowVisualization\\index.tsx",
    "messages": [
      {
        "ruleId": "react-hooks/immutability",
        "severity": 2,
        "message": "Error: Cannot access variable before it is declared\n\n`loadFlowData` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\pages\\BusinessFlowVisualization\\index.tsx:47:5\n  45 |   // åŠ è½½æµç¨‹æ•°æ®\n  46 |   useEffect(() => {\n> 47 |     loadFlowData();\n     |     ^^^^^^^^^^^^ `loadFlowData` accessed before it is declared\n  48 |   }, []);\n  49 |\n  50 |   // å¤„ç†æµç¨‹æ•°æ®\n\nE:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\pages\\BusinessFlowVisualization\\index.tsx:205:3\n  203 |   };\n  204 |\n> 205 |   const loadFlowData = async () => {\n      |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 206 |     try {\n      | ^^^^^^^^^\n> 207 |       // 1. å°è¯•ä» LocalStorage åŠ è½½\n      â€¦\n      | ^^^^^^^^^\n> 233 |     }\n      | ^^^^^^^^^\n> 234 |   };\n      | ^^^^^ `loadFlowData` is declared here\n  235 |\n  236 |   const toggleSubflows = () => {\n  237 |     setShowSubflows(!showSubflows);",
        "line": 47,
        "column": 5,
        "nodeType": null,
        "endLine": 47,
        "endColumn": 17
      },
      {
        "ruleId": "react-hooks/exhaustive-deps",
        "severity": 1,
        "message": "React Hook useEffect has a missing dependency: 'loadFlowData'. Either include it or remove the dependency array.",
        "line": 48,
        "column": 6,
        "nodeType": "ArrayExpression",
        "endLine": 48,
        "endColumn": 8,
        "suggestions": [
          {
            "desc": "Update the dependencies array to be: [loadFlowData]",
            "fix": {
              "range": [
                1675,
                1677
              ],
              "text": "[loadFlowData]"
            }
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 68,
        "column": 16,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 68,
        "endColumn": 19,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                2291,
                2294
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                2291,
                2294
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 84,
        "column": 33,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 84,
        "endColumn": 36,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                2725,
                2728
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                2725,
                2728
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { useState, useEffect } from 'react';\r\nimport { FlowCanvas } from '../../components/FlowCanvas';\r\nimport { Node, Edge } from '@xyflow/react';\r\nimport { FlowDefinition, FlowNodeData } from '../../types/flow';\r\nimport './styles.css';\r\n\r\nexport function BusinessFlowVisualization() {\r\n  const [allNodes, setAllNodes] = useState<Node<FlowNodeData>[]>([]);\r\n  const [allEdges, setAllEdges] = useState<Edge[]>([]);\r\n  const [nodes, setNodes] = useState<Node<FlowNodeData>[]>([]);\r\n  const [edges, setEdges] = useState<Edge[]>([]);\r\n  const [showSubflows, setShowSubflows] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // è¿‡æ»¤æ˜¾ç¤ºèŠ‚ç‚¹å’Œè¾¹\r\n  const filterElements = (currentNodes: Node<FlowNodeData>[], currentEdges: Edge[], show: boolean) => {\r\n    if (show) {\r\n      return { nodes: currentNodes, edges: currentEdges };\r\n    } else {\r\n      // éšè—å­æµç¨‹èŠ‚ç‚¹ (type === 'subprocess')\r\n      const visibleNodes = currentNodes.filter((n) => n.data.type !== 'subprocess');\r\n      const visibleNodeIds = new Set(visibleNodes.map((n) => n.id));\r\n\r\n      const visibleEdges = currentEdges.filter(\r\n        (e) => visibleNodeIds.has(e.source) && visibleNodeIds.has(e.target),\r\n      );\r\n\r\n      return { nodes: visibleNodes, edges: visibleEdges };\r\n    }\r\n  };\r\n\r\n  // ç›‘å¬ showSubflows å˜åŒ–ï¼Œæ›´æ–°å¯è§èŠ‚ç‚¹\r\n  useEffect(() => {\r\n    if (allNodes.length > 0) {\r\n      const { nodes: visibleNodes, edges: visibleEdges } = filterElements(\r\n        allNodes,\r\n        allEdges,\r\n        showSubflows,\r\n      );\r\n      setNodes(visibleNodes);\r\n      setEdges(visibleEdges);\r\n    }\r\n  }, [showSubflows, allNodes, allEdges]);\r\n\r\n  // åŠ è½½æµç¨‹æ•°æ®\r\n  useEffect(() => {\r\n    loadFlowData();\r\n  }, []);\r\n\r\n  // å¤„ç†æµç¨‹æ•°æ®\r\n  const processFlowData = (flowDef: FlowDefinition) => {\r\n    // è½¬æ¢èŠ‚ç‚¹\r\n    const flowNodes: Node<FlowNodeData>[] = flowDef.nodes.map((node) => {\r\n      // åˆ†ç»„èŠ‚ç‚¹ç‰¹æ®Šå¤„ç†\r\n      if (node.type === 'group') {\r\n        return {\r\n          id: node.id,\r\n          type: 'group',\r\n          position: node.position,\r\n          style: node.style || {\r\n            width: node.size?.width || 200,\r\n            height: node.size?.height || 150,\r\n          },\r\n          data: {\r\n            id: node.id,\r\n            label: node.label || node.name,\r\n            color: node.color || '#3b82f6',\r\n          } as any,\r\n          zIndex: -1, // åˆ†ç»„åœ¨åº•å±‚\r\n        };\r\n      }\r\n\r\n      // æ™®é€šèŠ‚ç‚¹\r\n      return {\r\n        id: node.id,\r\n        type: 'custom',\r\n        position: node.position,\r\n        style: node.style,\r\n        parentId: node.parentId, // åŠ è½½çˆ¶èŠ‚ç‚¹ ID\r\n        extent: node.parentId ? ('parent' as const) : undefined, // å¦‚æœæœ‰çˆ¶èŠ‚ç‚¹ï¼Œé™åˆ¶åœ¨çˆ¶èŠ‚ç‚¹èŒƒå›´å†…\r\n        data: {\r\n          id: node.id,\r\n          name: node.name,\r\n          description: (node as any).description, // åŠ è½½èŠ‚ç‚¹æè¿°\r\n          type: node.type,\r\n          expandable: node.expandable,\r\n          detailConfig: node.detailConfig,\r\n          subType: node.subType, // åŠ è½½èµ·æ­¢èŠ‚ç‚¹çš„å­ç±»å‹\r\n          backgroundColor: node.backgroundColor, // åŠ è½½èŠ‚ç‚¹èƒŒæ™¯è‰²ï¼ˆç‰¹åˆ«æ˜¯åˆ¤æ–­èŠ‚ç‚¹ï¼‰\r\n          relatedNodeIds: node.relatedNodeIds, // åŠ è½½å…³è”èŠ‚ç‚¹ ID\r\n        },\r\n      };\r\n    });\r\n\r\n    // ç¡®ä¿åˆ†ç»„èŠ‚ç‚¹åœ¨å‰é¢ï¼ˆReact Flow è¦æ±‚çˆ¶èŠ‚ç‚¹åœ¨å­èŠ‚ç‚¹å‰é¢ï¼‰\r\n    flowNodes.sort((a, b) => {\r\n      if (a.type === 'group' && b.type !== 'group') return -1;\r\n      if (a.type !== 'group' && b.type === 'group') return 1;\r\n      return 0;\r\n    });\r\n\r\n    // è½¬æ¢è¿æ¥çº¿\r\n    // ç®€åŒ–åŠ è½½é€»è¾‘ï¼šç›´æ¥ä½¿ç”¨ä¿å­˜çš„ handle IDï¼Œä¸åšå¤æ‚çš„æ˜ å°„\r\n    // è¿™æ ·å¯ä»¥æ”¯æŒä»»æ„ä¸¤ä¸ª handle ä¹‹é—´çš„è¿æ¥\r\n    const flowEdges: Edge[] = flowDef.connectors\r\n      .filter((conn) => {\r\n        // è¿‡æ»¤æ‰æºèŠ‚ç‚¹æˆ–ç›®æ ‡èŠ‚ç‚¹ä¸å­˜åœ¨çš„è¿æ¥çº¿\r\n        const sourceNode = flowNodes.find((n) => n.id === conn.sourceID);\r\n        const targetNode = flowNodes.find((n) => n.id === conn.targetID);\r\n        if (!sourceNode || !targetNode) {\r\n          // console.warn(`è¿æ¥çº¿ ${conn.id} çš„æºèŠ‚ç‚¹æˆ–ç›®æ ‡èŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œå·²è·³è¿‡`);\r\n          return false;\r\n        }\r\n        return true;\r\n      })\r\n      .map((conn) => {\r\n        // æ­£ç¡®å¤„ç†ç®­å¤´æ–¹å‘ï¼š\r\n        // - å¦‚æœä¿å­˜çš„æ•°æ®ä¸­æœ‰ markerEndï¼Œä½¿ç”¨å®ƒ\r\n        // - å¦‚æœä¿å­˜çš„æ•°æ®ä¸­æœ‰ markerStartï¼Œä½¿ç”¨å®ƒ\r\n        // - å¦‚æœä¸¤è€…éƒ½æ²¡æœ‰ï¼Œé»˜è®¤ä½¿ç”¨ markerEndï¼ˆæ­£å‘ç®­å¤´ï¼‰\r\n        // - å¦‚æœåªæœ‰ markerStartï¼Œä¸ä½¿ç”¨ markerEndï¼ˆåå‘ç®­å¤´ï¼‰\r\n        // - å¦‚æœä¸¤è€…éƒ½æœ‰ï¼Œä½¿ç”¨ä¸¤è€…ï¼ˆåŒå‘ç®­å¤´ï¼‰\r\n        let markerEnd = undefined;\r\n        let markerStart = undefined;\r\n\r\n        if (conn.markerEnd !== undefined && conn.markerEnd !== null) {\r\n          markerEnd = conn.markerEnd;\r\n        }\r\n        if (conn.markerStart !== undefined && conn.markerStart !== null) {\r\n          markerStart = conn.markerStart;\r\n        }\r\n\r\n        // å¦‚æœä¸¤è€…éƒ½æ²¡æœ‰ï¼Œé»˜è®¤ä½¿ç”¨æ­£å‘ç®­å¤´ï¼ˆmarkerEndï¼‰\r\n        if (markerEnd === undefined && markerStart === undefined) {\r\n          markerEnd = {\r\n            type: 'arrowclosed' as const,\r\n            color: conn.style?.stroke || '#64748b',\r\n            width: 16,\r\n            height: 16,\r\n          };\r\n        }\r\n\r\n        // å…¼å®¹æ—§çš„ \"top\" handle IDï¼Œè½¬æ¢ä¸ºæ­£ç¡®çš„ ID\r\n        let sourceHandle = conn.sourceHandle;\r\n        if (sourceHandle === 'top') {\r\n          sourceHandle = 'top-source'; // \"top\" ä½œä¸º source åº”è¯¥ä½¿ç”¨ \"top-source\"\r\n        }\r\n\r\n        let targetHandle = conn.targetHandle;\r\n        if (targetHandle === 'top') {\r\n          targetHandle = 'top-target'; // \"top\" ä½œä¸º target åº”è¯¥ä½¿ç”¨ \"top-target\"\r\n        }\r\n\r\n        return {\r\n          id: conn.id,\r\n          source: conn.sourceID,\r\n          target: conn.targetID,\r\n          sourceHandle: sourceHandle, // å…¼å®¹æ—§çš„ \"top\" sourceHandle\r\n          targetHandle: targetHandle, // å…¼å®¹æ—§çš„ \"top\" targetHandle\r\n          label: conn.label,\r\n          type: 'draggable', // å°†é»˜è®¤çš„ smoothstep æ”¹ä¸º draggable\r\n          animated: true,\r\n          style: {\r\n            stroke: conn.style?.stroke || '#64748b',\r\n            strokeWidth: conn.style?.strokeWidth || 1,\r\n            strokeDasharray: conn.style?.strokeDasharray,\r\n          },\r\n          labelStyle: conn.labelStyle || {\r\n            fill: '#000000',\r\n            fontSize: 9,\r\n            fontWeight: 300,\r\n            fontFamily: 'å¾®è½¯é›…é»‘',\r\n            background: '#E0E0E0',\r\n            padding: '6px 12px',\r\n            borderRadius: '6px',\r\n          },\r\n          labelBgStyle: conn.labelBgStyle || {\r\n            fill: '#E0E0E0',\r\n            fillOpacity: 1, // é»˜è®¤å®Œå…¨ä¸é€æ˜\r\n          },\r\n          labelBgPadding: [8, 12] as [number, number],\r\n          labelBgBorderRadius: 8,\r\n          markerEnd: markerEnd,\r\n          markerStart: markerStart,\r\n          data: {\r\n            ...conn.data,\r\n            notImplemented: conn.notImplemented || false,\r\n          },\r\n        } as Edge;\r\n      });\r\n\r\n    setAllNodes(flowNodes);\r\n    setAllEdges(flowEdges);\r\n\r\n    // åˆå§‹åŒ–æ˜¾ç¤º\r\n    const { nodes: visibleNodes, edges: visibleEdges } = filterElements(\r\n      flowNodes,\r\n      flowEdges,\r\n      showSubflows,\r\n    );\r\n    setNodes(visibleNodes);\r\n    setEdges(visibleEdges);\r\n  };\r\n\r\n  const loadFlowData = async () => {\r\n    try {\r\n      // 1. å°è¯•ä» LocalStorage åŠ è½½\r\n      const savedData = localStorage.getItem('saved-flow-data');\r\n      if (savedData) {\r\n        try {\r\n          const flowDef: FlowDefinition = JSON.parse(savedData);\r\n          if (flowDef && flowDef.nodes && flowDef.connectors) {\r\n            console.log('ä» LocalStorage åŠ è½½æµç¨‹æ•°æ®');\r\n            processFlowData(flowDef);\r\n            setLoading(false);\r\n            return;\r\n          }\r\n        } catch (e) {\r\n          console.warn('LocalStorage æ•°æ®è§£æå¤±è´¥ï¼Œå°†åŠ è½½é»˜è®¤æ•°æ®', e);\r\n        }\r\n      }\r\n\r\n      // 2. å¦‚æœ LocalStorage æ²¡æœ‰æ•°æ®æˆ–è§£æå¤±è´¥ï¼ŒåŠ è½½é»˜è®¤æ•°æ®\r\n      console.log('åŠ è½½é»˜è®¤æµç¨‹æ•°æ®');\r\n      const response = await fetch('/data/complete-business-flow.json');\r\n      const flowDef: FlowDefinition = await response.json();\r\n      processFlowData(flowDef);\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('åŠ è½½æµç¨‹æ•°æ®å¤±è´¥:', error);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleSubflows = () => {\r\n    setShowSubflows(!showSubflows);\r\n    // TODO: å®ç°å­æµç¨‹çš„æ˜¾ç¤º/éšè—é€»è¾‘\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flow-visualization-loading\">\r\n        <div className=\"loading-spinner\">åŠ è½½ä¸­...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"business-flow-visualization\">\r\n      <div className=\"flow-header\">\r\n        <div className=\"header-left\">\r\n          <h1 className=\"flow-title\">å®Œæ•´ä¸šåŠ¡æµç¨‹</h1>\r\n          <p className=\"flow-subtitle\">ä»çº¿ç´¢ç®¡ç†åˆ°é¡¹ç›®æ‰§è¡Œçš„å®Œæ•´æµç¨‹</p>\r\n        </div>\r\n        <div className=\"flow-info\">\r\n          <span className=\"info-item\">\r\n            <span className=\"info-icon\">ğŸ“Š</span>\r\n            èŠ‚ç‚¹: {nodes.length}\r\n          </span>\r\n          <span className=\"info-item\">\r\n            <span className=\"info-icon\">ğŸ”—</span>\r\n            è¿æ¥: {edges.length}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"flow-content\">\r\n        <FlowCanvas\r\n          nodes={nodes}\r\n          edges={edges}\r\n          showSubflows={showSubflows}\r\n          onToggleSubflows={toggleSubflows}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\types\\custom-css.d.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\types\\file-system.d.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\types\\flow.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\utils\\colorUtils.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\utils\\deepCopy.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'SerializableValue' is defined but never used.",
        "line": 6,
        "column": 6,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 6,
        "endColumn": 23
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'e' is defined but never used.",
        "line": 82,
        "column": 14,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 82,
        "endColumn": 15
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/**\r\n * å®‰å…¨çš„æ·±æ‹·è´å‡½æ•°\r\n * å¤„ç†å¾ªç¯å¼•ç”¨å’Œä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡\r\n */\r\n\r\ntype SerializableValue = string | number | boolean | null | Date | SerializableObject | SerializableArray;\r\ntype SerializableObject = Record<string, unknown>;\r\ntype SerializableArray = unknown[];\r\n\r\nexport function safeDeepCopy<T>(\r\n  obj: T,\r\n  seen = new WeakMap<object, unknown>(),\r\n  filter?: (key: string, value: unknown) => boolean,\r\n): T {\r\n  // å¤„ç†åŸºæœ¬ç±»å‹å’Œ null\r\n  if (obj === null || typeof obj !== 'object') {\r\n    return obj;\r\n  }\r\n\r\n  // æ£€æµ‹å¾ªç¯å¼•ç”¨\r\n  if (seen.has(obj as object)) {\r\n    return seen.get(obj as object) as T;\r\n  }\r\n\r\n  // å¤„ç†æ—¥æœŸå¯¹è±¡\r\n  if (obj instanceof Date) {\r\n    const dateCopy = new Date(obj.getTime());\r\n    seen.set(obj, dateCopy);\r\n    return dateCopy as T;\r\n  }\r\n\r\n  // å¤„ç†æ•°ç»„\r\n  if (Array.isArray(obj)) {\r\n    const arrCopy: unknown[] = [];\r\n    seen.set(obj, arrCopy);\r\n    obj.forEach((item) => {\r\n      arrCopy.push(safeDeepCopy(item, seen, filter));\r\n    });\r\n    return arrCopy as T;\r\n  }\r\n\r\n  // å¤„ç†æ™®é€šå¯¹è±¡\r\n  const objCopy: Record<string, unknown> = {};\r\n  seen.set(obj as object, objCopy);\r\n\r\n  Object.keys(obj).forEach((key) => {\r\n    try {\r\n      const objRecord = obj as Record<string, unknown>;\r\n      const value = objRecord[key];\r\n      \r\n      // è·³è¿‡å‡½æ•°å’Œ undefined\r\n      if (typeof value === 'function' || value === undefined) {\r\n        return;\r\n      }\r\n\r\n      // ä½¿ç”¨è‡ªå®šä¹‰è¿‡æ»¤å™¨\r\n      if (filter && !filter(key, value)) {\r\n        return;\r\n      }\r\n\r\n      // è·³è¿‡ä¸å¯åºåˆ—åŒ–çš„å¯¹è±¡ï¼ˆå¦‚ DOM å…ƒç´ ã€Symbol ç­‰ï¼‰\r\n      if (typeof value === 'object' && value !== null) {\r\n        // æ£€æµ‹æ˜¯å¦ä¸ºå†…ç½®å¯¹è±¡çš„å®ä¾‹ï¼ˆå¦‚ HTMLElement, Map, Set ç­‰ï¼‰\r\n        const proto = Object.getPrototypeOf(value);\r\n        if (\r\n          proto &&\r\n          proto.constructor &&\r\n          proto.constructor.name !== 'Object' &&\r\n          proto.constructor.name !== 'Array'\r\n        ) {\r\n          // è·³è¿‡å†…ç½®å¯¹è±¡å®ä¾‹\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // ç¡®ä¿å€¼æ˜¯å¯åºåˆ—åŒ–çš„\r\n      if (value !== null && typeof value === 'object') {\r\n        objCopy[key] = safeDeepCopy(value, seen, filter);\r\n      } else if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean' || value === null) {\r\n        objCopy[key] = value;\r\n      }\r\n    } catch (e) {\r\n      // å¦‚æœæŸä¸ªå±æ€§æ— æ³•è®¿é—®æˆ–æ‹·è´ï¼Œè·³è¿‡å®ƒ\r\n    }\r\n  });\r\n\r\n  return objCopy as T;\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\utils\\edgeLabelUtils.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\utils\\flowVersionStorage.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 255,
        "column": 18,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 255,
        "endColumn": 23
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 1,
        "message": "'DIR_HANDLE_KEY' is assigned a value but never used.",
        "line": 274,
        "column": 7,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 274,
        "endColumn": 21
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 307,
        "column": 19,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 307,
        "endColumn": 22,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                7964,
                7967
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                7964,
                7967
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 402,
        "column": 19,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 402,
        "endColumn": 22,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": {
              "range": [
                10442,
                10445
              ],
              "text": "unknown"
            },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": {
              "range": [
                10442,
                10445
              ],
              "text": "never"
            },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 4,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/**\r\n * IndexedDB å­˜å‚¨å·¥å…· - ç®¡ç†æµç¨‹å›¾ç‰ˆæœ¬\r\n * æœ€å¤šä¿å­˜ 10 ä¸ªç‰ˆæœ¬ï¼Œè¶…å‡ºæ—¶è‡ªåŠ¨åˆ é™¤æœ€æ—§çš„ç‰ˆæœ¬\r\n */\r\n\r\nconst DB_NAME = 'flow-versions-db';\r\nconst DB_VERSION = 1;\r\nconst STORE_NAME = 'versions';\r\nconst MAX_VERSIONS = 10;\r\n\r\nimport { FlowDefinition } from '../types/flow';\r\n\r\nexport interface FlowVersion {\r\n  id?: number;\r\n  timestamp: number;\r\n  name: string;\r\n  data: FlowDefinition;\r\n}\r\n\r\nexport interface SaveResult {\r\n  id: number;\r\n  timestamp: number;\r\n  name: string;\r\n  currentCount: number;\r\n  maxVersions: number;\r\n}\r\n\r\n// æ‰“å¼€æ•°æ®åº“\r\nfunction openDB(): Promise<IDBDatabase> {\r\n  return new Promise((resolve, reject) => {\r\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\r\n\r\n    request.onerror = () => {\r\n      reject(new Error('æ— æ³•æ‰“å¼€ IndexedDB æ•°æ®åº“'));\r\n    };\r\n\r\n    request.onsuccess = () => {\r\n      resolve(request.result);\r\n    };\r\n\r\n    request.onupgradeneeded = (event) => {\r\n      const db = (event.target as IDBOpenDBRequest).result;\r\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n        const store = db.createObjectStore(STORE_NAME, {\r\n          keyPath: 'id',\r\n          autoIncrement: true,\r\n        });\r\n        store.createIndex('timestamp', 'timestamp', { unique: false });\r\n      }\r\n    };\r\n  });\r\n}\r\n\r\n// ä¿å­˜æ–°ç‰ˆæœ¬\r\nexport async function saveVersion(data: FlowDefinition, name?: string): Promise<SaveResult> {\r\n  const db = await openDB();\r\n  const timestamp = Date.now();\r\n  const versionName = name || `ç‰ˆæœ¬ ${new Date(timestamp).toLocaleString()}`;\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(STORE_NAME, 'readwrite');\r\n    const store = transaction.objectStore(STORE_NAME);\r\n\r\n    // æ·»åŠ æ–°ç‰ˆæœ¬\r\n    const version: FlowVersion = {\r\n      timestamp,\r\n      name: versionName,\r\n      data,\r\n    };\r\n\r\n    const addRequest = store.add(version);\r\n\r\n    addRequest.onsuccess = () => {\r\n      const newId = addRequest.result as number;\r\n\r\n      // æ£€æŸ¥å¹¶åˆ é™¤è¶…å‡ºé™åˆ¶çš„æ—§ç‰ˆæœ¬\r\n      const countRequest = store.count();\r\n      countRequest.onsuccess = () => {\r\n        const count = countRequest.result;\r\n        const finalCount = Math.min(count, MAX_VERSIONS);\r\n\r\n        if (count > MAX_VERSIONS) {\r\n          // è·å–æ‰€æœ‰ç‰ˆæœ¬æŒ‰æ—¶é—´æ’åºï¼Œåˆ é™¤æœ€æ—§çš„\r\n          const index = store.index('timestamp');\r\n          const cursorRequest = index.openCursor();\r\n          let deleted = 0;\r\n          const toDelete = count - MAX_VERSIONS;\r\n\r\n          cursorRequest.onsuccess = (event) => {\r\n            const cursor = (event.target as IDBRequest<IDBCursorWithValue>).result;\r\n            if (cursor && deleted < toDelete) {\r\n              store.delete(cursor.primaryKey);\r\n              deleted++;\r\n              cursor.continue();\r\n            }\r\n          };\r\n        }\r\n\r\n        resolve({\r\n          id: newId,\r\n          timestamp,\r\n          name: versionName,\r\n          currentCount: finalCount,\r\n          maxVersions: MAX_VERSIONS,\r\n        });\r\n      };\r\n    };\r\n\r\n    addRequest.onerror = () => {\r\n      reject(new Error('ä¿å­˜ç‰ˆæœ¬å¤±è´¥'));\r\n    };\r\n\r\n    transaction.oncomplete = () => {\r\n      db.close();\r\n    };\r\n  });\r\n}\r\n\r\n// è·å–æ‰€æœ‰ç‰ˆæœ¬åˆ—è¡¨\r\nexport async function getAllVersions(): Promise<FlowVersion[]> {\r\n  const db = await openDB();\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(STORE_NAME, 'readonly');\r\n    const store = transaction.objectStore(STORE_NAME);\r\n    const index = store.index('timestamp');\r\n\r\n    // æŒ‰æ—¶é—´å€’åºè·å–\r\n    const versions: FlowVersion[] = [];\r\n    const cursorRequest = index.openCursor(null, 'prev');\r\n\r\n    cursorRequest.onsuccess = (event) => {\r\n      const cursor = (event.target as IDBRequest<IDBCursorWithValue>).result;\r\n      if (cursor) {\r\n        versions.push(cursor.value);\r\n        cursor.continue();\r\n      } else {\r\n        resolve(versions);\r\n      }\r\n    };\r\n\r\n    cursorRequest.onerror = () => {\r\n      reject(new Error('è·å–ç‰ˆæœ¬åˆ—è¡¨å¤±è´¥'));\r\n    };\r\n\r\n    transaction.oncomplete = () => {\r\n      db.close();\r\n    };\r\n  });\r\n}\r\n\r\n// è·å–æŒ‡å®šç‰ˆæœ¬\r\nexport async function getVersion(id: number): Promise<FlowVersion | null> {\r\n  const db = await openDB();\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(STORE_NAME, 'readonly');\r\n    const store = transaction.objectStore(STORE_NAME);\r\n    const request = store.get(id);\r\n\r\n    request.onsuccess = () => {\r\n      resolve(request.result || null);\r\n    };\r\n\r\n    request.onerror = () => {\r\n      reject(new Error('è·å–ç‰ˆæœ¬å¤±è´¥'));\r\n    };\r\n\r\n    transaction.oncomplete = () => {\r\n      db.close();\r\n    };\r\n  });\r\n}\r\n\r\n// åˆ é™¤æŒ‡å®šç‰ˆæœ¬\r\nexport async function deleteVersion(id: number): Promise<void> {\r\n  const db = await openDB();\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(STORE_NAME, 'readwrite');\r\n    const store = transaction.objectStore(STORE_NAME);\r\n    const request = store.delete(id);\r\n\r\n    request.onsuccess = () => {\r\n      resolve();\r\n    };\r\n\r\n    request.onerror = () => {\r\n      reject(new Error('åˆ é™¤ç‰ˆæœ¬å¤±è´¥'));\r\n    };\r\n\r\n    transaction.oncomplete = () => {\r\n      db.close();\r\n    };\r\n  });\r\n}\r\n\r\n// è·å–ç‰ˆæœ¬æ•°é‡\r\nexport async function getVersionCount(): Promise<number> {\r\n  const db = await openDB();\r\n\r\n  return new Promise((resolve, reject) => {\r\n    const transaction = db.transaction(STORE_NAME, 'readonly');\r\n    const store = transaction.objectStore(STORE_NAME);\r\n    const request = store.count();\r\n\r\n    request.onsuccess = () => {\r\n      resolve(request.result);\r\n    };\r\n\r\n    request.onerror = () => {\r\n      reject(new Error('è·å–ç‰ˆæœ¬æ•°é‡å¤±è´¥'));\r\n    };\r\n\r\n    transaction.oncomplete = () => {\r\n      db.close();\r\n    };\r\n  });\r\n}\r\n\r\n// å¯¼å‡º JSON æ–‡ä»¶\r\nexport function exportToFile(data: FlowDefinition, filename?: string): void {\r\n  const jsonStr = JSON.stringify(data, null, 2);\r\n  const blob = new Blob([jsonStr], { type: 'application/json' });\r\n  const url = URL.createObjectURL(blob);\r\n\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = filename || `flow-${new Date().toISOString().slice(0, 10)}.json`;\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n  URL.revokeObjectURL(url);\r\n}\r\n\r\n// ä»æ–‡ä»¶å¯¼å…¥\r\nexport function importFromFile(): Promise<FlowDefinition> {\r\n  return new Promise((resolve, reject) => {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = '.json';\r\n\r\n    input.onchange = (event) => {\r\n      const file = (event.target as HTMLInputElement).files?.[0];\r\n      if (!file) {\r\n        reject(new Error('æœªé€‰æ‹©æ–‡ä»¶'));\r\n        return;\r\n      }\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        try {\r\n          const data = JSON.parse(e.target?.result as string);\r\n          resolve(data);\r\n        } catch (error) {\r\n          reject(new Error('JSON è§£æå¤±è´¥'));\r\n        }\r\n      };\r\n      reader.onerror = () => {\r\n        reject(new Error('æ–‡ä»¶è¯»å–å¤±è´¥'));\r\n      };\r\n      reader.readAsText(file);\r\n    };\r\n\r\n    input.click();\r\n  });\r\n}\r\n\r\n// ============================================================\r\n// File System Access API - æœ¬åœ°æ–‡ä»¶å¤¹ä¿å­˜\r\n// ============================================================\r\n\r\n// å­˜å‚¨ç›®å½•å¥æŸ„çš„é”®å\r\nconst DIR_HANDLE_KEY = 'flow-save-directory';\r\n\r\n// ä¿å­˜çš„æ–‡ä»¶ä¿¡æ¯\r\nexport interface LocalFileSaveResult {\r\n  success: boolean;\r\n  filename: string;\r\n  folderName: string;\r\n  timestamp: number;\r\n  fileCount: number;\r\n  message: string;\r\n}\r\n\r\n// æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒ File System Access API\r\nexport function isFileSystemAccessSupported(): boolean {\r\n  return 'showDirectoryPicker' in window;\r\n}\r\n\r\n// å­˜å‚¨ç›®å½•å¥æŸ„åˆ° IndexedDBï¼ˆå› ä¸º FileSystemDirectoryHandle ä¸èƒ½å­˜å‚¨åˆ° localStorageï¼‰\r\nlet cachedDirectoryHandle: FileSystemDirectoryHandle | null = null;\r\n\r\n// è¯·æ±‚ç”¨æˆ·é€‰æ‹©ä¿å­˜ç›®å½•\r\nexport async function selectSaveDirectory(): Promise<FileSystemDirectoryHandle | null> {\r\n  if (!isFileSystemAccessSupported()) {\r\n    return null;\r\n  }\r\n\r\n  try {\r\n    const handle = await window.showDirectoryPicker({\r\n      mode: 'readwrite',\r\n      startIn: 'documents',\r\n    });\r\n    cachedDirectoryHandle = handle;\r\n    return handle;\r\n  } catch (error: any) {\r\n    if (error.name === 'AbortError') {\r\n      // ç”¨æˆ·å–æ¶ˆé€‰æ‹©\r\n      return null;\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n// è·å–å·²ä¿å­˜çš„ç›®å½•å¥æŸ„\r\nexport function getSavedDirectoryHandle(): FileSystemDirectoryHandle | null {\r\n  return cachedDirectoryHandle;\r\n}\r\n\r\n// æ¸…é™¤å·²ä¿å­˜çš„ç›®å½•å¥æŸ„\r\nexport function clearSavedDirectoryHandle(): void {\r\n  cachedDirectoryHandle = null;\r\n}\r\n\r\n// éªŒè¯ç›®å½•å¥æŸ„æ˜¯å¦ä»ç„¶æœ‰æ•ˆ\r\nasync function verifyDirectoryHandle(handle: FileSystemDirectoryHandle): Promise<boolean> {\r\n  try {\r\n    // å°è¯•è¯·æ±‚æƒé™\r\n    // å°è¯•è¯·æ±‚æƒé™\r\n    const permission = await handle.requestPermission({ mode: 'readwrite' });\r\n    return permission === 'granted';\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\n// ç”Ÿæˆæ–‡ä»¶å\r\nfunction generateFilename(): string {\r\n  const now = new Date();\r\n  const dateStr = now.toISOString().slice(0, 10); // YYYY-MM-DD\r\n  const timeStr = now.toTimeString().slice(0, 8).replace(/:/g, '-'); // HH-MM-SS\r\n  return `flow-${dateStr}_${timeStr}.json`;\r\n}\r\n\r\n// è·å–ç›®å½•ä¸­çš„ flow æ–‡ä»¶åˆ—è¡¨\r\nasync function getFlowFiles(handle: FileSystemDirectoryHandle): Promise<string[]> {\r\n  const files: string[] = [];\r\n  for await (const entry of handle.values()) {\r\n    if (entry.kind === 'file' && entry.name.startsWith('flow-') && entry.name.endsWith('.json')) {\r\n      files.push(entry.name);\r\n    }\r\n  }\r\n  // æŒ‰æ–‡ä»¶åæ’åºï¼ˆæ—¶é—´é¡ºåºï¼‰\r\n  return files.sort();\r\n}\r\n\r\n// ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶å¤¹\r\nexport async function saveToLocalFolder(data: FlowDefinition): Promise<LocalFileSaveResult> {\r\n  // æ£€æŸ¥æ˜¯å¦å·²æœ‰ç›®å½•å¥æŸ„\r\n  let handle = getSavedDirectoryHandle();\r\n\r\n  // å¦‚æœæ²¡æœ‰æˆ–æ— æ•ˆï¼Œè¯·æ±‚ç”¨æˆ·é€‰æ‹©\r\n  if (!handle) {\r\n    handle = await selectSaveDirectory();\r\n    if (!handle) {\r\n      throw new Error('æœªé€‰æ‹©ä¿å­˜ç›®å½•');\r\n    }\r\n  }\r\n\r\n  // éªŒè¯æƒé™\r\n  const isValid = await verifyDirectoryHandle(handle);\r\n  if (!isValid) {\r\n    // æƒé™å¤±æ•ˆï¼Œé‡æ–°è¯·æ±‚\r\n    handle = await selectSaveDirectory();\r\n    if (!handle) {\r\n      throw new Error('æœªé€‰æ‹©ä¿å­˜ç›®å½•');\r\n    }\r\n  }\r\n\r\n  // ç”Ÿæˆæ–‡ä»¶åå¹¶ä¿å­˜\r\n  const filename = generateFilename();\r\n  const jsonStr = JSON.stringify(data, null, 2);\r\n\r\n  try {\r\n    const fileHandle = await handle.getFileHandle(filename, { create: true });\r\n    const writable = await fileHandle.createWritable();\r\n    await writable.write(jsonStr);\r\n    await writable.close();\r\n\r\n    // è·å–å½“å‰æ–‡ä»¶æ•°é‡ï¼ˆä¸å†è‡ªåŠ¨æ¸…ç†ï¼Œç”±ç”¨æˆ·æ‰‹åŠ¨ç®¡ç†ï¼‰\r\n    const files = await getFlowFiles(handle);\r\n\r\n    return {\r\n      success: true,\r\n      filename,\r\n      folderName: handle.name,\r\n      timestamp: Date.now(),\r\n      fileCount: files.length,\r\n      message: `å·²ä¿å­˜åˆ° ${handle.name}/${filename}`,\r\n    };\r\n  } catch (error: any) {\r\n    throw new Error(`ä¿å­˜å¤±è´¥: ${error.message}`);\r\n  }\r\n}\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "E:\\ä¸šåŠ¡å…¨æ™¯å›¾_google\\src\\utils\\layout.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  }
]